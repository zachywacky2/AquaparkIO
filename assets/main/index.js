window.__require=function e(t,i,n){function a(o,r){if(!i[o]){if(!t[o]){var c=o.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+o+"'")}o=c}var h=i[o]={exports:{}};t[o][0].call(h.exports,function(e){return a(t[o][1][e]||e)},h,h.exports,e,t,i,n)}return i[o].exports}for(var s="function"==typeof __require&&__require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(e,t,i){(function(e){function t(e,t){for(var i=0,n=e.length-1;n>=0;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}function n(e){"string"!=typeof e&&(e+="");var t,i=0,n=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){i=t+1;break}}else-1===n&&(a=!1,n=t+1);return-1===n?"":e.slice(i,n)}function a(e,t){if(e.filter)return e.filter(t);for(var i=[],n=0;n<e.length;n++)t(e[n],n,e)&&i.push(e[n]);return i}i.resolve=function(){for(var i="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var o=s>=0?arguments[s]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(i=o+"/"+i,n="/"===o.charAt(0))}return(n?"/":"")+(i=t(a(i.split("/"),function(e){return!!e}),!n).join("/"))||"."},i.normalize=function(e){var n=i.isAbsolute(e),o="/"===s(e,-1);return(e=t(a(e.split("/"),function(e){return!!e}),!n).join("/"))||n||(e="."),e&&o&&(e+="/"),(n?"/":"")+e},i.isAbsolute=function(e){return"/"===e.charAt(0)},i.join=function(){var e=Array.prototype.slice.call(arguments,0);return i.normalize(a(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},i.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;i>=0&&""===e[i];i--);return t>i?[]:e.slice(t,i-t+1)}e=i.resolve(e).substr(1),t=i.resolve(t).substr(1);for(var a=n(e.split("/")),s=n(t.split("/")),o=Math.min(a.length,s.length),r=o,c=0;c<o;c++)if(a[c]!==s[c]){r=c;break}var l=[];for(c=r;c<a.length;c++)l.push("..");return(l=l.concat(s.slice(r))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),i=47===t,n=-1,a=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!a){n=s;break}}else a=!1;return-1===n?i?"/":".":i&&1===n?"/":e.slice(0,n)},i.basename=function(e,t){var i=n(e);return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},i.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,i=0,n=-1,a=!0,s=0,o=e.length-1;o>=0;--o){var r=e.charCodeAt(o);if(47!==r)-1===n&&(a=!1,n=o+1),46===r?-1===t?t=o:1!==s&&(s=1):-1!==t&&(s=-1);else if(!a){i=o+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===i+1?"":e.slice(t,n)};var s="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(this,e("_process"))},{_process:2}],2:[function(e,t){var i,n,a=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(e){if(i===setTimeout)return setTimeout(e,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function c(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(e){i=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}})();var l,h=[],d=!1,u=-1;function p(){d&&l&&(d=!1,l.length?h=l.concat(h):u=-1,h.length&&g())}function g(){if(!d){var e=r(p);d=!0;for(var t=h.length;t;){for(l=h,h=[];++u<t;)l&&l[u].run();u=-1,t=h.length}l=null,d=!1,c(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new f(e,t)),1!==h.length||d||r(g)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(){return[]},a.binding=function(){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],CircleCheck:[function(e,t){"use strict";cc._RF.push(t,"bb834Tu1E1FkYbMOspNroBw","CircleCheck");var i=e("Player"),n=e("localConfig");e("playerData"),e("constants"),cc.Class({extends:cc.Component,properties:{hostPlayer:i},onLoad:function(){this.initWidth=this.node.width,this.initHeight=this.node.height,this.indexflame=0},start:function(){},sizeUpdate:function(e,t){var i=n.getTableArr("level");if(i){var a=this.hostPlayer.playerLv;t?a>4&&(a=4):this.node.x=300+15*a;for(var s=0;s<i.length;s++)if(i[s].level===a||s===i.length-1){this.node.width=i[s].circleRadiusFactor*this.initWidth*e,this.node.height=i[s].circleRadiusFactor*this.initHeight*e;break}}},getRadiusByKnifeCount:function(e){return 250*this.getRadioByCount(e)},getRadioByCount:function(e){return(8>e?0:20<e?12:e-8)/12+1},circleIntersect:function(e,t,i){var n=t.x,a=i.x,s=t.y,o=i.y;return!(e*e<(n-a)*(n-a)+(s-o)*(s-o))},update:function(){}}),cc._RF.pop()},{Player:"Player",constants:"constants",localConfig:"localConfig",playerData:"playerData"}],CircleManager:[function(e,t){"use strict";cc._RF.push(t,"b3e648gRPNL8YLO1Gt69g2T","CircleManager"),cc.Class({extends:cc.Component,properties:{circlePrefab:cc.Prefab,circleParent:cc.Node},onLoad:function(){window.CircleManager=this},addCircle:function(e){var t=cc.instantiate(this.circlePrefab);t.parent=this.circleParent,t.getComponent("Follow").target=e.node;var i=t.getComponent("CircleCheck");return i.hostPlayer=e,i}}),cc._RF.pop()},{}],FansManager:[function(e,t){"use strict";cc._RF.push(t,"c0a0fz4Za5F+YOAXuS9AGOz","FansManager");var i=e("localConfig"),n=e("playerData"),a=e("constants");e("gameLogic"),cc.Class({extends:cc.Component,properties:{fanPrefab:cc.Prefab,fanParent:cc.Node,addTip:cc.Prefab,addFansTipParent:cc.Node,lightRing:cc.Prefab,addFansTipRingParent:cc.Node,sparkPrefab:cc.Prefab,sparkParent:cc.Node},onLoad:function(){window.FansManager=this},start:function(){this.fans=[],this.addTipLbPool=new cc.NodePool,this.addTipRingPool=new cc.NodePool,this.sparkPool=new cc.NodePool,setTimeout(function(){this.generateFansRandomInterval()}.bind(this),500)},getFan:function(e){if(this.isValid){var t=cc.instantiate(this.fanPrefab);if(window.ShadowManager&&ShadowManager.addShadow(t),e){var i=e.node.convertToWorldSpaceAR(cc.v2(0,0)),n=this.fanParent.convertToNodeSpaceAR(i);t.position=n}t.parent=this.fanParent;var a=t.getComponent("fan");return this.fans.push(a),a}},addFansTip:function(){},addFans10Tip:function(e,t){if(t===PlayerManager.player){var i=cc.instantiate(this.addTip);i.parent=this.addFansTipParent;var n=i.children[0].getComponent(cc.Label);n.node.color=t.uiColor,n.fontSize=100,n.lineHeight=120,n.string=",5";var a=e.node.convertToWorldSpaceAR(cc.v2(0,0)),s=this.addFansTipParent.convertToNodeSpaceAR(a);i.position=s;var o=i.getComponent(cc.Animation);o&&o.play(),setTimeout(function(){this.isValid&&i.destroy()}.bind(this),5e3)}},playSpark:function(e){var t=this.sparkPool.get();t||(t=cc.instantiate(this.sparkPrefab)),t.parent=this.sparkParent;var i=this.sparkParent.convertToNodeSpaceAR(e);t.position=i;var n=t.getComponent(cc.Animation);n&&n.play(),setTimeout(function(){this&&this.sparkPool&&this.sparkPool.put(t)}.bind(this),2e3)},addFansLbTip:function(e,t){var i=this.addTipLbPool.get();i||(i=cc.instantiate(this.addTip)),i.parent=this.addFansTipParent,i.children[0].color=t.uiColor;var n=e.node.convertToWorldSpaceAR(cc.v2(0,0)),a=this.addFansTipParent.convertToNodeSpaceAR(n);i.position=a;var s=i.getComponent(cc.Animation);s&&s.play(),setTimeout(function(){this&&this.addTipLbPool&&this.addTipLbPool.put(i)}.bind(this),5e3)},addFansRingTip:function(e,t){var i=this.addTipRingPool.get();i||(i=cc.instantiate(this.lightRing)),i.parent=this.addFansTipRingParent;for(var n=0;n<i.children.length;n++){i.children[n].color=t.uiColor;for(var a=0;a<i.children[n].children.length;a++)i.children[n].children[a].color=t.uiColor}var s=i.getComponent("Follow");s&&(s.target=e.node);var o=i.getComponent(cc.Animation);o&&o.play(),setTimeout(function(){this&&this.addTipRingPool&&this.addTipRingPool.put(i)}.bind(this),5e3)},generateFansRandomInterval:function(){var e=this,t=.5*-n.BoundSize.x,s=.5*n.BoundSize.x,o=.5*-n.BoundSize.y,r=.5*n.BoundSize.y,c=0,l=setInterval(function(){if(e.isValid){var i=FansManager.getFan();if(i){var n=cc.v2((s-t)*(Math.random()-.5),(r-o)*(Math.random()-.5)),a=ObstaclesManager.detectIfInObstacle(n);a&&(n=a),i.node.x=n.x,i.node.y=n.y}++c>20&&clearInterval(l)}else clearInterval(l)},10),h=0,d=s-t,u=0,p=n.gameData.roundCnt;p=p?parseInt(p):1;var g=i.queryOne("newbieProtectTplt","round",p);g&&(h=g.fanCnt,d=2*g.range,u=g.durTime),this.fanSpawnId=setInterval(function(){if(n.gameState===a.GAME_STATE.PLAY){for(var e=0;e<1;e++){if(!this.isValid||this.fans.length>80)return void clearInterval(this.fanSpawnId);var i=this.getFan();if(i){var c=cc.v2(0,0);if(e<h&&u>0){if(PlayerManager.player){var l=PlayerManager.player.node.x+(Math.random()-.5)*d;l>s?l=s:l<t&&(l=t);var p=PlayerManager.player.node.y+(Math.random()-.5)*d;p>r?p=r:p<o&&(p=o),c=cc.v2(l,p)}}else{c=cc.v2((s-t)*(Math.random()-.5),(r-o)*(Math.random()-.5));var g=ObstaclesManager.detectIfInObstacle(c);g&&(c=g)}i.node.x=c.x,i.node.y=c.y}}u-=.2}}.bind(this),200)},onDestroy:function(){clearInterval(this.fanSpawnId)}}),cc._RF.pop()},{constants:"constants",gameLogic:"gameLogic",localConfig:"localConfig",playerData:"playerData"}],Follow:[function(e,t){"use strict";cc._RF.push(t,"5c4dfSefoVJDo/n0g/nkfyh","Follow"),cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node},offset:cc.Vec2,isSpring:!1},setPosImmediately:function(){if(this.target){var e=this.target.convertToWorldSpaceAR(cc.v2(0,0)),t=this.node.parent.convertToNodeSpaceAR(e);this.node.x=t.x+this.offset.x,this.node.y=t.y+this.offset.y}},lateUpdate:function(e){if(this.target){var t=this.target.convertToWorldSpaceAR(cc.v2(0,0)),i=this.node.parent.convertToNodeSpaceAR(t);this.isSpring?(this.node.x=cc.lerp(this.node.x,i.x+this.offset.x,4*e),this.node.y=cc.lerp(this.node.y,i.y+this.offset.y,4*e)):(this.node.x=i.x+this.offset.x,this.node.y=i.y+this.offset.y)}}}),cc._RF.pop()},{}],GDSdk:[function(e,t){"use strict";cc._RF.push(t,"70e29/aR8JOY6RQ7ffYggMO","GDSdk"),cc._RF.pop()},{}],GameMonetizeSdk:[function(e,t){"use strict";cc._RF.push(t,"ef561CRzyxH4IH6bPY7vjLw","GameMonetizeSdk");var i,n,a,s,o=!1;window.SDK_OPTIONS={gameId:"nu0d75e4ljy0m9xf9at70sug2fvz5hzu",onEvent:function(e){switch(e.name){case"SDK_GAME_PAUSE":console.log("SDK_GAME_PAUSE==========>>>>>isPlayAd:",o),cc.game.pause();break;case"SDK_GAME_START":console.log("SDK_GAME_START==========1>>>>>isPlayAd:",o),cc.game.resume(),o&&(window.mWatchAdCallback&&window.mWatchAdCallback(),o=!1,console.log("SDK_GAME_START==========2>>>>>isPlayAd:",o)),window.mWatchAdCallbackInter&&window.mWatchAdCallbackInter();break;case"STARTED":o=!0,console.log("STARTED==========>>>>>isPlayAd:",o);break;case"SDK_READY":console.log("SDK_READY==========>>>>>isPlayAd:",o),o=!0;break;case"SDK_ERROR":console.log("SDK_ERROR==========>>>>>isPlayAd:",o)}}},n="script",a="gamemonetize-sdk",s=(i=document).getElementsByTagName(n)[0],i.getElementById(a)||((i=i.createElement(n)).id=a,i.src="patch/js/gm-sdk.js",s.parentNode.insertBefore(i,s)),cc._RF.pop()},{}],Game:[function(e,t){"use strict";cc._RF.push(t,"e98e7hxETxODLM8wGu55+mC","Game");var i=e("JoystickCommon"),n=e("JoystickBG"),a=kf.require("basic.clientEvent");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"\u6447\u6746\u8282\u70b9"},ring:{default:null,type:n,displayName:"\u6447\u6746\u80cc\u666f\u8282\u70b9"},stickX:{default:0,displayName:"\u6447\u6746X\u4f4d\u7f6e"},stickY:{default:0,displayName:"\u6447\u6746Y\u4f4d\u7f6e"},touchType:{default:i.TouchType.DEFAULT,type:i.TouchType,displayName:"\u89e6\u6478\u7c7b\u578b"},directionType:{default:i.DirectionType.ALL,type:i.DirectionType,displayName:"\u65b9\u5411\u7c7b\u578b"},sprite:{default:null,type:cc.Node,displayName:"\u64cd\u63a7\u7684\u76ee\u6807"},_stickPos:{default:null,type:cc.Node,displayName:"\u6447\u6746\u5f53\u524d\u4f4d\u7f6e"},_touchLocation:{default:null,type:cc.Node,displayName:"\u6447\u6746\u5f53\u524d\u4f4d\u7f6e"}},onLoad:function(){this._createStickSprite(),this.touchType==i.TouchType.FOLLOW&&this._initTouchEvent()},_createStickSprite:function(){this.ring.node.setPosition(this.stickX,this.stickY),this.dot.setPosition(this.stickX,this.stickY)},_initTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},_touchStartEvent:function(e){a.dispatchEvent("_touchStartEvent"),this._touchLocation=e.getLocation();var t=this.node.convertToNodeSpaceAR(e.getLocation());this.ring.node.setPosition(t),this.dot.setPosition(t),this._stickPos=t},_touchMoveEvent:function(e){if(this._touchLocation.x==e.getLocation().x&&this._touchLocation.y==e.getLocation().y)return!1;var t=this.ring.node.convertToNodeSpaceAR(e.getLocation()),i=this.ring._getDistance(t,cc.v2(0,0)),n=this.ring.node.width/2,a=this._stickPos.x+t.x,s=this._stickPos.y+t.y;if(n>i)this.dot.setPosition(cc.v2(a,s));else{var o=this._stickPos.x+Math.cos(this.ring._getRadian(cc.v2(a,s)))*n,r=this._stickPos.y+Math.sin(this.ring._getRadian(cc.v2(a,s)))*n;this.dot.setPosition(cc.v2(o,r))}this.ring._getAngle(cc.v2(a,s)),this.ring._setSpeed(cc.v2(a,s))},_touchEndEvent:function(){this.dot.setPosition(this.ring.node.getPosition()),a.dispatchEvent("_touchEndEvent"),this.ring._speed=0}}),cc._RF.pop()},{JoystickBG:"JoystickBG",JoystickCommon:"JoystickCommon"}],JoystickBG:[function(e,t){"use strict";cc._RF.push(t,"db0f2FiBgtK4rT6reD2+4vr","JoystickBG");var i=e("JoystickCommon"),n=e("playerData"),a=e("constants"),s=e("gameLogic");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"\u6447\u6746\u8282\u70b9"},_joyCom:{default:null,displayName:"joy Node"},_playerNode:{default:null,displayName:"\u88ab\u64cd\u4f5c\u7684\u76ee\u6807Node"},_angle:{default:null,displayName:"\u5f53\u524d\u89e6\u6478\u7684\u89d2\u5ea6"},_radian:{default:null,displayName:"\u5f27\u5ea6"},_speed:0,_speed1:8,_speed2:10,_opacity:0},onLoad:function(){this._joyCom=this.node.parent.getComponent("Game"),this._playerNode=this._joyCom.sprite,this._joyCom.touchType==i.TouchType.DEFAULT&&this._initTouchEvent()},start:function(){s.Joystick=this},_initTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},update:function(e){switch(this._joyCom.directionType){case i.DirectionType.ALL:this._allDirectionsMove(e)}},_allDirectionsMove:function(e){if(n.gameState===a.GAME_STATE.PLAY&&PlayerManager.player.node.active&&0!==this._joyCom.ring._speed&&!PlayerManager.player.isDefence&&(this._speed=PlayerManager.player.speed,null!==this._angle&&void 0!==this._angle)){var t=Math.cos(this._angle*(Math.PI/180))*this._speed,i=Math.sin(this._angle*(Math.PI/180))*this._speed;this._playerNode.x+=t*e,this._playerNode.y+=i*e}},_getDistance:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},_getRadian:function(e){return this._radian=Math.PI/180*this._getAngle(e),this._radian},_getAngle:function(e){var t=this.node.getPosition();return this._angle=Math.atan2(e.y-t.y,e.x-t.x)*(180/Math.PI),this._angle},_setSpeed:function(e){this._getDistance(e,this.node.getPosition())<this._radius?this._speed=this._speed1:this._speed=this._speed2},_touchStartEvent:function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation()),i=this._getDistance(t,cc.v2(0,0)),n=this.node.width/2;this._stickPos=t;var a=this.node.getPosition().x+t.x,s=this.node.getPosition().y+t.y;return n>i&&(this.dot.setPosition(cc.v2(a,s)),!0)},_touchMoveEvent:function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation()),i=this._getDistance(t,cc.v2(0,0)),n=this.node.width/2,a=this.node.getPosition().x+t.x,s=this.node.getPosition().y+t.y;if(n>i)this.dot.setPosition(cc.v2(a,s));else{var o=this.node.getPosition().x+Math.cos(this._getRadian(cc.v2(a,s)))*n,r=this.node.getPosition().y+Math.sin(this._getRadian(cc.v2(a,s)))*n;this.dot.setPosition(cc.v2(o,r))}this._getAngle(cc.v2(a,s)),this._setSpeed(cc.v2(a,s))},_touchEndEvent:function(){this.dot.setPosition(this.node.getPosition()),this._speed=0}}),cc._RF.pop()},{JoystickCommon:"JoystickCommon",constants:"constants",gameLogic:"gameLogic",playerData:"playerData"}],JoystickCommon:[function(e,t){"use strict";cc._RF.push(t,"2f218v14+5ApY52tiPQqn49","JoystickCommon"),t.exports={TouchType:cc.Enum({DEFAULT:0,FOLLOW:1}),DirectionType:cc.Enum({FOUR:4,EIGHT:8,ALL:0})},cc._RF.pop()},{}],MapManager:[function(e,t){"use strict";cc._RF.push(t,"aa1b9SMbABFJ7uBQNGKE0Mw","MapManager");var i=e("playerData"),n=e("constants");cc.Class({extends:cc.Component,properties:{leftCorner:cc.Node,rightCorner:cc.Node,upCorner:cc.Node,downCorner:cc.Node,leftShadow:cc.Node,rightShadow:cc.Node,upShadow:cc.Node,downShadow:cc.Node,obs2:cc.Node,obs3:cc.Node,obs4:cc.Node,obs5:cc.Node,obs31:cc.Node,obs51:cc.Node,obsPos:[cc.Vec2]},onLoad:function(){window.MapManager=this,this.timePoint=[60,90,120],this.durTime=10,this.timeIndex=0,this.deltaDistance=500,this.obstacleInit()},isAboutToReduceMap:function(){return i.fadeTime-MapManager.timePoint[MapManager.timeIndex]>=-12&&i.fadeTime-MapManager.timePoint[MapManager.timeIndex]<=-8},update:function(){if(i.gameState===n.GAME_STATE.PLAY){if(this.timeIndex>=this.timePoint.length)return;i.fadeTime===this.timePoint[this.timeIndex]&&(this.timeIndex++,this.reduceMapSize())}},reduceMapSize:function(){var e=0,t=this.deltaDistance/this.durTime/1e3;MapManager.reduceId=setInterval(function(){MapManager&&MapManager.node&&(i.BoundSize.x-=20*t,i.BoundSize.y-=20*t,MapManager.leftCorner.x+=20*t/2,MapManager.rightCorner.x-=20*t/2,MapManager.upCorner.y-=20*t/2,MapManager.downCorner.y+=20*t/2,MapManager.leftShadow.x+=20*t/2,MapManager.rightShadow.x-=20*t/2,MapManager.upShadow.y-=20*t/2,MapManager.downShadow.y+=20*t/2,(e+=20)>1e3*MapManager.durTime&&clearInterval(MapManager.reduceId))},20)},obstacleInit:function(){this.obs2.active=!1,this.obs3.active=!1,this.obs4.active=!1,this.obs5.active=!1,this.obs31.active=!1,this.obs51.active=!1;var e=i.gameData.roundCnt;if(e&&!(e<2)){var t=this.getR(),n=this.getR(),a=Math.floor(Math.random()*this.obsPos.length),s=Math.random()*this.obsPos.length|0;a===s&&(a<this.obsPos.length-1?a++:a=0),1===t?(t===n&&(this.newObs31=cc.instantiate(this.obs31),this.newObs51=cc.instantiate(this.obs51),this.newObs31.parent=this.obs31.parent,this.newObs51.parent=this.obs51.parent),this.obs31.setPosition(this.obsPos[a]),this.obs31.active=!0,this.obs51.setPosition(this.obsPos[a]),this.obs51.active=!0):(t===n&&(this.newObs=cc.instantiate(this["obs"+t]),this.newObs.parent=cc.instantiate(this["obs"+t]).parent),this["obs"+t].setPosition(this.obsPos[a]),this["obs"+t].active=!0),1===n?n===t?(this.newObs31.setPosition(this.obsPos[s]),this.newObs31.active=!0,this.newObs51.setPosition(this.obsPos[s]),this.newObs51.active=!0):(this.obs31.setPosition(this.obsPos[s]),this.obs31.active=!0,this.obs51.setPosition(this.obsPos[s]),this.obs51.active=!0):n===t?(this.newObs.setPosition(this.obsPos[s]),this.newObs.active=!0):(this["obs"+n].setPosition(this.obsPos[s]),this["obs"+n].active=!0)}},getR:function(){return 1+(5*Math.random()|0)},onDestroy:function(){clearInterval(MapManager.reduceId)}}),cc._RF.pop()},{constants:"constants",playerData:"playerData"}],ObstaclesManager:[function(e,t){"use strict";cc._RF.push(t,"f26ddAdJKVEKJ/amCf8bRX0","ObstaclesManager"),cc.Class({extends:cc.Component,properties:{obstacle:cc.Node,world:cc.Node},onLoad:function(){window.ObstaclesManager=this,this.fanWidht=110,this.fanHeight=110,ObstaclesManager.rectObstacles=[]},start:function(){for(var e=0;e<this.obstacle.children.length;e++)this.obstacle.children[e].active&&ObstaclesManager.rectObstacles.push(this.obstacle.children[e])},detectIfInObstacleByNode:function(e){if(PlayerManager.player){for(var t=e.convertToWorldSpaceAR(cc.v2(0,0)),i=this.obstacle.convertToNodeSpaceAR(t),n=ObstaclesManager.fanWidht*PlayerManager.player.node.scale,a=ObstaclesManager.fanHeight*PlayerManager.player.node.scale,s=cc.v2(0,0),o=0;o<ObstaclesManager.rectObstacles.length;o++){var r=ObstaclesManager.rectObstacles[o],c=r.y+.5*(r.height+a);if(!(i.y>c)){var l=r.y-.5*(r.height+a);if(!(i.y<l)){var h=r.x-.5*(r.width+n);if(!(i.x<h)){var d=r.x+.5*(r.width+n);if(!(i.x>d)){var u=i.x-h>d-i.x?d:h,p=i.y-l>c-i.y?c:l;s=Math.abs(u-i.x)>Math.abs(p-i.y)?cc.v2(i.x,p):cc.v2(u,i.y);var g=this.obstacle.convertToWorldSpaceAR(s);return e.parent.convertToNodeSpaceAR(g)}}}}}return!1}},detectIfInObstacle:function(e){if(PlayerManager.player){for(var t=ObstaclesManager.fanWidht*PlayerManager.player.node.scale,i=ObstaclesManager.fanHeight*PlayerManager.player.node.scale,n=0;n<ObstaclesManager.rectObstacles.length;n++){var a=ObstaclesManager.rectObstacles[n],s=a.y+.5*(a.height+i);if(!(e.y>s)){var o=a.y-.5*(a.height+i);if(!(e.y<o)){var r=a.x-.5*(a.width+t);if(!(e.x<r)){var c=a.x+.5*(a.width+t);if(!(e.x>c)){var l=e.x-r>c-e.x?c:r,h=e.y-o>s-e.y?s:o;return Math.abs(l-e.x)>Math.abs(h-e.y)?cc.v2(e.x,h):cc.v2(l,e.y)}}}}}return!1}}}),cc._RF.pop()},{}],PlayerManager:[function(e,t){"use strict";cc._RF.push(t,"8dc6e0xzzxLDbyfMrUP9bCH","PlayerManager");var i=e("constants"),n=e("localConfig"),a=e("playerData"),s=e("resourceUtil");cc.Class({extends:cc.Component,properties:{playerParent:cc.Node,playerPrefab:cc.Prefab,trackParent:cc.Node,trackPrefab:cc.Prefab,fanCntUIParent:cc.Node,fanCntPrefab:cc.Prefab,speedUpUIPrefab:cc.Prefab,world:cc.Node,fansParent:[cc.Node],crown:cc.Node,spawnPos:[cc.Vec2],speedEffect:cc.Prefab,dieEffect:cc.Prefab},getWorldScale:function(){return this.world.scale},onLoad:function(){window.PlayerManager=this,this.loadPlayerInfo(),this._knifeMin=3,this._knifeMax=20,this.lastKnifeNum=0,PlayerManager.players=[]},loadPlayerInfo:function(){Array.prototype.shuffle=function(){for(var e,t,i=this.length;i;)t=Math.floor(Math.random()*i--),e=this[i],this[i]=this[t],this[t]=e;return this},this.spawnPos.shuffle(),PlayerManager.PlayersInfo=[];var e=n.queryOne("growUpLevel","level",a.playerLevel);if(e){var t=[].concat(n.getTableArr("nickName"));t=[{nickName:"GDPlayer"},{nickName:"Arnold"},{nickName:"Adeline"},{nickName:"Carol"},{nickName:"Haley"},{nickName:"Mamie"},{nickName:"Florence"},{nickName:"Zara"},{nickName:"Sarah"}];for(var i=PlayerManager.getSkinTemplate(8,a.skinId),s=n.queryOne("AILevel","level",a.getAILevel()),o=PlayerManager.getPlayerFansCnt(s),r=0;r<8;r++)if(0===r)PlayerManager.PlayersInfo.push({nickName:a.gameData.playerName,skinId:i[r].ID,level:a.gameData.playerLevel,position:this.spawnPos[r],reviveCd:0,reviveVipRate:0,propFailCd:0,propUseRate:0,propUseTimeDelay:0,propUseTotalCnt:0,isAI:!1});else{var c=_.random(0,t.length-1),l=_.random(e.minAILv,e.maxAILv),h=t[c];PlayerManager.PlayersInfo.push({nickName:h.nickName,skinId:i[r].ID,level:l,position:this.spawnPos[r],initFansCnt:o.shift(),reviveCd:s.reviveCd,reviveVipRate:s.reviveVipRate,propFailCd:s.propFailCd,propUseRate:s.propUseRate,propUseTimeDelay:s.propUseTimeDelay,propUseTotalCnt:s.propUseTotalCnt,isAI:!0}),t.splice(c,1)}}else console.warn("playerLevel is nil:"+a.playerLevel)},getPlayerFansCnt:function(e){var t=.1,i=.2;e&&(t=e.fans20Rate,i=e.fans10Rate,e.fans1Rate);for(var n=[];n.length<7;){var a=Math.random();a<t?n.push(10):a<t+i?n.push(5):n.push(1)}return n},getSkinTemplate:function(e,t){var i=[],a=n.queryByID("skin",t);i.push(a);for(var s=[].concat(n.getTableArr("skin")),o=7;i.length<e;)if(i.length<8){var r=_.random(0,o),c=s[r];c.ID!==t&&(i.push(c),s.splice(r,1),o--)}else{var l=_.random(0,s.length-1),h=s[l];h.ID!==t&&(i.push(h),s.splice(l,1))}return i},start:function(){for(var e=1;e<8;e++){var t=cc.instantiate(this.playerPrefab);t.parent=this.playerParent;var i=t.getComponent("Player");i.setData(this.PlayersInfo[e]);var n=cc.instantiate(this.trackPrefab);n.parent=this.trackParent,n.getComponent("enemyTrack").setHostPlayer(i),PlayerManager.players.push(i)}},addSpeedUpUI:function(e){var t=cc.instantiate(this.speedUpUIPrefab);t.parent=this.fanCntUIParent;var i=t.getComponent("Follow");return i.target=e.node,i.setPosImmediately(),t},addSpeedEffect:function(e){var t=cc.instantiate(this.speedEffect);return t.parent=e.nodeBody,t},addDieEffect:function(e){var t=this;s.createEffect("fight/deadEffect/deadEffect",function(i,n){if(!i){var a=e.node.convertToWorldSpaceAR(cc.v2(0,0)),s=e.node.parent.convertToNodeSpaceAR(a);n.parent=t.playerParent,n.position=s;var o=n.getChildByName("particle").getComponent(cc.ParticleSystem);o.startColor=e.uiColor,o.endColor=e.uiColor,n.getComponent(cc.Animation).once("finished",function(){n.destroy()},t)}},this.playerParent)},speedUp:function(e){PlayerManager.player&&PlayerManager.player.speedUp&&PlayerManager.player.speedUp(e)},changeAllAIStrategy:function(){var e=a.gameData.roundCnt;if(e=e?parseInt(e):1,!n.queryOne("newbieProtectTplt","round",e)){for(var t=0;PlayerManager.players&&t<PlayerManager.players.length;t++)PlayerManager.players[t].lastAIStrategy=PlayerManager.players[t].aiStrategy,PlayerManager.players[t].lastDangerDetectDistance=PlayerManager.players[t].dangerDetectDistance,PlayerManager.players[t].aiStrategy=AIStrategy.Crazy,PlayerManager.players[t].dangerDetectDistance=200;setTimeout(function(){if(window.PlayerManager&&PlayerManager.players)for(var e=0;e<PlayerManager.players.length;e++)PlayerManager.players[e].aiStrategy=PlayerManager.players[e].lastAIStrategy,PlayerManager.players[e].dangerDetectDistance=PlayerManager.players[e].lastDangerDetectDistance},3e4)}},magnet:function(){},doubleFan:function(){for(var e=PlayerManager.player.getFansAmount(),t=0;t<e;t++){var i=FansManager.getFan();PlayerManager.player.addFan(i),i.node.position=PlayerManager.player.node.position}},addFanCntUI:function(e){var t=cc.instantiate(this.fanCntPrefab);t.parent=this.fanCntUIParent;var i=t.getChildByName("fanCnt").getComponent(cc.Label);i&&(i.string=e.getFansAmount()),t.color=e.uiColor;var n=t.getComponent("Follow");return n.target=e.node,n.setPosImmediately(),{fansCntLb:i,fansCntBg:t}},update:function(e){var t=PlayerManager.players[0];this.crown.parent=t.node,this.crown.setPosition(0,25),this.crown.scale=1*t.nodeBody.scale,this._knifeNum=PlayerManager.player.getFansAmount();var n=PlayerManager.inverseLerp(this._knifeMin,this._knifeMax,this._knifeNum);n=PlayerManager.clamp(0,1,n),this._numZoom=cc.misc.lerp(1,.55,n),this._moveZoom=PlayerManager.player.isDefence?i.camera.defence:i.camera.attact,this._curZoom=this._numZoom*this._moveZoom;var a;a=this.world.scale>this._curZoom?2:this.lastKnifeNum>this._knifeNum?5:3,this.world.scale=cc.misc.lerp(this.world.scale,this._curZoom,a*e),this.lastKnifeNum=this._knifeNum},inverseLerp:function(e,t,i){return e===t?1:(i-e)/(t-e)},clamp:function(e,t,i){return Math.max(e,Math.min(t,i))}}),cc._RF.pop()},{constants:"constants",localConfig:"localConfig",playerData:"playerData",resourceUtil:"resourceUtil"}],PlayerRotate:[function(e,t){"use strict";cc._RF.push(t,"1507eTwpuJKZLKjRooD+zuS","PlayerRotate"),cc.Class({extends:cc.Component,properties:{rotateSpeed:150,isStop:!1,stopKeepTime:.1,_stopTime:0},onLoad:function(){},stopRotate:function(){this.isStop=!0,this._stopTime=0},update:function(e){if(this.isStop){if(this._stopTime<this.stopKeepTime)return void(this._stopTime+=e);this.isStop=!1}this.node.parent.getComponent("Player").isAI&&cc.gameSpace.gameLogic.isInScreenExternal(this.node)||(this.node.angle+=this.rotateSpeed*e)}}),cc._RF.pop()},{}],Player:[function(e,t){"use strict";function i(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc._RF.push(t,"17726qMl/xFhYRKzsyh/pXy","Player"),window.Direction={Idle:0,Left:1,Right:2,Up:4,LeftUp:5,RightUp:6,Down:8,LeftDown:9,RightDown:10},window.AIStrategy={Crazy:{chaseTime:25,fansDelta:1,detectionRange:450},Radical:{chaseTime:15,fansDelta:2,detectionRange:450},Calm:{chaseTime:10,fansDelta:6,detectionRange:400},Conservatism:{chaseTime:6,fansDelta:10,detectionRange:350}};var s=kf.require("basic.clientEvent"),o=e("localConfig"),r=e("playerData"),c=e("constants"),l=e("gameLogic"),h=e("resourceUtil");cc.Class({extends:cc.Component,properties:{bodySprite:cc.Sprite,invincibilityTag:cc.Node,fansParent:cc.Node,defenseEffect:cc.Node,nameNode:cc.Node,nodeBody:cc.Node,nodeRageParent:cc.Node,nodeDefenseFgParent:cc.Node},onLoad:function(){var e=this;this.aiStrategy=AIStrategy.Conservatism,this.propUseCnt=0,this.propUseTotalCnt=3,this.killCnt=0,this.playerLv=1,this.maxFansCnt=0,this.direction=Direction.IDLE,this.lastPos=this.node.position,this.goldSpeedNum=0,this.continueKillCnt=0,this.stopMoveTime=0,this.limitTimeArr=[4,3,2,1],this.limitTimeIndex=0,this.currentBodyScale=1,this.isDefence=!0,this.defenseEffect.active=!0,this.nodeDefenseFgParent.active=!0,this.defenseAnim=this.defenseEffect.getComponent(cc.Animation),this.defenseAnim.play(),this.angleDelta=_.random(90,270),this.indexflame=0,this.AILogicTimmer=0,h.createEffect("fight/defenseEffect/defenseEffect",function(t,i){t||(e.nodeDefenseEffect=i,e.showDefenceAni())},this.nodeDefenseFgParent)},showDefenceAni:function(){if(this.nodeDefenseEffect){var e=this.nodeDefenseEffect.getComponent(cc.Animation);e.play("defenseEffectStart"),e.once("finished",function(){e.play("defenseEffectIdle")},this)}},setData:function(e){var t=this;this.info=e,this.characterLv=e.level,this.reviveCd=e.reviveCd,this.reviveVipRate=e.reviveVipRate,this.propFailCd=e.propFailCd,this.propUseRate=e.propUseRate,this.propUseTimeDelay=e.propUseTimeDelay,this.propUseTotalCnt=e.propUseTotalCnt,this.lvInfo=o.queryOne("growUpLevel","level",this.characterLv),this.lvInfo?this.initSpeed=1.5*this.lvInfo.speed:(this.initSpeed=600,console.log("playerLevel Tplt level:"+this.characterLv+"is nil")),this.node.position=e.position,this.speed=this.initSpeed,this.playerName=e.nickName,this.isAI=e.isAI,this.fans=[];var i=o.queryByID("skin",e.skinId);this.uiColor=cc.color(i.uiColorValue),this.nameNode&&(this.nameNode.getComponent(cc.Label).string=this.playerName,this.nameNode.color=this.uiColor);for(var n=0;n<this.defenseEffect.children.length;n++)this.defenseEffect.children[n].color=this.uiColor;i?(h.loadWeaponIcon("weapon"+e.skinId,function(e,i){t.weaponSf=i}),this.isAI?(h.setPlayerHead("head"+i.prefabName,this.bodySprite,function(){}),this.playerHead=i.prefabName):(h.setPlayerHead("head"+(r.gameData.playerDefaultSkin+1),this.bodySprite,function(){}),this.playerHead=r.gameData.playerDefaultSkin+1)):(this.playerHead="1",h.setPlayerHead("head1",this.bodySprite,function(){}),console.warn("skinId:"+skinId+"is nil")),this.dangerDetectDistance=350,this.deltaAnimFrame=.1,this.targetFan=null,this.targetPlayer=null,this.forbiddenFans=[],this.forbiddenPlayers=[],this.clearForbiddenCd=5,this.forbiddenDangers=[],this.clearDangersCd=.5,this.speedUpNowTime=0,this.speedUpMaxTime=10,this.eatNowTime=0,this.eatMaxCd=.05,this.setInvincibility(!1),this.isAI||(this.camera=kf.require("logic.camera"),this.camera.setCamera(cc.Camera.findCamera(this.node))),s.on("_touchEndEvent",this._touchEndEvent.bind(this)),s.on("_touchStartEvent",this._touchStartEvent.bind(this))},_touchStartEvent:function(){this===PlayerManager.player&&(this.stopMoveTime=0,this.limitTimeIndex=0,this.isDefence=!1,this.defenseEffect.active=!1,this.nodeDefenseFgParent.active=!1,this.defenseAnim.stop(),this.changeFansToAttack(),this.nodeBody.scale=this.currentBodyScale+.2)},_touchEndEvent:function(){if(this===PlayerManager.player){if(this.isCollision())return;this.isDefence=!0,this.defenseEffect.active=!0,cc.gameSpace.audioManager.playSound(c.AUDIO_SOUND.SHIELD),this.nodeDefenseFgParent.active=!0,this.showDefenceAni(),this.defenseAnim.play(),this.changeFansToDefence(),this.nodeBody.scale=this.currentBodyScale}},isCollision:function(){var e=.5*this.nodeBody.width*this.node.scale+20;return this.node.x<-.5*r.BoundSize.x+e||this.node.x>.5*r.BoundSize.x-e||this.node.y<-.5*r.BoundSize.y+e||this.node.y>.5*r.BoundSize.y-e},AIMoveStartEvent:function(){this.stopMoveTime=0,this.limitTimeIndex=0,this.isDefence=!1,this.defenseEffect.active=!1,this.nodeDefenseFgParent.active=!1,this.defenseAnim.stop(),this.changeFansToAttack()},changeFansToAttack:function(){var e=this;this.fans.forEach(function(t){t.startChangeToAttack(e)},this)},changeFansToDefence:function(){var e=this;this.fans.forEach(function(t){t.startChangeToDefence(e)},this)},AIMoveEndEvent:function(){this.isCollision()||(this.isDefence=!0,this.defenseEffect.active=!0,this.nodeDefenseFgParent.active=!0,this.defenseAnim.play(),this.changeFansToDefence())},start:function(){var e=1;if(this.info&&(e=this.info.initFansCnt),this.isAI){var t=_.random(-180,180);this.aiStrategy=t<-90?AIStrategy.Radical:t>90?AIStrategy.Calm:AIStrategy.Conservatism}else if(PlayerManager.player=this,PlayerManager.players.unshift(this),this.setData(PlayerManager.PlayersInfo[0]),this.node.position=PlayerManager.spawnPos[0],e=r.superStart,e+=r.miniGameExtraFan,e+=r.gameData.fansCountLevel,this.info&&this.info.skinId){var i=o.queryByID("skin",this.info.skinId);i&&(e+=i.fansAddition)}this.invincibilityTag.color=this.uiColor;var n=PlayerManager.addFanCntUI(this);this.fansCntLb=n.fansCntLb,this.fansCntBg=n.fansCntBg;var a=setInterval(function(){if(this.weaponSf){clearInterval(a);var t=0,i=setInterval(function(){if(t<e){var n=FansManager.getFan();this.addFan(n,!0),t++}else clearInterval(i)}.bind(this),10)}}.bind(this),10);this.newbieProtect()},newbieProtect:function(){if(this.isAI){var e=r.gameData.roundCnt;e=e?parseInt(e):1;var t=o.queryOne("newbieProtectTplt","round",e);if(t){switch(t.aiType){case 1:this.aiStrategy=AIStrategy.Radical;break;case 2:this.aiStrategy=AIStrategy.Calm;break;case 3:this.aiStrategy=AIStrategy.Conservatism}this.dangerDetectDistance=t.dangerDetectDistance,this.speed=t.speed}}},getFansAmount:function(){return this.fans.length},addFan:function(e,t){var n=this;if(e||(e=FansManager.getFan()),e&&this.node.active){var a=e.node.getComponent(cc.Sprite);a&&(a.spriteFrame=this.weaponSf);var r=e.node.convertToWorldSpaceAR(cc.v2(0,0)),c=this.fansParent.convertToNodeSpaceAR(r);e.node.position=c,e.hostPlayer=this,e.isDefence=this.isDefence,e.isReleased=!1,e.knifeCountComp.index=this.fans.length,e.node.parent=this.fansParent,this.fans.push(e),this.camera&&this.camera.chagneWeaponNum(this.fans.length),this.fans.length>this.maxFansCnt&&(this.maxFansCnt=this.fans.length),e.knifeState=t?KnifeState.Init:KnifeState.Normal,this.fansCntLb.string=this.fans.length;var l=this.fans.length/1e3;l>.2&&(l=.2),this.node.scale=1+3*l,this.currentBodyScale=1+.02*(this.fans.length>20?20:this.fans.length),this.nodeBody.scale=this.currentBodyScale+(this.isDefence?0:.2);for(var h=this.playerLv,d=[].concat(o.getTableArr("level")),u=0;u<d.length&&this.fans.length>=d[u].fanCnt;u++)this.playerLv=d[u].level;this.playerLv>h&&(this.eatMaxCd-=.003),s.dispatchEvent("addFan",this),setTimeout(function(){if(n.fans)for(var e,t=i(n.fans);!(e=t()).done;){var a=e.value;a.rotateKnife(),a.setScale()}},50)}},levelUp:function(){this.playerLv++},test:function(){console.log("Player test")},removeFan:function(e){var t=this;this.eatNowTime=this.eatMaxCd;for(var n=0;n<this.fans.length;n++)if(this.fans[n]===e){this.fans[n].hostPlayer=null,this.fans.splice(n,1);break}this.camera&&this.camera.chagneWeaponNum(this.fans.length);for(var a=0;a<this.fans.length;a++)this.fans[a].knifeCountComp.index=a+1;if(this.fansCntLb.string=this.fans.length,this.fans.length<=0);else{for(var s=this.playerLv,r=[].concat(o.getTableArr("level")),c=0;c<r.length&&this.fans.length>=r[c].fanCnt;c++)this.playerLv=r[c].level;this.playerLv<s&&(this.eatMaxCd+=.003);var l=this.fans.length/1e3;l>.2&&(l=.2),this.node.scale=1+3*l,this.currentBodyScale=1+.02*(this.fans.length>20?20:this.fans.length),this.nodeBody.scale=this.currentBodyScale+(this.isDefence?0:.2)}setTimeout(function(){if(t.fans)for(var e,n=i(t.fans);!(e=n()).done;){var a=e.value;a.rotateKnife(),a.setScale()}},10)},reviveNormal:function(){this.revive(2)},reviveVip:function(){this.revive(this.maxFansCnt+10)},revive:function(e){this.node.active=!0;for(var t=0;t<e;t++){var i=FansManager.getFan();this.addFan(i,!0)}this.nameNode&&(this.nameNode.active=!0),this.fansCntLb&&(this.fansCntLb.node.active=!0),this.fansCntBg&&(this.fansCntBg.active=!0),this.setInvincibility(!0),setTimeout(function(){this.setInvincibility(!1)}.bind(this),5e3)},setInvincibility:function(e){if(this&&this.node){this.invincibility=e;var t=o.getTableArr("level");if(t)for(var i=this.playerLv,n=0;n<t.length;n++)if(t[n].level===i||n===t.length-1){this.invincibilityTag.initWidth||(this.invincibilityTag.initWidth=this.invincibilityTag.width),this.invincibilityTag.initHeight||(this.invincibilityTag.initHeight=this.invincibilityTag.height),this.invincibilityTag.width=t[n].invincibilitySizeFactor*this.invincibilityTag.initWidth,this.invincibilityTag.height=t[n].invincibilitySizeFactor*this.invincibilityTag.initHeight;break}this.invincibilityTag.active=this.invincibility}},getInvincibility:function(){return this.invincibility},destroySpeedUp:function(){this.speed=this.initSpeed,this.speedUpUI&&this.speedUpUI.isValid&&this.speedUpUI.destroy(),this.speedUpEffect&&this.speedUpEffect.destroy(),this.speedUpInterval&&clearInterval(this.speedUpInterval)},speedUp:function(){this.destroySpeedUp(),this.speedUpUI=PlayerManager.addSpeedUpUI(this),this.speedUpEffect=PlayerManager.addSpeedEffect(this),this.speed=c.speedGoldAddPra/100*this.initSpeed;var e=o.queryOne("growUpLevel","level",r.sprintLevel);e&&!this.isAI?this.speedUpNowTime=e.sprintTime:this.speedUpNowTime=c.speedGoldTime,this.speedUpUI.getChildByName("speeduping").getComponent(cc.Animation).play("goldSpeedUp").speed=3/this.speedUpNowTime,this.speedUpInterval=setInterval(function(){this&&this.node&&this.isValid?this.speedUpNowTime<=0&&this.destroySpeedUp():clearInterval(this.speedUpInterval)}.bind(this),1e3),this.propUseCnt++},reRenderFans:function(){for(var e=0;e<this.fans.length;e++)this.fans[e].node.active=!0},hideFans:function(){for(var e=0;e<this.fans.length;e++)this.fans[e].node.active=!1},circleIntersect:function(e,t,i){var n=t.x,a=i.x,s=t.y,o=i.y;return!(e*e<(n-a)*(n-a)+(s-o)*(s-o))},update:function(e){if(r.gameState===c.GAME_STATE.PLAY){if(this.isAI){if(this.indexflame++,cc.gameSpace.gameLogic.isInScreenExternal(this.node)&&this.indexflame%9!=0)return;this.indexflame=0,this.updateBattleArray(),this.AILogic(e)}else this.TrySpeedUpGuide(),this.updateBattleArray(),this.detectObstacle();this.checkOutBound();var t=this.node.x-this.lastPos.x,i=this.node.y-this.lastPos.y;this.lastPos=this.node.position,this.directionUpdate(t,i),this.detectIfInObstacle(),this.playAnimation(e),this.eatNowTime-=e,this.speedUpNowTime-=e,this.danceLogic(e)}},checkOutBound:function(){var e=!1,t=.5*this.nodeBody.width*this.node.scale;return this.node.x<-.5*r.BoundSize.x+t&&(this.node.x=-.5*r.BoundSize.x+t,e=!0),this.node.x>.5*r.BoundSize.x-t&&(this.node.x=.5*r.BoundSize.x-t,e=!0),this.node.y<-.5*r.BoundSize.y+t&&(this.node.y=-.5*r.BoundSize.y+t,e=!0),this.node.y>.5*r.BoundSize.y-t&&(this.node.y=.5*r.BoundSize.y-t,e=!0),e},danceLogic:function(e){if(this.isDefence&&(this.stopMoveTime+=e,this.stopMoveTime>this.limitTimeArr[this.limitTimeIndex]&&this.fans.length>0&&(this.fans[0].knifeState=KnifeState.Release,this.fans[0].isRelease=!0,this.fans[0].throwKnife(ThrowType.SelfRelease),this.removeFan(this.fans[0]),this.stopMoveTime=0,this.limitTimeIndex++,this.limitTimeIndex>=this.limitTimeArr.length&&(this.limitTimeIndex=this.limitTimeArr.length-1)),this.fans.length>0)){var t=100*this.limitTimeArr[this.limitTimeIndex];this.stopMoveTime>t&&this.fans[0].dance(t)}},updateBattleArray:function(){},calcAngleDegrees:function(e,t){return 180*Math.atan2(t,e)/Math.PI},detectIfInObstacle:function(){var e=ObstaclesManager.detectIfInObstacle(this.node.position);if(e&&(this.node.position=e,this.isAI&&(this.targetFan&&(this.forbiddenFans.push(this.targetFan),this.targetFan=null),this.targetPlayer&&(this.forbiddenPlayers.push(this.targetPlayer),this.targetPlayer=null),this.dangerList&&this.dangerList.length>0)))for(var t=0;t<this.dangerList.length;t++){for(var i=!1,n=0;n<this.forbiddenDangers.length;n++)if(this.forbiddenDangers[n].player===this.dangerList[t].player){i=!0;break}i||this.forbiddenDangers.push(this.dangerList[t].player)}},directionUpdate:function(e,t){var i=""+(t<-5?1:0)+(t>5?1:0)+(e>5?1:0)+(e<-5?1:0);this.direction=parseInt(i,2)},AILogic:function(e){if(this.AILogicTimmer+=e,!(this.AILogicTimmer<.03)){this.AILogicTimmer=0,this.dangerList=this.getDanger(),this.gestureState();var t=0;if(this.dangerList.length>0){if(1===this.dangerList.length){var i=this.node.position.sub(this.dangerList[0].player.node.position);if(this.dangerList[0].player===PlayerManager.player){t=this.calcAngleDegrees(i.x,i.y)%360;var n=l.Joystick._angle%360;if(Math.abs(n-t)>60){var a=this.getTargetFan();if(a){var s=a.node.position.sub(this.node.position);t=this.calcAngleDegrees(s.x,s.y)}this.fans.length<8&&this.fans.length>2?this.AIMoveEndEvent():this.AIMoveStartEvent()}else this.AIMoveStartEvent()}else t=this.calcAngleDegrees(i.x,i.y)}else{var o=this.node.position.sub(this.dangerList[0].player.node.position),c=this.node.position.sub(this.dangerList[1].player.node.position);t=(this.calcAngleDegrees(o.x,o.y)+this.calcAngleDegrees(c.x,c.y))/2,this.AIMoveStartEvent()}this.AITrySpeedUp()}else{if(this.targetPlayer=this.getTargetPlayer(),this.targetPlayer){var h=this.targetPlayer.node.position.sub(this.node.position);t=this.calcAngleDegrees(h.x,h.y),this.AITrySpeedUp()}else{var d=this.getTargetFan();if(d){var u=d.node.position.sub(this.node.position);t=this.calcAngleDegrees(u.x,u.y)}}this.AIMoveStartEvent()}if(this.detectObstacle(t)&&(t+=this.angleDelta,this.angleDelta=_.random(90,270),this.targetFan&&(this.forbiddenFans.push(this.targetFan),this.targetFan=null),this.targetPlayer&&(this.forbiddenPlayers.push(this.targetPlayer),this.targetPlayer=null),this.dangerList.length>0&&this.forbiddenDangers.push(this.dangerList[0])),!this.isDefence){var p=cc.v2(Math.cos(t*(Math.PI/180))*this.speed,Math.sin(t*(Math.PI/180))*this.speed);this.node.x+=p.x*e,this.node.y+=p.y*e}this.node.x<-.5*r.BoundSize.x&&(this.node.x=-.5*r.BoundSize.x),this.node.x>.5*r.BoundSize.x&&(this.node.x=.5*r.BoundSize.x),this.node.y<-.5*r.BoundSize.y&&(this.node.y=-.5*r.BoundSize.y),this.node.y>.5*r.BoundSize.y&&(this.node.y=.5*r.BoundSize.y),this.curForbiddenTime||(this.curForbiddenTime=0),this.curForbiddenTime+=e,this.curForbiddenTime>this.clearForbiddenCd&&(this.curForbiddenTime=e,this.forbiddenFans=[],this.forbiddenPlayers=[]),this.curClearDangersTime||(this.curClearDangersTime=0),this.curClearDangersTime+=e,this.curClearDangersTime>this.clearDangersCd&&(this.curClearDangersTime=e,this.forbiddenDangers=[])}},detectObstacle:function(e){var t=cc.misc.degreesToRadians(e),i=cc.v2(200,0).rotate(t),n=Math.random()+2;i=i.mul(n);var a=this.node.convertToWorldSpaceAR(i),s=ObstaclesManager.obstacle.convertToNodeSpaceAR(a);return!!ObstaclesManager.detectIfInObstacle(s)},TrySpeedUpGuide:function(){if(!this.isAI&&!(this.speedUpNowTime>0||r.gameData.speedUpGuide))for(var e=0;PlayerManager.players&&e<PlayerManager.players.length;e++){var t=PlayerManager.players[e];if(t!==this&&t.node.active){if(this.forbiddenDangers.indexOf(t)>0)continue;if(this.circleIntersect(cc.Canvas.instance.node.width,this.node.position,t.node.position)){s.dispatchEvent("speedUpGuide",this);break}}}},AITrySpeedUp:function(){},getDanger:function(){for(var e=[],t=0;PlayerManager.players&&t<PlayerManager.players.length;t++){var i=PlayerManager.players[t];if(i!==this&&i.node.active){if(this.forbiddenDangers.indexOf(i)>0)continue;if(this.circleIntersect(this.dangerDetectDistance,this.node.position,i.node.position)&&i.getFansAmount()>this.getFansAmount()){var n=this.node.position.sub(i.node.position).mag();e.push({distance:n,player:i})}}}return e.sort(function(e,t){return e.distance-t.distance}),e},gestureState:function(){if(this.isAI){for(var e=!1,t=0;t<PlayerManager.players.length;t++){var i=PlayerManager.players[t];if(i!==this&&i.node.active){if(this.forbiddenDangers.indexOf(i)>0||i.isAI)continue;this.circleIntersect(1e3,this.node.position,i.node.position)&&(this.setTime&&(this.setTime=null),s.dispatchEvent("showGestures",!0),e=!0)}}e||(this.setTime=setTimeout(function(){s.dispatchEvent("showGestures",!1)},1e3))}},getTargetPlayer:function(){if(this.aiStrategy){for(var e=null,t=0;PlayerManager.players&&t<PlayerManager.players.length;t++){var i=PlayerManager.players[t];if(i!==this&&i.node.active&&!i.getInvincibility()){if(this.forbiddenPlayers.indexOf(i)>=0)continue;this.getFansAmount()-i.getFansAmount()>=this.aiStrategy.fansDelta&&(e?e=this.circleIntersect(this.aiStrategy.detectionRange,this.node.position,e.node.position)&&this.circleIntersect(this.aiStrategy.detectionRange,this.node.position,i.node.position)?null:this.node.position.sub(e.node.position).mag()<this.node.position.sub(i.node.position).mag()?e:i:this.circleIntersect(this.aiStrategy.detectionRange,this.node.position,i.node.position)&&(e=i))}}return e===PlayerManager.player&&PlayerManager.player.characterLv<6&&r.protectTime>0&&(e=null),e}},getTargetFan:function(){if(this.targetFan&&!this.targetFan.hostPlayer&&!this.targetFan.node.active)return this.targetFan;this.targetFan=null;for(var e=Number.MAX_VALUE,t=0;t<FansManager.fans.length;t++){var i=FansManager.fans[t];if(!i.node.active)return;if(!(this.forbiddenFans.indexOf(i)>=0||i.hostPlayer)){var n=!1;if(this.lvInfo&&(n=Math.random()>this.lvInfo.errorRate),this.circleIntersect(e,this.node.position,i.node.position)&&i.isReleased&&(e=i.node.position.sub(this.node.position).mag(),this.targetFan=i,n&&e<2e3))break}}return this.targetFan},playAnimation:function(){},showKillEffect:function(){var e=this;h.createEffect("fight/killEffect/killEffect",function(t,i){if(!t){var n=i.getComponent(cc.Animation);n.once("finished",function(){i.destroy()},e),n.play()}},this.nodeBody)},onRageOver:function(){this.speedUpNowTime<=0&&(this.speed=this.initSpeed),this.invincibility=!1,this.rageEffect&&(this.rageEffect.destroy(),this.rageEffect=null)},showRage:function(){var e=this;h.createEffect("fight/rage/rage",function(t,i){t||(i.getComponent(cc.Animation).play(),e.rageEffect=i)},this.nodeRageParent),this.speed=1.7*this.initSpeed,this.invincibility=!0,this.scheduleOnce(this.onRageOver,5)},onKillSomeone:function(){this.showKillEffect(),this.killCnt++,this.continueKillCnt++,this.isAI||this.continueKillCnt>0&&this.continueKillCnt%3==0&&this.showRage()},beKilled:function(e){if(!this.invincibility&&this.node.active){for(this.node.active=!1,this.continueKillCnt=0;this.fans.length>0;){var t=this.fans[this.fans.length-1];t.throwKnife(ThrowType.Dead),this.removeFan(t)}this.playerHead&&(0===o.queryByID("player",this.playerHead).sex?cc.gameSpace.audioManager.playSound(c.AUDIO_SOUND.DEAD_BOY):cc.gameSpace.audioManager.playSound(c.AUDIO_SOUND.DEAD_GIRL)),this.destroySpeedUp(),PlayerManager.addDieEffect(this),this.nameNode&&(this.nameNode.active=!1),this.fansCntLb&&(this.fansCntLb.node.active=!1),this.fansCntBg&&(this.fansCntBg.active=!1),e.targetPlayer=null,e.onKillSomeone(this),s.dispatchEvent("killPlayerUI",{murder:e,victim:this})}},onDestroy:function(){s.off("_touchEndEvent",this._touchEndEvent.bind(this)),s.off("_touchStartEvent",this._touchStartEvent.bind(this))}}),cc._RF.pop()},{constants:"constants",gameLogic:"gameLogic",localConfig:"localConfig",playerData:"playerData",resourceUtil:"resourceUtil"}],ShadowManager:[function(e,t){"use strict";cc._RF.push(t,"b8030cdGlxIKK9f9lb/H5VY","ShadowManager"),cc.Class({extends:cc.Component,properties:{shadowPrefab:cc.Prefab,shadowParent:cc.Node},onLoad:function(){window.ShadowManager=this},addShadow:function(){}}),cc._RF.pop()},{}],Shadow:[function(e,t){"use strict";cc._RF.push(t,"4e524sRHDNJl7R6wIo03PPV","Shadow"),cc.Class({extends:cc.Component,setHost:function(e){this.host=e;var t=this.host.getComponent("Player");t?this.bodySpritNode=t.bodySprite.node:(t=this.host.getComponent("fan"),this.bodySpritNode=t?t.bodySprite.node:this.host),this.sizeUpdate()},sizeUpdate:function(){this.node.scale=this.host.scale,this.node.width=this.bodySpritNode.width+10},lateUpdate:function(){if(this.host&&this.host.active){var e=this.host.scaleY*this.bodySpritNode.height*.5,t=this.host.convertToWorldSpaceAR(cc.v2(0,0)),i=this.node.parent.convertToNodeSpaceAR(t);this.node.x=i.x,this.node.y=i.y-e,this.node.opacity=this.host.opacity}else this.node.opacity=0}}),cc._RF.pop()},{}],UIGamePanel:[function(e,t){"use strict";cc._RF.push(t,"5cc93xxTodL94Sgd2YI0g5h","UIGamePanel");var i=kf.require("basic.clientEvent"),n=e("localConfig"),a=e("playerData"),s=e("gameLogic"),o=e("constants"),r=e("resourceUtil");cc.Class({extends:cc.Component,properties:{killTipUI:cc.Node,countDownLb:cc.Label,timeOverPrefab:cc.Prefab,deadPanelPrefab:cc.Prefab,killCntLb:cc.Label,propBtn:cc.Node,speedBtn:cc.Node,speedUpSf:cc.SpriteFrame,leftTimeTip:cc.Node,leftTimeTipLb:cc.Label,readyGo:cc.Node,guideUI:cc.Node,readyEnd:cc.Node,readyEndLb:cc.Label,freePrompt:cc.Node,gestures:cc.Node,screenShootAnim:cc.Animation,victoryAnim:cc.Animation,aniSpeedIcon:cc.Animation,otherBtn1:cc.Node,image1:cc.Node,nameLb1:cc.Label,speedUpGuide1:cc.Node,speedUpGuide2:cc.Node,curTishi:cc.Sprite,tishiArr:[cc.SpriteFrame]},onLoad:function(){this.isKillPlayerTipPlaying=!1,this.leftTimeTip.active=!1,this.propAnim=this.propBtn.getComponent(cc.Animation),this.propAnim.on("finished",this.propAnimFinish.bind(this)),this.speedAnim=this.speedBtn.getComponent(cc.Animation),this.speedAnim.on("finished",this.goldSpeedAnimFinish.bind(this)),this.killTipUIAnim=this.killTipUI.getComponent(cc.Animation),this.guideLogic(),a.gameState=o.GAME_STATE.PLAY,a.todayFirstLogin?(this.freePrompt.active=!0,this.gestures.active=!0):(this.freePrompt.active=!1,this.gestures.active=!1),this.killTipQueue=[],i.on("_touchStartEvent",this._touchStartEvent.bind(this)),i.on("speedUpGuide",this.speedUpGuide.bind(this))},onEnable:function(){cc.gameSpace.audioManager.stop(o.AUDIO_MUSIC.BACKGROUND),cc.gameSpace.audioManager.playMusic(o.AUDIO_MUSIC.FIGHT,!0)},onDisable:function(){cc.gameSpace.audioManager.stop(o.AUDIO_MUSIC.FIGHT),cc.gameSpace.audioManager.playMusic(o.AUDIO_MUSIC.BACKGROUND,!0)},speedUpGuide:function(){this.speedUpGuide2.active=!0},update:function(){if(!this.isKillPlayerTipPlaying&&this.killTipQueue.length>0){var e=this.killTipQueue.shift();this.killPlayerTip(e)}},showOtherGameBtn:function(e,t,i){var n=this.arrOtherGame[i];r.setGameIcon(n.icon,e.getComponent(cc.Sprite),function(){}),t.string=n.name,this.recommendGame=n},propAnimFinish:function(){this.isValid&&this.aniSpeedIcon.play()},goldSpeedAnimFinish:function(){this.isValid&&"goldPropCd"===this.speedAnim.currentClip.name&&this.speedAnim.play("speedBtnAnim")},_touchStartEvent:function(){this.guideClose()},guideLogic:function(){this.speedUpGuide1.active=!1,this.speedUpGuide2.active=!1,this.guideUI.active=!1;var e=a.gameData.roundCnt;if(e){var t=parseInt(e);this.guideUI.active=t<2,t++,a.updateRoundCnt(t)}else this.guideUI.active=!0,a.updateRoundCnt(1)},start:function(){if(this.propType=2,a.protectTime=30,a.fadeTime=0,a.BoundSize=cc.v2(4500,4500),this.totalTime=150,this.setLeftTime(),this.killCnt=0,this.killCntLb.string=this.killCnt,this.killTipUI.opacity=0,this.cdId=setInterval(function(){if(this.isValid){if(a.gameState===o.GAME_STATE.PLAY){if(this.totalTime-=1,a.fadeTime++,a.protectTime--,this.setLeftTime(),this.totalTime<=5&&(this.readyEnd.active=!0,0===this.totalTime?this.readyEndLb.string="Time is running out":this.readyEndLb.string=this.totalTime,cc.gameSpace.audioManager.playSound(o.AUDIO_SOUND.COUNT_DOWN)),this.totalTime<=0)return this.timeOver(),void clearInterval(this.cdId);60===this.totalTime&&PlayerManager.changeAllAIStrategy(),60!==this.totalTime&&30!==this.totalTime&&10!==this.totalTime||(this.leftTimeTipLb.string=this.totalTime,this.leftTimeTip.active=!0,setTimeout(function(){this&&this.leftTimeTip&&(this.leftTimeTip.active=!1)}.bind(this),2e3))}return a.gameState===o.GAME_STATE.GAME_OVER?(this.gameOver(),void clearInterval(this.cdId)):void 0}}.bind(this),1e3),this.propBtn.on("click",this.prop.bind(this)),this.speedBtn.on("click",this.speed.bind(this)),this.speedBtn.active=!1,i.on("killPlayerUI",this.killPlayerUI.bind(this)),i.on("showGestures",this.showGestures.bind(this)),this.tishiArr.length>0){this.curTishi.spriteFrame=this.tishiArr[0];var e=function(){var t=cc.fadeOut(.5),i=cc.fadeIn(.5),n=cc.sequence(i,cc.delayTime(5),t,cc.delayTime(2),cc.callFunc(function(){var t=0;MapManager.isAboutToReduceMap()?t=5:5==(t=Math.random()*this.tishiArr.length|0)&&t++,this.curTishi.active=!1,this.curTishi.spriteFrame=this.tishiArr[t],e()}.bind(this)));this.curTishi.active=!0,this.curTishi.node.stopAllActions(),this.curTishi.node.runAction(n)}.bind(this);e()}},showGestures:function(e){this.propAnim.getAnimationState("propCd").isPlaying?this.gestures.active=!1:this.gestures.active=e},guideClose:function(){this&&this.guideUI&&a.gameState===o.GAME_STATE.PLAY&&(this.guideUI.active=!1)},showPropReward:function(){if(this.isValid){switch(this.propType){case 0:PlayerManager.magnet();break;case 1:PlayerManager.doubleFan();break;case 2:PlayerManager.speedUp()}this.propBtn.active=!1,this.aniSpeedIcon.setCurrentTime(0),this.aniSpeedIcon.stop(),this.propAnim.play("propCd"),setTimeout(function(){PlayerManager&&PlayerManager.player&&PlayerManager.player.setInvincibility(!1)},2e3),a.gameState=o.GAME_STATE.PLAY}},prop:function(){a.gameState===o.GAME_STATE.PLAY&&(this.propAnim.getAnimationState("propCd").isPlaying||PlayerManager.player.speedUpNowTime>0||(PlayerManager.player.setInvincibility(!0),this.showPropReward()))},speed:function(){if(a.gameState===o.GAME_STATE.PLAY&&!(this.speedAnim.getAnimationState("goldPropCd").isPlaying||PlayerManager.player.speedUpNowTime>0)){PlayerManager.speedUp(o.speedType.gold),this.speedAnim.play("goldPropCd"),a.finishSpeedGuide(),this.speedUpGuide1.active=!1,this.speedUpGuide2.active=!1;var e=n.queryOne("growUpLevel","level",a.sprintLevel);e&&++PlayerManager.player.goldSpeedNum>=e.sprintCount&&(this.speedBtn.active=!1)}},setLeftTime:function(){var e=this.totalTime<0?0:this.totalTime,t=Math.floor(e/60),i=e%60;this.countDownLb.string=t>0?i<10?t+"/0"+i:t+"/"+i:i<10?"0/0"+i:"0/"+i},gameOver:function(){a.gameState=o.GAME_STATE.GAME_OVER,this.overLogic()},overLogic:function(){this.node&&(this.deadPanel&&this.deadPanel.destroy(),s.saveScore(),setTimeout(function(){if(this.isValid){switch(this.readyEnd.active=!1,PlayerManager.players.indexOf(PlayerManager.player)){case 0:this.victoryAnim.play(),a.AILevelUp();break;case 1:case 2:case 3:case 4:break;case 5:case 6:case 7:a.AILevelDown()}setTimeout(function(){cc.gameSpace.audioManager.playSound(o.AUDIO_SOUND.SCREEN_SHOOT);var e=(cc.Canvas.instance.node.height-576)/2,t=null;if(window.wx)try{canvas.toTempFilePath({x:0,y:e,width:720,height:576,destWidth:720,destHeight:576,success:function(e){t=e.tempFilePath}})}catch(i){}this.screenShootAnim.play(),setTimeout(function(){if(this.isValid){var e=cc.instantiate(this.timeOverPrefab);e.parent=this.node;var i=e.getComponent("uiTimeOver");i&&i.setData(t)}}.bind(this),400)}.bind(this),500)}}.bind(this),800))},timeOver:function(){a.gameState=o.GAME_STATE.TIME_OVER,this.overLogic()},killPlayerUI:function(e){if(this.killCntLb){e.victim===PlayerManager.player&&(s.saveScore(),this.deadPanel=cc.instantiate(this.deadPanelPrefab),this.deadPanel.parent=this.node,this.deadPanel.position=cc.v2(0,0)),PlayerManager.player&&(this.killCntLb.string=PlayerManager.player.killCnt),this.killTipQueue.push(e);for(var t=!0,i=0;i<PlayerManager.players.length;i++)PlayerManager.player!==PlayerManager.players[i]&&PlayerManager.players[i].node.active&&(t=!1);t?(e.murder===PlayerManager.player?a.killLastAi=!0:a.killLastAi=!1,a.gameState=o.GAME_STATE.GAME_OVER):a.killLastAi=!1}},killPlayerTip:function(e){this.isKillPlayerTipPlaying=!0,this.killTipUI.getComponent("killTip").setName(e),this.killTipUIAnim.play(),cc.gameSpace.audioManager.playSound(o.AUDIO_SOUND.KILL),(e.murder&&!e.murder.isAI||e.victim&&!e.victim.isAI)&&window.wx&&a.vibrateOn&&wx.vibrateLong(),setTimeout(function(){this.isKillPlayerTipPlaying=!1}.bind(this),1e3)},onDestroy:function(){clearInterval(this.cdId),i.off("_touchStartEvent",this._touchStartEvent.bind(this)),i.off("killPlayerUI",this.killPlayerUI.bind(this)),i.off("showGestures",this.showGestures.bind(this)),i.off("speedUpGuide",this.speedUpGuide.bind(this))}}),cc._RF.pop()},{constants:"constants",gameLogic:"gameLogic",localConfig:"localConfig",playerData:"playerData",resourceUtil:"resourceUtil"}],WheelSurf:[function(e,t){"use strict";function i(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc._RF.push(t,"f57cd+T05FMVL8oU0haywbU","WheelSurf"),cc.Class({extends:cc.Component,properties:{acc:{default:99,type:cc.Integer,displayName:"\u52a0\u901f\u5ea6",tooltip:"\u8bbe\u7f6e\u8f6c\u76d8\u7684\u52a0\u901f\u5ea6, \u6b63\u6574\u6570"},gearNum:{default:8,type:cc.Integer,displayName:"\u7269\u54c1\u6570\u91cf",tooltip:"\u8f6c\u76d8\u6309\u7167\u7269\u54c1\u6570\u91cf\u8fdb\u884c\u7b49\u5206, \u6b63\u6574\u6570"},maxSpeed:{default:300,type:cc.Integer,displayName:"\u8f6c\u76d8\u7684\u901f\u5ea6",tooltip:"\u901f\u5ea6\u8981\u5c3d\u91cf\u4f4e,\u907f\u514d\u4e0d\u80fd\u51c6\u786e\u8fdb\u5165"},duration:{default:4,type:cc.Integer,displayName:"\u8f6c\u52a8\u65f6\u95f4",tooltip:"\u8f6c\u76d8\u6700\u5c0f\u7684\u8f6c\u52a8\u65f6\u95f4"},radius:{default:200,type:cc.Integer,displayName:"\u8f6c\u76d8\u534a\u5f84",tooltip:"\u4f1a\u5f71\u54cd\u5230\u8f6c\u76d8\u4e0a\u7269\u54c1\u7684\u6446\u653e(\u9760\u8fd1\u4e2d\u5fc3\u6216\u8fdc\u79bb)"},rotaNode:{default:null,type:cc.Node,displayName:"\u8f6c\u52a8\u7684\u8282\u70b9",tooltip:"\u9700\u8981\u8f6c\u52a8\u7684\u8282\u70b9,\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u5c06\u8f6c\u52a8\u5f53\u524d\u8282\u70b9"},isRandom:{default:!1,displayName:"\u5f00\u542f\u968f\u673a\u6307\u5411",tooltip:"\u5f00\u542f\u6b64\u9009\u9879\u4f1a\u5728\u76ee\u6807\u7684\u5de6\u53f3\u968f\u673a\u505c\u4e0b,\u8fbe\u5230\u62df\u771f\u6548\u679c"}},editor:{disallowMultiple:!0,menu:"Component/WheelSurf"},onLoad:function(){this.wheel={curSpeed:0,spinTime:0,gearAngle:360,finalAngle:0},this.state=0,this.wheel.gearAngle=360/this.gearNum,this.rotaNode=this.rotaNode||this.node,this.startFunc=null,this.endFunc=null,this.speedUpFunc=null,this.speedCutFunc=null,this.itemsArr=[],this.calAngle(30,90)},update:function(e){if(0!==this.state)if(1===this.state)if(this.wheel.spinTime+=e,this.rotaNode.angle+=this.wheel.curSpeed*e-this.acc*e*e*.5,this.wheel.curSpeed<=this.maxSpeed)this.wheel.curSpeed+=this.acc*e;else{if(this.wheel.spinTime<this.duration)return;if(this.wheel.curSpeed=this.maxSpeed,this.calAngle(this.rotaNode.angle+this.wheel.distance,this.wheel.finalAngle)<this.wheel.gearAngle){var t=this.wheel.finalAngle-this.wheel.distance;this.isRandom&&(t+=(Math.random()-.5)*this.wheel.gearAngle*.8),this.rotaNode.angle=t,this.state=2,this.speedCutFunc&&this.speedCutFunc(this.data)}}else 2===this.state&&(this.rotaNode.angle+=this.wheel.curSpeed*e-this.acc*e*e*.5,this.wheel.curSpeed>0?this.wheel.curSpeed-=this.acc*e:(this.state=0,this.wheel.spinTime=0,this.endFunc&&this.endFunc(this.data)))},calAngle:function(e,t){var i,n;return e%=360,t%=360,(i=Math.abs(t-e))>(n=Math.abs(360-t)+e)?n:i},setParameters:function(e,t){if(0!==this.state)return cc.error("\u8bf7\u5728\u8f6c\u76d8\u672a\u8f6c\u52a8\u65f6\u8bbe\u7f6e"),!1;var n=e.acc,a=void 0===n?this.acc:n,s=e.gearNum,o=void 0===s?this.gearNum:s,r=e.maxSpeed,c=void 0===r?this.maxSpeed:r,l=e.duration,h=void 0===l?this.duration:l,d=e.dataArr;if(a&&(this.acc=a),o&&(this.gearNum=o),c&&(this.maxSpeed=c),h&&(this.duration=h),d.length<1)return cc.warn("\u6ca1\u6709\u5956\u54c1\u6570\u636e"),!1;this.wheel.gearAngle=360/this.gearNum;for(var u,p=i(this.itemsArr);!(u=p()).done;)u.value.removeFromParent();for(var g,f=i(d);!(g=f()).done;){var m=g.value,v=t(m);this.itemsArr.push(v),v.zIndex=m.ID,v.angle=(m.ID-1)*this.wheel.gearAngle,v.parent=this.rotaNode,v.y=this.radius*Math.cos(v.angle*Math.PI/180),v.x=this.radius*Math.sin(v.angle*Math.PI/180),v.active=!0}return this.wheel.distance=Math.pow(this.maxSpeed,2)/(2*this.acc),!0},run:function(e){if(0!==this.state)return cc.warn("\u8f6c\u76d8\u8fd8\u672a\u505c\u6b62"),!1;var t=e.target,i=e.type;return e.isFull,this.ID=t,this.type=i,this.isFull=0,this.target=t-1,this.data=e,this.startFunc&&this.startFunc(this.data),this.state=1,this.wheel.finalAngle=360-this.target*this.wheel.gearAngle%360,this.speedUpFunc&&this.speedUpFunc(this.data),!0},getState:function(){return this.state},onStart:function(e){this.startFunc=e},onEnd:function(e){this.endFunc=e},onSpeedUp:function(e){this.speedUpFunc=e},onSpeedCut:function(e){this.speedCutFunc=e}}),cc._RF.pop()},{}],aengineAdapter:[function(e,t){"use strict";cc._RF.push(t,"60bf75P/NxHZaSIFtl7ZB12","aengineAdapter"),window.kf=window.kf||{},kf._loadedItem={},kf.ignoreInitArr=[],kf.addIgnoreInitDir=function(e){kf.ignoreInitArr.push(e)},kf.addModule=function(e,t){var i,n=e.split("."),a=window;for(i=0;i<n.length-1;i++)a[n[i]]||(a[n[i]]={}),a=a[n[i]];a[n[n.length-1]]=t},kf.require=function(t,i){var n;if(!kf._loadedItem[t]){n=t.split(".");var a,s=window;for(a=0;a<n.length&&s;a++)s=s[n[a]];if(s?kf._loadedItem[t]=s():(n=t.split("."),kf._loadedItem[t]=e(n[n.length-1]),!kf._loadedItem[t]&&cc&&cc.require&&cc.require!==e&&(kf._loadedItem[t]=cc.require(n[n.length-1])),kf._loadedItem[t]&&window.cc&&!cc.sys.isNative&&console.error("please use kf.require, parentdir.filename!!!")),!i&&kf._loadedItem[t]){for(a=0;a<kf.ignoreInitArr.length;a++){var o=kf.ignoreInitArr[a];if(0===t.indexOf(o))break}a>=kf.ignoreInitArr.length&&kf._loadedItem[t].init&&kf._loadedItem[t].init()}}return kf._loadedItem[t]};var i=null;kf.enableMulTouch=function(e){if(e)cc.eventManager.dispatchEvent=i,i=null;else{i=cc.eventManager.dispatchEvent;var t=null;cc.eventManager.dispatchEvent=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var s=n[0];if(s.getEventCode&&s.getEventCode()===cc.Event.EventTouch.BEGAN)s._touches.length>1&&(s._touches.length=1),t=s._touches[0]._id;else if(s.getEventCode&&s.getEventCode()===cc.Event.EventTouch.ENDED){for(var o=0;o<s._touches.length&&t!==s._touches[o]._id;o++);if(o>=s._touches.length)return;s._touches[0]=s._touches[o],s._touches.length=1}i.apply(void 0,n)}}},kf.clone=function(e){var t;if("object"==typeof e)if(null===e)t=null;else if(e instanceof Array){t=[];for(var i=0,n=e.length;i<n;i++)t.push(this.clone(e[i]))}else for(var a in t={},e)e.hasOwnProperty(a)&&(t[a]=this.clone(e[a]));else t=e;return t},kf.cmp=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},kf.utf8ByteToUnicodeStr=function(e){for(var t="",i=0;i<e.length;){var n=e[i],a=0;n>>>7==0?(t+=String.fromCharCode(e[i]),i+=1):252==(252&n)?(a=(3&e[i])<<30,a|=(63&e[i+1])<<24,a|=(63&e[i+2])<<18,a|=(63&e[i+3])<<12,a|=(63&e[i+4])<<6,a|=63&e[i+5],t+=String.fromCharCode(a),i+=6):248==(248&n)?(a=(7&e[i])<<24,a|=(63&e[i+1])<<18,a|=(63&e[i+2])<<12,a|=(63&e[i+3])<<6,a|=63&e[i+4],t+=String.fromCharCode(a),i+=5):240==(240&n)?(a=(15&e[i])<<18,a|=(63&e[i+1])<<12,a|=(63&e[i+2])<<6,a|=63&e[i+3],t+=String.fromCharCode(a),i+=4):224==(224&n)?(a=(31&e[i])<<12,a|=(63&e[i+1])<<6,a|=63&e[i+2],t+=String.fromCharCode(a),i+=3):192==(192&n)?(a=(63&e[i])<<6,a|=63&e[i+1],t+=String.fromCharCode(a),i+=2):(t+=String.fromCharCode(e[i]),i+=1)}return t},kf.writeUTF=function(e,t){var i,n=[],a=0;for(i=0;i<e.length;i++){var s=e.charCodeAt(i);s>=0&&s<=127?(a+=1,n.push(s)):s>=128&&s<=2047?(a+=2,n.push(192|31&s>>6),n.push(128|63&s)):(s>=2048&&s<=55295||s>=57344&&s<=65535)&&(a+=3,n.push(224|15&s>>12),n.push(128|63&s>>6),n.push(128|63&s))}for(i=0;i<n.length;i++)n[i]&=255;return t?n:a<=255?[0,a].concat(n):[a>>8,255&a].concat(n)},kf.readUTF=function(e){if("string"==typeof e)return e;for(var t="",i=e,n=0;n<i.length;n++){var a=i[n].toString(2),s=a.match(/^1+?(?=0)/);if(s&&8===a.length){for(var o=s[0].length,r=i[n].toString(2).slice(7-o),c=1;c<o;c++)r+=i[c+n].toString(2).slice(2);t+=String.fromCharCode(parseInt(r,2)),n+=o-1}else t+=String.fromCharCode(i[n])}return t},kf.xmlToJson=function(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t={};for(var i=0;i<e.attributes.length;i++){var n=e.attributes.item(i);"size"!==n.nodeName&&"define"!==n.nodeName&&"mandatory"!==n.nodeName&&(t[n.nodeName]=n.nodeValue)}}}else 3===e.nodeType&&"#text"!==e.nodeName&&(t=e.nodeValue);if(e.hasChildNodes())for(var a=0;a<e.childNodes.length;a++){var s=e.childNodes.item(a),o=s.nodeName;if("#text"!==o)if(void 0===t[o]||"#text"===o)t[o]=this.xmlToJson(s);else{if(void 0===t[o].length){var r=t[o];t[o]=[],t[o].push(r)}t[o].push(this.xmlToJson(s))}}return t},kf.loadXMLStr=function(e){var t=null;if(!window.DOMParser&&window.ActiveXObject)for(var i=["MSXML.2.DOMDocument.6.0","MSXML.2.DOMDocument.3.0","Microsoft.XMLDOM"],n=0;n<i.length;n++)try{(t=new window.ActiveXObject(i[n])).async=!1,t.loadXML(e);break}catch(a){console.error(a)}else{if(!(window.DOMParser&&document.implementation&&document.implementation.createDocument))return null;try{t=(new window.DOMParser).parseFromString(e,"text/xml")}catch(a){console.error(a)}}return t},kf.touchInNode=function(e,t){var i=e.convertTouchToNodeSpace(t),n=e.getContentSize(),a=new cc.Rect(0,0,n.width,n.height);return cc.rectContainsPoint(a,i)},kf.getLocationInRoot=function(e){for(var t=e.x,i=e.y,n=e.parent;n&&n.parent&&!(n.parent instanceof cc.Scene);)t+=n.x,i+=n.y,n=n.parent;return cc.p(t,i)},window.string={},window.string.format=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t[0],a=t,s=1;return n.replace(/(%[ds])/g,function(){return a[s++]})},cc._RF.pop()},{}],animationUtil:[function(e,t){"use strict";cc._RF.push(t,"44142g6YOVC+7f0jgmVwpj1","animationUtil"),kf.addModule("util.animation",function(){return{playByWrapMode:function(e,t,i){return cc.WrapMode.hasOwnProperty(i)||cc.error("please use cc.WrapMode to set wrapMode"),e.getAnimationState(t).wrapMode=i.toString(),e.play(t)},setAnimFinished:function(e,t,i){e.getAnimationState(t).on("finished",i)}}}),cc._RF.pop()},{}],audioManager:[function(e,t){"use strict";cc._RF.push(t,"5b705TqYBNGo47s5Q4zq7RX","audioManager");var i=e("configuration"),n=e("resourceUtil"),a=new(cc.Class({properties:{musicVolume:1,soundVolume:1},onLoad:function(){this.audios={},this.arrSound=[],this.musicVolume=this.getConfiguration(!0)?.8:0,this.soundVolume=this.getConfiguration(!1)?1:0},playMusic:function(e,t){this.play(e,t,!0)},playSound:function(e,t){var i=this;if(t)this.play(e,t,!1);else{var a="audios/sound/";"click"!==e&&(a="subPackage/"+a),n.loadRes(a+e,cc.AudioClip,function(e,n){var a={};a.clip=n,a.loop=t,a.isMusic=!1;var s=cc.audioEngine.play(n,!1,i.soundVolume);a.audioId=s,i.arrSound.push(a),cc.audioEngine.setFinishCallback(s,function(){_.remove(i.arrSound,function(e){return e.audioId===s})})})}},play:function(e,t,i){var a=this,s=this.audios[e];if(s&&(s.isManualStop=!1),s){if(this.isAudioStarting(s.audioId)&&i)return;this.playClip(e,i)}else{var o="audios/";o=i?"subPackage/"+(o+="music/"):"subPackage/"+(o+="sound/"),n.loadRes(o+e,cc.AudioClip,function(n,s){var o={};o.clip=s,o.loop=t,o.isMusic=i,a.audios[e]=o,a.playClip(e,i)})}},playClip:function(e,t){var i=this.audios[e];if("number"!=typeof i.audioId||cc.audioEngine.getState(i.audioId)!==cc.audioEngine.AudioState.PLAYING||!i.loop){var n=this.musicVolume;t||(n=this.soundVolume);var a=cc.audioEngine.play(i.clip,i.loop,n);i.audioId=a}},stop:function(e){if(this.audios.hasOwnProperty(e)){var t=this.audios[e].audioId;void 0!==t&&cc.audioEngine.stop(t),this.audios[e].isManualStop=!0}},setMusic:function(e){for(var t in this.musicVolume=e,this.audios)if(this.audios.hasOwnProperty(t)&&this.audios[t].isMusic){var i=this.audios[t];this.setVolume(i.audioId,this.musicVolume)}},pauseAll:function(){console.log("pause all music!!!"),cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()},openMusic:function(){this.setMusic(.8),i.setGlobalData("music","true")},closeMusic:function(){this.setMusic(0),i.setGlobalData("music","false")},openSound:function(){this.setSound(1),i.setGlobalData("sound","true")},closeSound:function(){this.setSound(0),i.setGlobalData("sound","false")},setSound:function(e){for(var t in this.soundVolume=e,this.audios)if(this.audios.hasOwnProperty(t)&&!this.audios[t].isMusic){var i=this.audios[t];this.setVolume(i.audioId,this.soundVolume)}for(var n=0;n<this.arrSound.length;n++){var a=this.arrSound[n];this.setVolume(a.audioId,this.soundVolume)}},changeState:function(e,t){var i=this.audios[e];if(t&&i.loop&&!i.isManualStop){if("number"==typeof i.audioId&&this.isAudioStarting(i.audioId))return;this.playClip(e)}else t||"number"==typeof i.audioId&&this.isAudioStarting(i.audioId)&&cc.audioEngine.stop(i.audioId)},getConfiguration:function(e){var t;return!(t=e?i.getGlobalData("music"):i.getGlobalData("sound"))||"true"===t},isAudioStarting:function(e){var t=!1;if("number"==typeof e){var i=cc.audioEngine.getState(e);t=i===cc.audioEngine.AudioState.PLAYING||i===cc.audioEngine.AudioState.INITIALZING}return t},setVolume:function(e,t){var i=cc.audioEngine.getState(e);console.log("### audioId "+e+" state is: "+i+"volume is: "+t),cc.audioEngine.setVolume(e,t)}}));a.onLoad(),t.exports=a,cc._RF.pop()},{configuration:"configuration",resourceUtil:"resourceUtil"}],buttonEx:[function(e,t){"use strict";cc._RF.push(t,"b3d62XRhO5OK42aUmmu1MBZ","buttonEx");var i=e("audioManager"),n=e("constants");cc.Class({extends:cc.Button,properties:{isPreventSecondClick:!1,preventTime:2,_N$transition:{override:!0,default:3},zoomScale:{override:!0,default:.85},isPlaySound:!0},start:function(){var e=this.node.getComponent(cc.Button);this.node.on("click",function(){this.isPreventSecondClick&&(e.interactable=!1,this.scheduleOnce(function(){e.node&&(e.interactable=!0)},this.preventTime)),this.isPlaySound&&i.playSound(n.AUDIO_SOUND.CLICK,!1)},this)}}),cc._RF.pop()},{audioManager:"audioManager",constants:"constants"}],camera:[function(e,t){"use strict";cc._RF.push(t,"370edvSC9ZIBZB46HpDYHbf","camera");var i=e("localConfig");kf.addModule("logic.camera",function(){return{cameraComp:null,cameraConfig:null,minWeaponNum:null,maxWeaponNum:null,oldNum:0,targetRatio:1,chagneWeaponNumTimmer:null,init:function(){},_getConfig:function(e){if(this.cameraConfig)return e<=this.minWeaponNum?this.cameraConfig[this.minWeaponNum]:e>=this.maxWeaponNum?this.cameraConfig[this.maxWeaponNum]:this.cameraConfig[e]},setCamera:function(e){for(var t in this.cameraConfig=i.getTable("camera"),this.cameraConfig)(!this.minWeaponNum||this.minWeaponNum>Number(t))&&(this.minWeaponNum=Number(t)),(!this.maxWeaponNum||this.maxWeaponNum<t)&&(this.maxWeaponNum=Number(t));this.cameraComp=e},chagneWeaponNum:function(){}}}),cc._RF.pop()},{localConfig:"localConfig"}],checkNetwork:[function(e,t){"use strict";cc._RF.push(t,"84deb2uowBLMIw1CHwPeitq","checkNetwork"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.game.addPersistRootNode(this.node)},update:function(e){this.heartbeat.checkNetwork(e),this.reconnect.connectNetwork(e)}}),cc._RF.pop()},{}],clickTipPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"15819wngqdFk6nlGskRovE+","clickTipPanelUIEvent");var i=kf.require("basic.clientEvent"),n=e("constants"),a=kf.require("component.panel"),s=cc.Class({extends:a,properties:{},onLoad:function(){this._super(),this.registerWidgetEvent(),this.registerEvent()},registerWidgetEvent:function(){this.widget.rightButton.on("click",function(){cc.gameSpace.audioManager.playSound(n.AUDIO_SOUND.CLICK),i.dispatchEvent("hidePanel","clickTipPanel"),this.cancelFunc&&this.cancelFunc()}.bind(this)),this.widget.leftButton.on("click",function(){cc.gameSpace.audioManager.playSound(n.AUDIO_SOUND.CLICK),i.dispatchEvent("hidePanel","clickTipPanel"),this.result&&this.result()}.bind(this))},registerEvent:function(){},show:function(e,t,i){this._super(),this.result=t,this.cancelFunc=i,this.widget.tip.getComponent(cc.Label).string=e}});kf.addModule("clickTipPanel.clickTipPanelUIEvent",function(){return s}),cc._RF.pop()},{constants:"constants"}],clientEvent:[function(e,t){"use strict";cc._RF.push(t,"f4d97340SRO26auFBLMJBOK","clientEvent"),kf.addModule("basic.clientEvent",function(){var e=kf.require("basic.eventListener"),t={},i=["testEvent","showPanel","hidePanel","showPanelOver","hidePanelOver","dispatchWxEvent","wxSubPanelStart","wxSubPanelStop","showNetLoading","hideNetLoading","updateNetworkState","userlogined","updateUserDataDisplay","addFan","killPlayerLogic","killPlayerUI","timeOver","levelDown","_touchStartEvent","_touchEndEvent","showGestures","updateNavigateData","showLoginBtn","speedUpGuide","startChangeToDefence","startChangeToAttack","stopParentRotate"];for(var n in t.EVENT_TYPE={},i){var a=i[n];t.EVENT_TYPE[a]=1}return t.init=function(){this.eventListener=e.create("multi")},t.addEvent=function(e){t.EVENT_TYPE[e]?cc.error("already have the event "+e):t.EVENT_TYPE[e]=1},t.on=function(e,t){"string"==typeof e&&this.eventListener.on(e,t)},t.off=function(e,t){"string"==typeof e&&this.eventListener.off(e,t)},t.dispatchEvent=function(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];var s=n[0];if("string"==typeof s){var o=t.EVENT_TYPE[s];o?(e=this.eventListener).dispatch.apply(e,n):cc.error("please add"+s+"the event into clientEvent.js")}},t.bindEventListener=function(){this.eventListener=e.create("multi")},t}),cc._RF.pop()},{}],cloud:[function(e,t){"use strict";cc._RF.push(t,"d619cJqhc5HxpkjEyH2iDfX","cloud"),kf.addModule("basic.cloud",function(){var e={initAccount:function(e,t,i){this.gameName=e,this.account=t,this.fileUrl="wechatgame/"+e+"/"+this.account,this.getCloudInfo(i)},getCloudInfo:function(t,i){if(this.account){var n=this.fileUrl;i&&(n=i),cc.loader.load("https://1923914575990624.cn-hangzhou.fc.aliyuncs.com/2016-08-15/proxy/wechatgame/getCityData/?fileUrl="+n,function(n,a){if(console.log("getCityDataErr= ",n),!n&&a){console.log(a);var s=JSON.parse(a),o=s.url;if(console.log(s.url),window.wx)wx.request({url:o,header:{"content-type":" "},success:function(e){var i=e.data;try{var n=null;if(n=i,n=decodeURIComponent(n),console.log("result="+i),console.log("str="+n),i.indexOf("NoSuchKey")>-1)i={gameData:{}};else if("null"===n||""===n.trim())i={};else try{i=JSON.parse(n)}catch(a){console.error(a),i={}}}catch(a){return console.error(a),void(t&&t(a,i))}t&&t(null,i)},fail:function(){var e=kf.require("basic.clientEvent");e.dispatchEvent("hidePanel","netLoadingPanel"),e.dispatchEvent("showPanel","tipsPanel","login failed"),e.dispatchEvent("showLoginBtn")}});else{var r=new XMLHttpRequest;r.open("GET",o),r.setRequestHeader("content-type"," "),r.onreadystatechange=function(){if(4==r.readyState&&r.status>=200&&r.status<400){var e=r.responseText;try{var i=null;i=e,i=decodeURIComponent(i),console.log("result="+e),console.log("str="+i),e=""===i||"null"===i?{}:JSON.parse(i)}catch(n){return console.error(n),void(t&&t(n,e))}t&&t(null,e)}else 4==r.readyState&&404===r.status&&t&&t(null,{gameData:{}})}.bind(this),r.send()}}else console.error("\u83b7\u53d6\u73a9\u5bb6oss url \u5931\u8d25:gameName="+this.gameName+"&account="+this.account),e.getCloudInfo(t,i)}.bind(this))}},uploadToCloud:function(e,t,i){"object"==typeof e&&(e=JSON.stringify(e)),e=encodeURIComponent(e);try{var n=this.fileUrl;i&&(n=i);var a={fileUrl:n,newData:e},s=new XMLHttpRequest;s.open("POST","https://1923914575990624.cn-hangzhou.fc.aliyuncs.com/2016-08-15/proxy/wechatgame/updateCityData/"),s.onreadystatechange=function(){4==s.readyState&&s.status>=200&&s.status<400?t&&t(null,{}):4==s.readyState&&404===s.status&&t&&t(null,{})}.bind(this),s.send(JSON.stringify(a))}catch(o){console.error(o),t&&t(o)}},getInvitationInfo:function(e,t){var i="wechatgame/"+this.gameName+"/"+e+"_invitation";this.getCloudInfo(t,i)},setInvitationInfo:function(e,t,i){var n="wechatgame/"+this.gameName+"/"+e+"_invitation";this.uploadToCloud(t,i,n)}};return e}),cc._RF.pop()},{}],configManager:[function(e,t){"use strict";cc._RF.push(t,"a415bk5khBBFoUQpS+TAX1/","configManager");var i=[",",";","\t","|","^"],n=["\r\n","\r","\n"],a=function(e,t,i,n){return i instanceof Array?"number"===i[t]?Number(n[t]):"boolean"===i[t]?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:Number(n[t])},s={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:i[0],newline:n[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,assign:function(){for(var e=Array.prototype.slice.call(arguments),t=e[0],i=e.slice(1),n=0,a=i.length;n<a;n++)for(var s in i[n])t[s]=i[n][s];return t},map:function(e,t){for(var i=[],n=0,a=e.length;n<a;n++)i[n]=t(e[n],n);return i},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:e},buildObjectConstructor:function(e,t,i){return function(n){var s=new Object,o=function(e,t){return s[e]=t};return i?e.forEach(function(e,s){o(e,a(t[s],s,i,n))}):e.forEach(function(e,i){o(e,a(t[i],i,null,n))}),s}},buildArrayConstructor:function(e,t){return function(i){var n=new Array(e.length),s=function(e,t){return n[e]=t};return t?fields.forEach(function(n,o){s(n,a(e[o],o,t,i))}):fields.forEach(function(t,n){s(t,a(e[n],n,null,i))}),n}},frequency:function(e,t,i){void 0===i&&(i=!1);for(var n=0,a=0,s=this.getLimit(i,e.length);a<s&&-1!==(a=e.indexOf(t,a));)a+=1,n++;return n},mostFrequent:function(e,t,i){for(var n,a=t.length-1;a>=0;a--)this.frequency(e,t[a],i)>0&&(n=t[a]);return n||t[0]},unsafeParse:function(e,t,i){var n,a,s=e.split(t.newline);function o(e){var i=e.shift();if(i.indexOf('"')>=0){for(var n=0,a=0,s=0;e.length>0&&(-1!==(n=i.indexOf('"',a))||s%2!=0);)-1!==n?(a=n+1,s++):i=i+t.newline+e.shift();var o,r=[],c=0,l=0,h=0,d=i.length;for(var u in i)if(i.hasOwnProperty(u)){var p=i[u=parseInt(u)];0===u&&'"'===p&&(c++,l=1),'"'===p&&(c++,i[u-1]===t.delimiter&&l===u&&l++),'"'===p&&c%2==0&&(i[u+1]!==t.delimiter&&u+1!==d||(h=u,o=i.substring(l,h),r.push(o),h=l=h+2)),p===t.delimiter&&c%2==0&&((h=u)>l?(o=i.substring(l,h),r.push(o),h=l=h+1):h===l&&(r.push(""),h=l=h+1))}return(h=d)>=l&&(o=i.substring(l,h),r.push(o)),r}return i.split(t.delimiter)}for(t.skip>0&&s.splice(t.skip),t.header?(!0===t.header?(t.comment=o(s),t.cast=o(s),n=o(s)):"Array"===this.getType(t.header)&&(n=t.header),a=this.buildObjectConstructor(n,s[0].split(t.delimiter),t.cast)):a=this.buildArrayConstructor(s[0].split(t.delimiter),t.cast);s.length>0;){var r=o(s);r.length>1&&i(a(r),n[0])}return!0},safeParse:function(e,t){t.delimiter;var i=t.newline,n=e.split(i);return t.skip>0&&n.splice(t.skip),!0},encodeCells:function(e,t,i){for(var n=e.slice(0),a=0,s=n.length;a<s;a++)-1!==n[a].indexOf(this.quoteMark)&&(n[a]=n[a].replace(this.quoteRegex,this.doubleQuoteMark)),-1===n[a].indexOf(t)&&-1===n[a].indexOf(i)||(n[a]=this.quoteMark+n[a]+this.quoteMark);return n.join(t)},encodeArrays:function(e,t,i){var n=t.delimiter,a=t.newline;t.header&&"Array"===this.getType(t.header)&&i(this.encodeCells(t.header,n,a));for(var s=0,o=this.getLimit(t.limit,e.length);s<o;s++)i(this.encodeCells(e[s],n,a));return!0},encodeObjects:function(e,t,i){var n,a,s=t.delimiter,o=t.newline;for(var r in n=[],a=[],e[0])n.push(r),a.push(e[0][r]);!0===t.header?i(this.encodeCells(n,s,o)):"Array"===this.getType(t.header)&&i(this.encodeCells(t.header,s,o)),i(this.encodeCells(a,s));for(var c=1,l=this.getLimit(t.limit,e.length);c<l;c++){a=[];for(var h=0,d=n.length;h<d;h++)a.push(e[c][n[h]]);i(this.encodeCells(a,s,o))}return!0},parse:function(e,t,a){var s;if("Function"===this.getType(t)?(a=t,t={}):"Function"!==this.getType(a)?a=(s=[]).push.bind(s):s=[],t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var o=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,i,o),t.newline=t.newline||this.mostFrequent(e,n,o)}return this.unsafeParse(e,t,a)&&(!(s.length>0)||s)},encode:function(e,t,i){var n;return"Function"===this.getType(t)?(i=t,t={}):"Function"!==this.getType(i)&&(i=(n=[]).push.bind(n)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,i)&&(!(n.length>0)||n.join(t.newline))}},o={init:function(){this.csvTables={},this.csvTableForArr={},this.tableCast={},this.tableComment={}},addTable:function(e,t,i){if(!this.csvTables[e]||i){var n={},a=[];s.parse(t,{header:!0},function(e,t){n[e[t]]=e,a.push(e)}),this.tableCast[e]=s.opts.cast,this.tableComment[e]=s.opts.comment,this.csvTables[e]=n,this.csvTableForArr[e]=a}},getTableArr:function(e){return this.csvTableForArr[e]},getTable:function(e){return this.csvTables[e]},queryOne:function(e,t,i){var n=this.getTable(e);if(!n)return null;if(!t)return n[i];for(var a in n)if(n.hasOwnProperty(a)&&n[a][t]===i)return n[a]},queryByID:function(e,t){return this.queryOne(e,null,t)},queryAll:function(e,t,i){var n=this.getTable(e);if(!n||!t)return null;var a={};for(var s in n)n.hasOwnProperty(s)&&n[s][t]===i&&(a[s]=n[s]);return a},queryIn:function(e,t,i){if(i.constructor!==Array)return null;var n=this.getTable(e);if(!n||!t)return null;for(var a={},s=Object.keys(n),o=s.length,r=0;r<o;r++){var c=n[s[r]];i.indexOf(c[t])>-1&&(a[s[r]]=c)}return a},queryByCondition:function(e,t){if(t.constructor!==Object)return null;var i=this.getTable(e);if(!i)return null;for(var n={},a=Object.keys(i),s=a.length,o=Object.keys(t),r=o.length,c=0;c<s;c++){for(var l=i[a[c]],h=!0,d=0;d<r;d++){var u=o[d];h=h&&t[u].indexOf(l[u])>-1&&!n[a[c]]}h&&(n[a[c]]=l)}return n}};o.init(),t.exports=o,cc._RF.pop()},{}],configuration:[function(e,t){"use strict";cc._RF.push(t,"a6e45jCNkBAfq7ANm5tt7f8","configuration");var i=e("utils"),n=new(cc.Class({onLoad:function(){var e,t=this;if(this.jsonData={userId:""},this.path=this.getConfigPath(),(e=cc.sys.isNative?jsb.fileUtils.getValueMapFromFile(this.path).LegendConfig:cc.sys.localStorage.getItem("LegendConfig"))&&e.length){e.startsWith("@")&&(e=e.substring(1),e=i.decrypt(e));try{var n=JSON.parse(e);this.jsonData=n}catch(a){}}this.markSave=!1,this.saveTimer=setInterval(function(){t.scheduleSave()},500)},setConfigDataWithoutSave:function(e,t){var i=this.jsonData.userId;this.jsonData[i]?this.jsonData[i][e]=t:console.error("no account can not save")},setConfigData:function(e,t){this.setConfigDataWithoutSave(e,t),this.markSave=!0},getConfigData:function(e){var t=this.jsonData.userId;return this.jsonData[t]?this.jsonData[t][e]||"":(cc.log("no account can not load"),"")},setGlobalData:function(e,t){this.jsonData[e]=t,this.save()},getGlobalData:function(e){return this.jsonData[e]},setUserId:function(e){this.jsonData.userId=e,this.jsonData[e]||(this.jsonData[e]={}),this.save()},getUserId:function(){return this.jsonData.userId},scheduleSave:function(){this.markSave&&this.save()},markModified:function(){this.markSave=!0},save:function(){var e=JSON.stringify(this.jsonData),t="@"+i.encrypt(e);if(this.markSave=!1,cc.sys.isNative){var a={};a.LegendConfig=t,jsb.fileUtils.writeToFile(a,n.path)}else cc.sys.localStorage.setItem("LegendConfig",t)},getConfigPath:function(){var e=cc.sys,t="";return e===cc.sys.OS_WINDOWS?t="src/conf":e===cc.sys.OS_LINUX?t="./conf":cc.sys.isNative?(t=jsb.fileUtils.getWritablePath(),t+="conf"):t="src/conf",t},parseUrl:function(e){if(e&&!("string"==typeof e&&e.length<=0)){var t={};"string"==typeof e?(e=e.split("?")[1]).split("&").forEach(function(e){var i=e.indexOf("=");if(-1!==i){var n=e.substring(0,i);t[n]=e.substring(i+1)}}):t=e,t.action&&this.setGlobalData("urlParams",t),t.source&&this.setGlobalData("source",t.source),t.adchannelid&&this.setGlobalData("adchannelid",t.adchannelid)}}}));n.onLoad(),t.exports=n,cc._RF.pop()},{utils:"utils"}],constants:[function(e,t){"use strict";cc._RF.push(t,"47e69fM50xHoqWrHp/2i7xM","constants"),t.exports={LOCAL_CACHE:{PLAYER:"user",GAME:"gameData",DATA_VERSION:"dataVersion",ACCOUNT:"account",SETTING:"setting"},GUIDE_TYPE:{SPACE:0,GUIDE_ANI:1,TRIGGER_EVENT:2,WAIT_EVENT:3,GUIDE:4},GUIDE_TIPS_DIRECTION:{TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},SHARE_TYPE:{SHARE_GAME:0,GROUP_RANK:1},SHARE_FUNCTION:{DAILY_WELFARE:"dailyWelfare",SUPER_START:"superStart",REVIVE:"revive",GAME_OVER:"gameOver",SECRET_GIFT:"secretGift",DAILY_LOGIN:"dailyLogin",DAILY_LOGIN_GET_AGAIN:"dailyLoginGetAgain",LUCKY_WHEEL:"luckyWheel",POWERFUL_PROP:"powerfulProp",OVER_TIME:"overtime",INVITE_FRIEND:"inviteFriend",DEFAULT_SHARE:"defaultShare",SPEED_PROPERTY_TRAIN:"speedPropertyTrain",SHARE_TO_FRIEND:"shareToFriend",SUPER_WELFARE:"superWelfare",SPRINT_PROPERTY_TRAIN:"sprintPropertyTrain",DAILY_LOGIN_TODAY_GET:"dailyLoginTodayGet",SPEED:"speed",SKIN_TRY:"skinTry",PLAY_AGAIN:"playAgain",GET_SKIN:"getSkin"},ZORDER:{LINK_ITEM_NORMAL:0,LINK_ITEM_SKILL:1,FIGHT_NUM:20,DIALOG:100,REWARD:900,WAITING:998,TIPS:999},AUDIO_MUSIC:{BACKGROUND:"bgm",FIGHT:"fight"},AUDIO_SOUND:{CLICK:"btnClick",COUNT_DOWN:"countDown",CRASH_SWORD:"crashSword",DEAD:"dead",GAME_START:"gameStart",GO:"go",GRAB:"grab",SHIELD:"shield",KILL:"kill",LOSE:"lose",LOSE_SWORD:"loseSword",SCREEN_SHOOT:"screenShoot",TIME_OVER:"timeOver",DEAD_BOY:"deadBoy",DEAD_GIRL:"deadGirl",CHANGE_WEAPON:"changeWeapon",WIN:"win",KILL1:"kill1",KILL2:"kill2",KILL3:"kill3",KILL4:"kill4",KILL5:"kill5",KILL6:"kill6",KILL7:"kill7",KILL8:"kill8",KILL9:"kill9"},LEVEL:{BASE_SCORE:100,TIMES:1.2},GAME_STATE:{NONE:0,PLAY:1,PAUSE:2,TIME_OVER:3,GAME_OVER:4},OPEN_REWARD_TYPE:{AD:0,SHARE:1,NULL:2},MODE_VALUE:{POMELO_MODE:1,NORMAL_MODE:2},aDayTime:864e5,aDaySeconds:86400,integrationLeng:30,TIMEARR:{seconds:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5},AnimationState:{PLAY:"play",STOP:"stop",PAUSE:"pause",RESUME:"resume",LASTFRAME:"lastframe",FINISHED:"finished"},KICK_TYPE:{KICK_BY_LOGIN:"kick by login",KICK_BY_GM:"kick by gm",KICK_BY_SYSTEM:"kick by system",KICK_BY_LOGOUT:"kick by logout"},LOGIN:{OLD_USER:1,NEW_USER:2},APP:{appId:""},level:{baseScore:100,times:1.2},props:{giftBag:999,gold:1,skin:2,speed:3,sprint:4},taskId:{continuousLogin:3,share:4,video:5,game:6,invite:7,oneGameFans:8,oneGamePlayer:9,continuousNo1:10,signIn:11},maxMathcingImageNums:101,getAwardFrom:{dailyWelfare:1,dailyLogin:2,luckyWheel:3,gameOver:4,secretGift:5},shareId:{dailyWelfare:0,superStart:1,revive:2,gameOver:3,secretGift:4,dailyLogin:5,dailyLoginGetAgain:6,luckyWheel:7,powerfulProp:9,overtime:10,inviteFriend:11,defaultShare:12,speedPropertyTrain:13,shareToFriend:14,superWelfare:15,sprintPropertyTrain:16,dailyLoginTodayGet:17,speed:18,skinTry:19,playAgain:20},adPlaceName:{mainPanel:"mainPanel",gameOverPanel:"gameOverPanel",uiGamePanel:"uiGamePanel",luckyWheelAward:"luckyWheelAward",gameOverAward:"gameOverAward",dailyWelfarePanel:"dailyWelfarePanel",dailyLoginAward:"dailyLoginAward",uiTimeOver:"uiTimeOver",crazySpotAward:"crazySpotAward",matchingPanel:"matchingPanel",trialSkinPanel:"trialSkinPanel",superStartPanel:"superStartPanel"},getSkinNum:1,matchingDesc:["Attribute cultivation can permanently increase speed!","Only good-looking people can have out-of-print skins!"],crazyProgressArr:[.5,.3,.2],speedGold:300,speedGoldAddPra:180,speedGoldMaxNum:2,speedGoldTime:3,speedType:{gold:1},shareImgPath:"xdysyqzShareImage",ossGameName:"djwzCity",camera:{defence:1.15,attact:.85},WX_AD_TYPE:{BANNER:0,VIDEO:1}},cc._RF.pop()},{}],dailyLoginPanelUIEvent:[function(e,t){"use strict";function i(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc._RF.push(t,"f090b5Z7YZOnLIFBEztUGcs","dailyLoginPanelUIEvent");var s=kf.require("basic.clientEvent"),o=kf.require("component.panel"),r=e("constants"),c=e("localConfig"),l=e("playerData"),h=e("utils");window.GameJava=null;var d=cc.Class({extends:o,properties:{goldImg:cc.SpriteFrame,defaultSkinImg:cc.SpriteFrame,dragonWarriorSkinImg:cc.SpriteFrame,arrLoginDay:[cc.Node],checkNode:cc.Node,videoNode:cc.Node},onLoad:function(){this._super(),this.registerEvent(),this.todayIndex=(new Date).getDay(),this.dailyLoginArr=c.getTableArr("dailyLogin"),this.skinArr=c.getTableArr("skin")},onEnable:function(){GameJava=this},initDailyLogin:function(){for(var e,t=this,n=function(){var i=e.value;switch(i.type){case r.props.gold:t.arrLoginDay[Number(i.ID)].img.getComponent(cc.Sprite).spriteFrame=t.goldImg,t.arrLoginDay[Number(i.ID)].desc.getComponent(cc.Label).string=""+i.show,t.arrLoginDay[Number(i.ID)].img.scale=.7;break;case r.props.skin:2==i.prizeId?(t.arrLoginDay[Number(i.ID)].img.getComponent(cc.Sprite).spriteFrame=t.defaultSkinImg,t.arrLoginDay[Number(i.ID)].img.angle=-45):9==i.prizeId&&(t.arrLoginDay[Number(i.ID)].img.getComponent(cc.Sprite).spriteFrame=t.dragonWarriorSkinImg,t.arrLoginDay[Number(i.ID)].img.angle=-90,t.arrLoginDay[Number(i.ID)].img.scale=1.2),t.arrLoginDay[Number(i.ID)].desc.getComponent(cc.Label).string=""+i.show;break;case r.props.sprint:t.arrLoginDay[Number(i.ID)].img.getComponent(cc.Sprite).spriteFrame=t.sprintImg,t.arrLoginDay[Number(i.ID)].desc.getComponent(cc.Label).string=""+i.show,t.arrLoginDay[Number(i.ID)].img.scale=.9;break;case r.props.giftBag:t.arrLoginDay[Number(i.ID)].img1.getComponent(cc.Sprite).spriteFrame=t.goldImg,t.arrLoginDay[Number(i.ID)].desc1.getComponent(cc.Label).string="+1000",t.arrLoginDay[Number(i.ID)].img1.x=0,t.arrLoginDay[Number(i.ID)].desc1.x=0,t.arrLoginDay[Number(i.ID)].img2.active=!1,t.arrLoginDay[Number(i.ID)].desc2.active=!1;break;default:cc.error("\u5956\u54c1\u7c7b\u578b\u9519\u8bef")}t.arrLoginDay[Number(i.ID)].getBtn.on("click",function(){cc.gameSpace.audioManager.playSound(r.AUDIO_SOUND.CLICK),i.ID>this.todayIndex||0===i.ID&&0!=this.todayIndex?s.dispatchEvent("showPanel","tipsPanel","Cant get it yet!"):(this.getAward(i),l.markDailyLoginGet(i.ID),this.arrLoginDay[Number(i.ID)].getBtn.active=!1,this.arrLoginDay[Number(i.ID)].getAgainBtn.active=!1,this.arrLoginDay[Number(i.ID)].gotBtn.active=!0,this.arrLoginDay[Number(i.ID)].bg.light.active=!1,0==l.dailyLoginCanGetCount&&this.hideThisPanel())}.bind(t)),t.arrLoginDay[Number(i.ID)].getAgainBtn.on("click",function(){cc.gameSpace.audioManager.playSound(r.AUDIO_SOUND.CLICK),this.getAward(i),l.markDailyLoginGet(i.ID),this.arrLoginDay[Number(i.ID)].getBtn.active=!1,this.arrLoginDay[Number(i.ID)].getAgainBtn.active=!1,this.arrLoginDay[Number(i.ID)].gotBtn.active=!0,0==l.dailyLoginCanGetCount&&this.hideThisPanel()}.bind(t)),t.arrLoginDay[Number(i.ID)].gotBtn.on("click",function(){cc.gameSpace.audioManager.playSound(r.AUDIO_SOUND.CLICK),s.dispatchEvent("showPanel","tipsPanel","Already got it!")}.bind(t))},a=i(this.dailyLoginArr);!(e=a()).done;)n()},getAward:function(e){switch(l.dailyLoginCanGetCount--,e.type){case r.props.gold:s.dispatchEvent("showPanel","getAwardPanel",{from:r.getAwardFrom.dailyLogin,type:r.props.gold,num:e.num,title:"Congratulations",desc:e.show});break;case r.props.skin:l.gameData.skinData["s"+e.prizeId]==r.getSkinNum?(l.gameData.gold+=e.exchangeGold,s.dispatchEvent("showPanel","tipsPanel","You have already acquired this skin, which is automatically converted to "+e.exchangeGold+" Golds")):(s.dispatchEvent("showPanel","getSkinPanel",this.skinArr[e.prizeId-1]),l.gameData.skinData["s"+e.prizeId]=r.getSkinNum,l.isRefreshSkinData=!0);break;case r.props.sprint:this.nextSprintData=c.queryByID("growUpLevel",l.gameData.sprintLevel+1),this.nextSprintData?(l.gameData.sprintLevel++,s.dispatchEvent("showPanel","tipsPanel","Update Successed")):(l.gameData.gold+=e.exchangeGold,s.dispatchEvent("showPanel","tipsPanel","You are already super god, automatically converted to "+e.exchangeGold+" Golds"));break;case r.props.giftBag:s.dispatchEvent("showPanel","getAwardPanel",{from:r.getAwardFrom.dailyLogin,type:r.props.giftBag,num:1e3,title:"Congratulations",desc:"Golds\uff1a1000"});break;default:cc.error("\u5956\u54c1\u7c7b\u578b\u9519\u8bef")}},updateGetState:function(){this.dailyLoginArr=c.getTableArr("dailyLogin");for(var e,t=i(this.dailyLoginArr);!(e=t()).done;){var n=e.value;l.gameData.dailyLoginGet["day"+n.ID]?(this.arrLoginDay[Number(n.ID)].getBtn.active=!1,this.arrLoginDay[Number(n.ID)].gotBtn.active=!0,this.arrLoginDay[Number(n.ID)].getAgainBtn.active=!1,this.arrLoginDay[Number(n.ID)].bg.light.active=!1):n.ID===this.todayIndex?(l.dailyLoginCanGetCount++,l.todayCanGet=!0,this.arrLoginDay[Number(n.ID)].getBtn.active=!1,this.arrLoginDay[Number(n.ID)].gotBtn.active=!1,this.arrLoginDay[Number(n.ID)].getAgainBtn.active=!1,this.arrLoginDay[Number(n.ID)].bg.light.active=!0,this.arrLoginDay[Number(n.ID)].bg.light.getComponent(cc.Animation).play(),this.widget.closeBtn.active=!1,this.widget.getBtn.active=!0):n.ID<this.todayIndex&&0!=this.todayIndex&&0!=n.ID||n.ID>this.todayIndex&&0===this.todayIndex?(this.arrLoginDay[Number(n.ID)].getBtn.active=!1,this.arrLoginDay[Number(n.ID)].gotBtn.active=!1,this.arrLoginDay[Number(n.ID)].getAgainBtn.active=!0):(this.arrLoginDay[Number(n.ID)].getBtn.active=!1,this.arrLoginDay[Number(n.ID)].gotBtn.active=!1,this.arrLoginDay[Number(n.ID)].getAgainBtn.active=!1)}},onBtnCloseClick:function(){cc.gameSpace.audioManager.playSound(r.AUDIO_SOUND.CLICK),this.hideThisPanel()},onBtnDoubleCheck:function(){cc.gameSpace.audioManager.playSound(r.AUDIO_SOUND.CLICK),this.checkNode.active=!this.checkNode.active,this.videoNode.active=!this.videoNode.active},onBtnGetClick:function(){console.log("onBtnGetClick"),cc.gameSpace.audioManager.playSound(r.AUDIO_SOUND.CLICK);var e=this;this.checkNode.active?h.showRewardVideo(function(){cc.game.resume(),e.getTodayAward(!0)},function(){cc.game.resume(),s.dispatchEvent("showPanel","tipsPanel","Ads load failed, please try again later.")},"dailyLogin"):this.getTodayAward(!1)},watchVideoCallBack:function(e){console.log("...watchVideoCallBack...rewardType:",e),"dailyLogin"==e&&(cc.game.resume(),this.getTodayAward(!0))},getTodayAward:function(e){if(this.isValid){this.checkNode.active&&(e=!0),console.log("getTodayAward doubleGet:",e);var t=this.dailyLoginArr[this.todayIndex];t.type!=r.props.gold?this.getAward(t):(this.num=t.num,e&&(this.num*=2),s.dispatchEvent("showPanel","tipsPanel","Receive "+this.num+" Golds"),l.todayCanGet=!1,l.gameData.gold+=this.num,l.dailyLoginCanGetCount--),l.markDailyLoginGet(this.todayIndex),this.arrLoginDay[Number(this.todayIndex)].getBtn.active=!1,this.arrLoginDay[Number(this.todayIndex)].getAgainBtn.active=!1,this.arrLoginDay[Number(this.todayIndex)].gotBtn.active=!0,this.arrLoginDay[Number(this.todayIndex)].bg.light.active=!1,this.widget.getBtn.active=!1,this.widget.closeBtn.active=!0,0==l.dailyLoginCanGetCount&&this.hideThisPanel()}},hideThisPanel:function(){this.skinCb&&this.skinCb(),s.dispatchEvent("updateUserDataDisplay"),s.dispatchEvent("hidePanel","dailyLoginPanel")},registerEvent:function(){},show:function(e,t,i){var n=this;this._super(),t&&t(),this.skinCb=i,e&&e.showProperty&&(this.showProperty=e.showProperty),this.widget.getBtn.active=!1,l.dailyLoginCanGetCount=0,this.updateGetState(),setTimeout(function(){n.initDailyLogin()},0)}});kf.addModule("dailyLoginPanel.dailyLoginPanelUIEvent",function(){return d}),cc._RF.pop()},{constants:"constants",localConfig:"localConfig",playerData:"playerData",utils:"utils"}],enemyTrack:[function(e,t){"use strict";cc._RF.push(t,"63177du7wNMJ7ZmBNr0WI3X","enemyTrack"),cc.Class({extends:cc.Component,properties:{arrowNode:cc.Node,bgNode:cc.Node,updateTime:.03,timeDiff:0},setHostPlayer:function(e){this.hostPlayer=e,this.bgNode.color=this.hostPlayer.uiColor,this.arrowNode.color=this.hostPlayer.uiColor,this.playerCamera=cc.Camera.findCamera(this.hostPlayer.node)},calcAngleDegrees:function(e,t){return 180*Math.atan2(t,e)/Math.PI},lateUpdate:function(e){if(this.timeDiff+=e,!(this.timeDiff<this.updateTime))if(this.timeDiff=0,this.hostPlayer&&this.hostPlayer.node.active){this.hostPlayer.getFansAmount();var t=this.hostPlayer.node.convertToWorldSpaceAR(cc.v2(0,0)),i=this.node.parent.convertToNodeSpaceAR(t),n=.5*cc.Canvas.instance.node.width,a=.5*cc.Canvas.instance.node.height,s=cc.v2(-n,-a),o=cc.v2(-n,a),r=cc.v2(n,-a),c=cc.v2(n,a),l=this.segmentsIntr(s,o,cc.v2(0,0),i);if(l||(l=this.segmentsIntr(r,c,cc.v2(0,0),i)),l||(l=this.segmentsIntr(o,c,cc.v2(0,0),i)),l||(l=this.segmentsIntr(s,r,cc.v2(0,0),i)),l){this.node.position=l;var h=this.calcAngleDegrees(i.x,i.y);this.node.angle=-h,this.node.opacity=255}else{var d=this.hostPlayer.node.convertToWorldSpaceAR(cc.v2(0,0)),u=cc.v2(0,0);this.playerCamera.getWorldToScreenPoint(d,u),u.x>0&&u.x<cc.Canvas.instance.node.width&&u.y>0&&u.y<cc.Canvas.instance.node.height&&(this.node.opacity=0)}}else this.node.opacity=0},segmentsIntr:function(e,t,i,n){var a=(t.y-e.y)*(n.x-i.x)-(e.x-t.x)*(i.y-n.y);if(0==a)return!1;var s=((t.x-e.x)*(n.x-i.x)*(i.y-e.y)+(t.y-e.y)*(n.x-i.x)*e.x-(n.y-i.y)*(t.x-e.x)*i.x)/a,o=-((t.y-e.y)*(n.y-i.y)*(i.x-e.x)+(t.x-e.x)*(n.y-i.y)*e.y-(n.x-i.x)*(t.y-e.y)*i.y)/a;return(s-e.x)*(s-t.x)<=0&&(o-e.y)*(o-t.y)<=0&&(s-i.x)*(s-n.x)<=0&&(o-i.y)*(o-n.y)<=0&&{x:s,y:o}}}),cc._RF.pop()},{}],eventListener:[function(e,t){"use strict";cc._RF.push(t,"bb0f5HsPcFGGrzfC20VbjQa","eventListener"),kf.addModule("basic.eventListener",function(){var e={on:function(e,t){this[e]&&console.error(e+"had already register"),this[e]=t},dispatch:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var n=t[0],a=this[n],s=[],o=1;o<t.length;o++)s.push(t[o]);if(a)try{a.apply(this,s)}catch(r){console.error(r)}else cc.log("not register "+n+"    callback func")}},t={on:function(e,t){var i=this.handlers[e];i||(i=[],this.handlers[e]=i);for(var n=0;n<i.length;n++)if(!i[n])return i[n]=t,n;return i.push(t),i.length},dispatch:function(e){var t,i=this.handlers[e];if(i){for(var n=i.length,a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];for(t=0;t<n;t++){var r=i[t];if(r)try{r.apply(void 0,s)}catch(c){console.error(c)}}}},off:function(e,t){var i=this.handlers[e];if(i)for(var n=0;n<i.length;n++)if(i[n]===t){i.splice(n,1);break}}};return{create:function(i){var n={};return"multi"===i?(n=Object.create(t)).handlers={}:n=Object.create(e),n}}}),cc._RF.pop()},{}],fan:[function(e,t){"use strict";cc._RF.push(t,"3152bceyCFOj4kdXEVnRHJe","fan");var i=kf.require("basic.clientEvent"),n=e("playerData"),a=e("constants");window.KnifeState=cc.Enum({Normal:-1,Capture:-1,CaptureFinish:-1,Attack:-1,Defence:-1,Release:-1,Init:-1}),window.ThrowType=cc.Enum({SelfRelease:-1,Collision:-1,Dead:-1}),cc.Class({extends:cc.Component,properties:{changeSpeed:500,adjustMoreSpeed:200,adjustLessSpeed:400,captureSpeed:600,releaseSpeed:1500,releaseRotation:1e3,rollRotation:0},onLoad:function(){this.changeTime=.2,this.knifeCountComp={maxCount:20,index:1},this.knifeState=KnifeState.Normal,this.isDefence=!0,this.isRelease=!1,this.isReleased=!0,this.node.on("dance",this.dance,this),i.on("startChangeToDefence",this.startChangeToDefence.bind(this),this),i.on("startChangeToAttack",this.startChangeToAttack.bind(this),this)},dance:function(e){if(!this.startDance){var t;this.startDance=!0;for(var i,n=40,a=[],s=5;0<s;s--)i=s/15*e/4,n-=2,i=cc.sequence(cc.rotateBy(i,n),cc.rotateBy(i,-n),cc.rotateBy(i,-n),cc.rotateBy(i,n)),a.push(i);e=(t=cc).sequence.apply(t,a),this.node.runAction(e)}},getFinalPosition:function(){if(this.hostPlayer){this.acceleration=0;var e=this.hostPlayer.getFansAmount(),t=this.hostPlayer.fans.indexOf(this),i=this.getRadiusByKnifeCount(e);return i=this.isDefence?i-90:i,this.rollRotation=360/e*t,e=Math.sin(this.rollRotation*Math.PI/180)*i,t=Math.cos(this.rollRotation*Math.PI/180)*i,cc.v2(t,e)}},startChangeToAttack:function(e){if(this.hostPlayer&&this.hostPlayer===e&&this.isDefence){var t=this;if(t.isDefence=!1,this.finalPosition=this.getFinalPosition(),cc.gameSpace.gameLogic.isInScreenExternal(e.node))this.rotateKnifeNoAnim();else{var i=20*(this.knifeCountComp.index>20?20:this.knifeCountComp.index);setTimeout(function(){t.rotateKnife()},i)}}},startChangeToDefence:function(e){if(this.hostPlayer&&this.hostPlayer===e&&!this.isDefence)if(this.isDefence=!0,this.finalPosition=this.getFinalPosition(),cc.gameSpace.gameLogic.isInScreenExternal(e.node))this.rotateKnifeNoAnim();else{var t=20*(this.knifeCountComp.index>20?20:this.knifeCountComp.index);setTimeout(function(){this.rotateKnife()}.bind(this),t)}},rotateKnifeNoAnim:function(){if(this.node){var e=this.isDefence?90-this.rollRotation:540-this.rollRotation;this.node.angle=e}},rotateKnife:function(){var e=this;if(this.node){var t=this.isDefence?90-this.rollRotation:540-this.rollRotation;if(this.lastRotation!==t){this.isRotating=!0,this.lastRotation=t;var i=this.node.convertToWorldSpaceAR(cc.v2(0,0)),n=PlayerManager.player.node.convertToWorldSpaceAR(cc.v2(0,0));if(this.circleIntersect(1600,i,n)){var a=cc.rotateTo(this.changeTime,t),s=cc.callFunc(function(){e.isRotating=!1});this.node.stopAllActions(),this.node.runAction(cc.sequence(a,s))}else this.node.angle=t,e.isRotating=!1}else(this.isRotating||this.node.angle!==t)&&(this.node.angle=t)}},getThrowPosition:function(){return this.releasePosition},updateLogic:function(){switch(this.knifeState){case KnifeState.Init:if(!this.hostPlayer)return;this.finalPosition=this.getFinalPosition(),this.node.position=this.finalPosition,this.knifeState=KnifeState.Normal;break;case KnifeState.Capture:this.isCapture=!0,this.finalPosition=this.getFinalPosition();break;case KnifeState.Attack:this.startDance=!1;break;case KnifeState.Release:this.isRelease=!0,this.startDance=!1,this.finalPosition=this.getThrowPosition();break;case KnifeState.Normal:this.finalPosition=this.getFinalPosition()}},setScale:function(){var e=.05*this.knifeCountComp.index+.8;e=1.4<e?1.4:e,this.node.scale=e},circleIntersect:function(e,t,i){var n=t.x,a=i.x,s=t.y,o=i.y;return!(e*e<(n-a)*(n-a)+(s-o)*(s-o))},update:function(e){if(this.updateLogic(),PlayerManager.player){var t=this.node.convertToWorldSpaceAR(cc.v2(0,0)),i=PlayerManager.player.node.convertToWorldSpaceAR(cc.v2(0,0));this.circleIntersect(1600,t,i)?this.node.getComponent(cc.Sprite).enabled=!0:this.node.getComponent(cc.Sprite).enabled=!1}if(this.hostPlayer){var n=this;if(this.finalPosition&&(this.finalPosition.x!==this.node.position.x||this.finalPosition.y!==this.node.position.y)){var a=this.finalPosition.sub(this.node.position),s=a.mag();this.moveDistance=this.changeSpeed*e,this.isAdjust&&(this.isMore?this.moveDistance=this.adjustMoreSpeed*e:this.moveDistance=this.adjustLessSpeed*e),this.isCapture&&(this.moveDistance=this.captureSpeed*e),this.isRelease&&(this.moveDistance=this.releaseSpeed*e,this.node.angle+=this.releaseRotation*e),this.acceleration+=150*e,this.moveDistance+=this.acceleration,this.moveDistance<s?this.node.position=this.node.position.add(a.mul(this.moveDistance/s)):(this.node.position=this.finalPosition,this.isAdjust&&(this.isAdjust=!1),this.isCapture&&(this.isCapture=!1),this.isRelease&&(e=cc.rotateBy(.5,.5*this.releaseRotation),a=cc.callFunc(function(){n.isRelease=!1}),this.node.runAction(cc.sequence(e,a))))}var o=this.node.width/2,r=this.checkOutBound(o);r&&(this.node.position=r)}else{var c=ObstaclesManager.detectIfInObstacleByNode(this.node);c&&(this.node.position=c);var l=this.node.width/2;(c=this.checkOutBound(l))&&(this.node.position=c)}},checkOutBound:function(e){var t=this.node.convertToWorldSpaceAR(cc.v2(0,0)),i=PlayerManager.playerParent.convertToNodeSpaceAR(t);return i.x<-.5*n.BoundSize.x+e?(i.x=-.5*n.BoundSize.x+e,t=PlayerManager.playerParent.convertToWorldSpaceAR(i),i=this.node.parent.convertToNodeSpaceAR(t)):i.x>.5*n.BoundSize.x-e?(i.x=.5*n.BoundSize.x-e,t=PlayerManager.playerParent.convertToWorldSpaceAR(i),i=this.node.parent.convertToNodeSpaceAR(t)):i.y<-.5*n.BoundSize.y+e?(i.y=-.5*n.BoundSize.y+e,t=PlayerManager.playerParent.convertToWorldSpaceAR(i),i=this.node.parent.convertToNodeSpaceAR(t)):i.y>.5*n.BoundSize.y-e&&(i.y=.5*n.BoundSize.y-e,t=PlayerManager.playerParent.convertToWorldSpaceAR(i),i=this.node.parent.convertToNodeSpaceAR(t))},getRadiusByKnifeCount:function(e){return 120+120*this.getRadioByCount(e)},getRadioByCount:function(e){return(8>e?0:20<e?12:e-8)/12+1},onCollisionEnter:function(e,t){if(n.gameState===a.GAME_STATE.PLAY)switch(e.node.group){case"knife":if(this.hostPlayer){var i=e.node.getComponent("fan");if(i)if(i.hostPlayer){if(i.hostPlayer.node.active&&this.hostPlayer&&this.hostPlayer.node.active&&i.hostPlayer!==this.hostPlayer&&!this.isDefence){!this.hostPlayer.isAI&&window.wx&&n.vibrateOn&&wx.vibrateShort(),this.node.parent.getComponent("PlayerRotate").stopRotate(),this.throwKnife(ThrowType.Collision,e,t),this.hostPlayer.removeFan(this);var s=t.node.convertToWorldSpaceAR(cc.v2(0,0));FansManager.playSpark(s)}}else{if(!i.isReleased)return;this.hostPlayer.addFan(i),this.hostPlayer===PlayerManager.player&&cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.GRAB),FansManager.addFansTip(i,this.hostPlayer)}}break;case"block":if(this.hostPlayer){!this.hostPlayer.isAI&&window.wx&&n.vibrateOn&&wx.vibrateShort(),this.node.parent.getComponent("PlayerRotate").stopRotate(),this.throwKnife(ThrowType.Collision,e,t),this.hostPlayer.removeFan(this);var o=t.node.convertToWorldSpaceAR(cc.v2(0,0));FansManager.playSpark(o)}break;case"player":var r=e.node.getComponent("Player");r&&(this.hostPlayer?this.hostPlayer!==r&&r.beKilled(this.hostPlayer):this.isReleased&&(r.addFan(this),this.hostPlayer===PlayerManager.player&&cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.GRAB),FansManager.addFansTip(this,this)))}},onCollisionStay:function(e){if(n.gameState===a.GAME_STATE.PLAY)switch(e.node.group){case"player":var t=e.node.getComponent("Player");t&&(this.hostPlayer?this.hostPlayer!==t&&t.beKilled(this.hostPlayer):this.isReleased&&(t.addFan(this),this.hostPlayer===PlayerManager.player&&cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.GRAB),FansManager.addFansTip(this,this)))}},onCollisionEnterByCircle:function(){if(this.hostPlayer){this.hostPlayer.isAI||(cc.log("\u78b0\u649e"),window.wx&&window.wx.vibrateShort&&window.wx.vibrateShort()),this.node.parent.getComponent("PlayerRotate").stopRotate(),this.throwKnife(ThrowType.Collision),this.hostPlayer.removeFan(this);var e=this.node.convertToWorldSpaceAR(cc.v2(0,0));FansManager.playSpark(e)}},throwKnife:function(e){var t=cc.v2(0,0),i=this.node.position,n=new cc.v2(i.x,i.y),s=0;switch(e){case ThrowType.Collision:s=-Math.PI/3,n.rotate(s,t),PlayerManager.player===this.hostPlayer&&cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CRASH_SWORD);break;case ThrowType.SelfRelease:s=-Math.PI/3,n.rotate(s,t),PlayerManager.player===this.hostPlayer&&cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.LOSE_SWORD);break;case ThrowType.Dead:s=Math.random()*Math.PI,n.rotate(s,t)}var o=Math.random()+2,r=t.mul(o);t=t.add(r);var c=this.node.parent.convertToWorldSpaceAR(t),l=FansManager.fanParent.convertToNodeSpaceAR(c),h=this.node.convertToWorldSpaceAR(cc.v2(0,0)),d=FansManager.fanParent.convertToNodeSpaceAR(h);this.node.position=d,this.node.scale=1,this.node.parent=FansManager.fanParent;var u=cc.rotateBy(.3,360+180*Math.random()),p=cc.moveTo(.3,l);setTimeout(function(){this&&this.isValid&&(this.isReleased=!0,this.knifeState=KnifeState.Normal)}.bind(this),1e3),this.node.runAction(cc.spawn(u,p))}}),cc._RF.pop()},{constants:"constants",playerData:"playerData"}],formula:[function(e,t){"use strict";cc._RF.push(t,"cb0afurjNlJRqyR3U+HLtBh","formula"),"undefined"!=typeof cc?e("constants"):e("./constants");var i={isHit:function(e){return Math.floor(100*Math.random())<100*e},isHitWithPercent:function(e){return this.isHit(e/100)},getRequirementByLevel:function(e){switch(e){case 1:return 0;case 2:return 5e3;case 3:return 1e5;case 4:return 5e6}return 0},getChipsAmountByLevel:function(e){switch(e){case 1:return[10,20,50,100];case 2:return[500,1e3,2500,5e3];case 3:return[1e4,2e4,5e4,1e5];case 4:return[5e5,1e6,25e5,5e6]}return[10,20,50,100]},getChipAmount:function(e,t){return this.getChipsAmountByLevel(e)[t]}};t.exports=i,cc._RF.pop()},{"./constants":"constants",constants:"constants"}],gameLogic:[function(e,t){"use strict";cc._RF.push(t,"3d847sU4kRPH6db0DiKw3oI","gameLogic");var i=e("playerData"),n=e("localConfig"),a=e("constants"),s=kf.require("basic.clientEvent"),o=e("configuration"),r=new(cc.Class({properties:{},onLoad:function(){this.dictSharedPanel={},this.dictLoading={},this.arrPopupDialog=[],this.randomPlayerIdle=null},rewardByVideoAds:function(e){return e===a.SHARE_FUNCTION.WHEEL_TICKET||a.SHARE_FUNCTION.SKIN_TRY||a.SHARE_FUNCTION.DAILY_LOGIN_TODAY_GET||e===a.SHARE_FUNCTION.SUPER_START||e===a.SHARE_FUNCTION.REVIVE},customEventStatistics:function(e,t){e=e.toString(),cc.log("##### eventType:"+e+" , objParams:",t),t||(t={}),t.uid=i.userId,t.isNewBee=i.isNewBee,window.cocosAnalytics&&cocosAnalytics.CACustomEvent.onStarted(e,t)},isInScreenExternal:function(e){if(!PlayerManager.player)return!1;var t=cc.Canvas.instance.node.width+1e3,i=cc.Canvas.instance.node.height+1500,n=PlayerManager.player.node.parent.convertToWorldSpaceAR(cc.v2(0,0)),a=e.parent.convertToWorldSpaceAR(cc.v2(0,0));return a.x<n.x-t||a.x>n.x+t||a.y<n.x-i||a.y>n.x+i},saveScore:function(){var e=PlayerManager.player.fans.length;i.fightInfo.currScore=e,i.fightInfo.killCnt=PlayerManager.player.killCnt;var t=PlayerManager.players.indexOf(PlayerManager.player);i.fightInfo.rank=t+1;var n=o.getConfigData("userData");if(n)e>n.score&&(n.score=e,n.name=PlayerManager.player.playerName,o.setConfigData("userData",n));else{var a={name:PlayerManager.player.playerName,score:e};o.setConfigData("userData",a)}},loadUserSkin:function(){var e=this;if(!this.randomPlayerIdle){var t=n.queryByID("skin",i.skinId);t&&cc.loader.loadRes("subPackage/skinsPrefabs/"+t.prefabName,cc.Prefab,function(t,i){if(!t){var n=cc.instantiate(i).getComponent("skinInfo");e.randomPlayerIdle=n.Idle}})}},updateTaskData:function(e,t){var n=i.updateTaskData(e,t);n&&"mainScene"===cc.director.getScene().name&&s.dispatchEvent("showPanel","getSkinPanel",n)},offLineReward:function(){var e=i.getCurrentTime(),t=i.gameData.dageOfflineTime;if(t){if(t>e)s.dispatchEvent("showPanel","tipsPanel","Abnormal offline time");else if(t<e){var o=i.gameData.offlineLevel||1,r=n.queryByID("growUpLevel",o).offLineCoin,c=e-t;c>432e5&&(c=432e5);var l=Math.floor(c/1e3/60*r);i.updateOfflineTime(e),setTimeout(function(){(e-t)/1e3/60>5&&s.dispatchEvent("showPanel","getAwardPanel",{from:a.getAwardFrom.dailyWelfare,type:a.props.gold,num:l,title:"Offline revenue",desc:"Offline revenue\uff1a"+l+" Golds",isOffline:!0})},1e3)}}else i.updateOfflineTime(e)}}));r.onLoad(),t.exports=r,cc._RF.pop()},{configuration:"configuration",constants:"constants",localConfig:"localConfig",playerData:"playerData"}],gameOverPanelLogic:[function(e,t){"use strict";cc._RF.push(t,"2e897672cNHVK/lUU19cmSU","gameOverPanelLogic"),kf.addModule("gameOverPanel.gameOverPanelLogic",function(){return{init:function(){this.registerNetMsg()},registerNetMsg:function(){}}}),cc._RF.pop()},{}],gameOverPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"71c0f9MlH9DYobA2GE2ncrn","gameOverPanelUIEvent");var i=kf.require("basic.clientEvent"),n=kf.require("component.panel"),a=e("constants"),s=e("localConfig"),o=e("playerData"),r=e("gameLogic"),c=e("utils");window.GameJava=null;var l=cc.Class({extends:n,properties:{item:cc.Prefab,nodeToggle:cc.Node,nodeToggleTxt:cc.Node,nodeCheck:cc.Node,winnerNode:cc.Node},onLoad:function(){this.widget||(this._super(),this.registerWidgetEvent(),this.registerEvent(),this.durT=0,this.direction=1,this.showMoreMaxCd=3,this.showMoreCurCd=this.showMoreMaxCd,this.skinArr=s.getTableArr("skin"),this.widget.score.getComponent(cc.Label).string=o.fightInfo.currScore,this.widget.currentRank.getComponent(cc.Label).string="Rank: "+o.fightInfo.rank,this.widget.killCount.getComponent(cc.Label).string="Kill: "+o.fightInfo.killCnt)},onEnable:function(){GameJava=this},registerWidgetEvent:function(){this.widget.bg.on("click",function(){}.bind(this)),this.widget.homeBtn.clickArea.on("click",function(){cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),c.showIntertitialAD(function(){cc.game.resume(),o.inGameOver=!1,i.dispatchEvent("hidePanel","gameOverPanel"),i.dispatchEvent("showPanel","mainPanel",{fromGameOver:!0})})}.bind(this)),this.widget.shareBtn.on("click",function(){var e=this;cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),c.showRewardVideo(function(){cc.game.resume(),e.superStart&&(o.superStart=10),i.dispatchEvent("showPanel","matchingPanel"),i.dispatchEvent("hidePanel","gameOverPanel")},function(){cc.game.resume(),i.dispatchEvent("showPanel","tipsPanel","Ads load failed, please try again later.")},"gameOver")}.bind(this)),this.widget.toggle.on("toggle",function(){this.nodeCheck.active?this.superStart=!0:this.superStart=!1}.bind(this))},watchVideoCallBack:function(e){console.log("...watchVideoCallBack...rewardType:",e),"gameOver"==e&&(cc.game.resume(),this.superStart&&(o.superStart=10),i.dispatchEvent("showPanel","matchingPanel"),i.dispatchEvent("hidePanel","gameOverPanel"))},registerEvent:function(){this.registerClientEvent("updateUserDataDisplay",function(){})},gameOver:function(){var e=[200,150,100,50,20,20,20,20],t=30;o.fightInfo.rank<=e.length&&(t=e[o.fightInfo.rank-1]),o.gameData.gold+=t,i.dispatchEvent("showPanel","tipsPanel","Get "+t+" Golds"),o.superStart=1,o.gameData.totalScore=(o.gameData.totalScore||0)+o.fightInfo.currScore,o.fightInfo.currScore>o.gameData.weekBestScore&&(o.gameData.weekBestScore=o.fightInfo.currScore,o.fightInfo.currScore>o.gameData.bestScore&&(o.gameData.bestScore=o.fightInfo.currScore))},show:function(){var e=this;this.widget||this.onLoad(),this._super(),this.superStart=!0,this.nodeCheck.active=!0,o.underReview&&(cc.loader.loadRes("/singleColor",cc.SpriteFrame,function(t,i){e.widget.bg.getComponent(cc.Sprite).spriteFrame=i}),this.widget.bg.color=cc.color("#00D8FF"),this.superStart=!1,this.widget.toggle.active=!1,this.widget.toggleLabel.active=!1),this.randomIndex=0,this.widget.homeBtn.clickArea.height=o.clickAreaHeight2,o.inGame=!1,o.inGameOver=!0,this.widget.score.getComponent(cc.Label).string=o.fightInfo.currScore;var t=o.fightInfo.rank;o.killLastAi?(t=1,this.winnerNode.active=!0):this.winnerNode.active=!1,this.widget.currentRank.getComponent(cc.Label).string="Rank\uff1a"+t,this.widget.killCount.getComponent(cc.Label).string="Kill\uff1a"+o.fightInfo.killCnt,this.gameOver(),r.updateTaskData(a.taskId.game),r.updateTaskData(a.taskId.oneGameFans,o.fightInfo.currScore),r.updateTaskData(a.taskId.oneGamePlayer,o.fightInfo.killCnt),1==o.fightInfo.rank?r.updateTaskData(a.taskId.continuousNo1):r.updateTaskData(a.taskId.continuousNo1,0),i.dispatchEvent("updateUserDataDisplay")},getCurrentDay:function(){var e;return e=0===(new Date).getDay()?7:(new Date).getDay(),parseInt((new Date).getTime()/864e5)-e+1},onBtnCheck:function(){this.nodeCheck.active=!this.nodeCheck.active}});kf.addModule("gameOverPanel.gameOverPanelUIEvent",function(){return l}),cc._RF.pop()},{constants:"constants",gameLogic:"gameLogic",localConfig:"localConfig",playerData:"playerData",utils:"utils"}],getAwardPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"dce80EDleNCv4e+1gd/Lyq/","getAwardPanelUIEvent");var i=kf.require("basic.clientEvent"),n=kf.require("component.panel"),a=e("constants"),s=e("playerData"),o=e("gameLogic"),r=e("utils");window.GameJava=null;var c=cc.Class({extends:n,properties:{goldImg:cc.SpriteFrame,skinImg:cc.SpriteFrame,giftBagImg:cc.SpriteFrame,nodeGift:cc.Node,nodeLight:cc.Node,nodeItem:cc.Node},onLoad:function(){this._super(),this.registerWidgetEvent(),this.registerEvent(),this.getBtnOriY=this.widget.getBtn.y,this.crazySpotTimes=5,this.crazySpotClickTimes=0,this.crazyProgressBar=this.widget.crazyNode.crazyProgress.getComponent(cc.ProgressBar)},onDisable:function(){},onEnable:function(){GameJava=this},onBtnGetClick:function(){console.log("onBtnGetClick");var e=this;r.showRewardVideo(function(){console.log("success-----"),cc.game.resume(),e.getAward(),e.nodeItem.active=!0,e.nodeLight.active=!0,e.from!==a.getAwardFrom.secretGift&&(e.from!==a.getAwardFrom.dailyWelfare||s.underReview||o.offLineReward(),i.dispatchEvent("hidePanel","getAwardPanel"))},function(){cc.game.resume(),i.dispatchEvent("hidePanel","getAwardPanel"),i.dispatchEvent("showPanel","tipsPanel","Ads load failed, please try again later.")},"award")},watchVideoCallBack:function(e){console.log("...watchVideoCallBack...rewardType:",e),"award"==e&&(cc.game.resume(),this.getAward(),this.nodeItem.active=!0,this.nodeLight.active=!0,this.from!==a.getAwardFrom.secretGift&&(this.from!==a.getAwardFrom.dailyWelfare||s.underReview||o.offLineReward(),i.dispatchEvent("hidePanel","getAwardPanel")))},onBtnGiveup:function(){console.log("onBtnGiveup"),i.dispatchEvent("hidePanel","getAwardPanel")},showClickGift:function(){var e=this;if(!this.isPlayingGiftOpen){this.isPlayingGiftOpen=!0;var t=this.nodeGift.getComponent(cc.Animation);t.play("giftClick"),t.once("finished",function(){e.isPlayingGiftOpen=!1,t.play("giftIdle")})}},registerWidgetEvent:function(){this.widget.closeBtn.on("click",function(){this.closeBtnTimer&&(clearTimeout(this.closeBtnTimer),this.closeBtnTimer=null),this.crazySpotClickTimes=0,this.widget.crazyNode.active=!1,this.crazyProgressInterVal&&(clearInterval(this.crazyProgressInterVal),this.crazyProgressInterVal=null),this.widget.getBtn.y=this.getBtnOriY,this.widget.getBtn.active=!0,this.widget.desc.active=!0,this.nodeItem.active=!0,this.nodeLight.active=!0,i.dispatchEvent("hidePanel","getAwardPanel"),i.dispatchEvent("showPanel","gameOverPanel")}.bind(this))},setCloseBtnTimer:function(){this.closeBtnTimer&&(clearTimeout(this.closeBtnTimer),this.closeBtnTimer=null),this.closeBtnTimer=setTimeout(function(){this.isValid&&(this.widget.closeBtn.active=!0,clearTimeout(this.closeBtnTimer),this.closeBtnTimer=null)}.bind(this),5e3)},registerEvent:function(){},getAward:function(){switch(this.type){case a.props.gold:i.dispatchEvent("showPanel","tipsPanel","Get "+this.num+" Golds"),s.gameData.gold+=this.num,this.from===a.getAwardFrom.dailyWelfare&&s.markDailyWelfareGet();break;case a.props.skin:i.dispatchEvent("showPanel","tipsPanel","Get skin shardsX "+this.num);break;case a.props.giftBag:i.dispatchEvent("showPanel","tipsPanel","Get "+this.num+" Golds"),s.gameData.gold+=this.num;break;default:cc.error("\u5956\u54c1\u7c7b\u578b\u9519\u8bef")}if(i.dispatchEvent("updateUserDataDisplay"),this.from!==a.getAwardFrom.dailyLogin)return this.from===a.getAwardFrom.gameOver?(s.gameNum++,void i.dispatchEvent("showPanel","gameOverPanel")):this.from===a.getAwardFrom.secretGift?(i.dispatchEvent("hidePanel","getAwardPanel"),void i.dispatchEvent("showPanel","gameOverPanel")):void 0},initUI:function(e){this.from=e.from,this.type=e.type,this.num=e.num,this.title=e.title;var t=e.desc;switch(this.widget.title.label.getComponent(cc.Label).string=this.title,this.widget.desc.getComponent(cc.Label).string=t,this.type===a.props.gold?this.nodeItem.getComponent(cc.Sprite).spriteFrame=this.goldImg:this.type===a.props.skin?this.nodeItem.getComponent(cc.Sprite).spriteFrame=this.skinImg:this.type===a.props.giftBag&&(this.nodeItem.getComponent(cc.Sprite).spriteFrame=this.goldImg),this.changeBtnPosition=!1,this.from){case a.getAwardFrom.dailyWelfare:s.showDailyWelfareRiskyBtn&&(this.changeBtnPosition=!0),this.shareFun=a.SHARE_FUNCTION.DAILY_WELFARE;break;case a.getAwardFrom.dailyLogin:s.showDailyLoginAwardRiskyBtn&&(this.changeBtnPosition=!0),this.shareFun=a.SHARE_FUNCTION.DAILY_LOGIN;break;case a.getAwardFrom.luckyWheel:s.showLuckyWheelAwardRiskyBtn&&(this.changeBtnPosition=!0),this.shareFun=a.SHARE_FUNCTION.LUCKY_WHEEL;break;case a.getAwardFrom.gameOver:s.showGameOverAwardRiskyBtn&&(this.changeBtnPosition=!0),this.shareFun=a.SHARE_FUNCTION.GAME_OVER;break;case a.getAwardFrom.secretGift:this.changeBtnPosition=!1,this.shareFun=a.SHARE_FUNCTION.SECRET_GIFT;break;default:cc.error("\u7c7b\u578b\u9519\u8bef")}this.showAdTime=0,this.changeBtnPosition?(this.showAdTime=1e3,this.widget.getBtn.y-=200):this.widget.getBtn.active=!0},show:function(e,t){this._super(),t&&t(),this.isPlayingGiftOpen=!1,s.isOffline=e.isOffline,this.crazyProgressInterVal&&(clearInterval(this.crazyProgressInterVal),this.crazyProgressInterVal=null),this.nodeGift.active=!1,this.widget.closeBtn.active=!1,this.initUI(e)},hide:function(){this._super()}});kf.addModule("getAwardPanel.getAwardPanelUIEvent",function(){return c}),cc._RF.pop()},{constants:"constants",gameLogic:"gameLogic",playerData:"playerData",utils:"utils"}],getSkinPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"62d21GErU9MNrY1PRLn/dFg","getSkinPanelUIEvent");var i=kf.require("basic.clientEvent"),n=kf.require("component.panel"),a=e("resourceUtil"),s=cc.Class({extends:n,properties:{spSkin:cc.Sprite},onLoad:function(){this._super(),this.registerWidgetEvent(),this.registerEvent()},registerWidgetEvent:function(){},onBtnSureClick:function(){i.dispatchEvent("hidePanel","getSkinPanel")},registerEvent:function(){},show:function(e){this._super(),this.skinData=e,a.setWeaponIcon("weapon"+this.skinData.ID,this.spSkin,function(){})}});kf.addModule("getSkinPanel.getSkinPanelUIEvent",function(){return s}),cc._RF.pop()},{resourceUtil:"resourceUtil"}],growUpPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"bad307rXcxH4ZTuBgS/4IG1","growUpPanelUIEvent");var i=kf.require("basic.clientEvent"),n=(kf.require("component.panel"),kf.require("component.subPanel")),a=e("constants"),s=e("localConfig"),o=e("playerData"),r=cc.Class({extends:n,properties:{fansCountNode:cc.Node,offlineNode:cc.Node,sprintNode:cc.Node,speedNode:cc.Node,currentBar:cc.Node,speedLevelUpLayout:cc.Node,offLineLevelUpLayout:cc.Node,fansLevelUpLayout:cc.Node,chongciLevelUpLayout:cc.Node},onLoad:function(){this._super(),this.registerWidgetEvent(),this.registerEvent(),this.speedLevelUpIcon=this.speedLevelUpLayout.getChildByName("icon"),this.offLineLevelUpIcon=this.offLineLevelUpLayout.getChildByName("icon"),this.fansLevelUpIcon=this.fansLevelUpLayout.getChildByName("icon"),this.chongciLevelUpIcon=this.chongciLevelUpLayout.getChildByName("icon"),this.speedLevelUpLabel=this.speedLevelUpLayout.getChildByName("Label"),this.offLineLevelUpLabel=this.offLineLevelUpLayout.getChildByName("Label"),this.fansLevelUpLabel=this.fansLevelUpLayout.getChildByName("Label"),this.chongciLevelUpLabel=this.chongciLevelUpLayout.getChildByName("Label"),this.goldText="Upgrade",this.videoText="Level 3 in a row",this.refreshUI(),this.showBar(0)},closePanel:function(){i.dispatchEvent("hidePanel","growUpPanel")},registerWidgetEvent:function(){var e=this;this.widget.selectNode.speedBtn.on("touchend",function(){e.currentBar.x=e.widget.selectNode.speedBtn.x-8,e.showBar(0)}),this.widget.selectNode.fansBtn.on("touchend",function(){e.currentBar.x=e.widget.selectNode.fansBtn.x-8,e.showBar(1)}),this.widget.selectNode.sprintBtn.on("touchend",function(){e.currentBar.x=e.widget.selectNode.sprintBtn.x-8,e.showBar(2)}),this.widget.selectNode.offlineBtn.on("touchend",function(){e.currentBar.x=e.widget.selectNode.offlineBtn.x-8,e.showBar(3)})},showBar:function(e){for(var t=[this.speedNode,this.fansCountNode,this.sprintNode,this.offlineNode],i=0;i<t.length;i++)t[i].active=i===e},registerEvent:function(){},onLevelUp:function(e,t){switch(cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),t){case"offline":o.gameData.gold<this.nextOfflineData.offlineLevelCost?this.playVideoToLevelUp(t):this.nextOfflineData.offlineLevelCost>0&&(i.dispatchEvent("showPanel","tipsPanel","Upgrade Success"),o.gameData.gold-=this.nextOfflineData.offlineLevelCost,o.gameData.offlineLevel+=1,o.offlineUpgradeCount++,i.dispatchEvent("updateUserDataDisplay"),this.refreshUI());break;case"fans":o.gameData.gold<this.nextCountData.fansCoin?this.playVideoToLevelUp(t):this.nextCountData.fansCoin>0&&(i.dispatchEvent("showPanel","tipsPanel","Upgrade Success"),o.gameData.gold-=this.nextCountData.fansCoin,o.gameData.fansCountLevel+=1,o.fansUpgradeCount++,i.dispatchEvent("updateUserDataDisplay"),this.refreshUI());break;case"sprint":o.gameData.gold<this.nextSprintData.sprintCoin?this.playVideoToLevelUp(t):this.nextSprintData.sprintCoin>0&&(i.dispatchEvent("showPanel","tipsPanel","Upgrade Success"),o.gameData.gold-=this.nextSprintData.sprintCoin,o.gameData.sprintLevel+=1,o.sprintUpgradeCount++,i.dispatchEvent("updateUserDataDisplay"),this.refreshUI());break;case"speed":o.gameData.gold<this.nextPlayerData.coin?this.playVideoToLevelUp(t):this.nextPlayerData&&(i.dispatchEvent("showPanel","tipsPanel","Upgrade Success"),o.gameData.gold-=this.nextPlayerData.coin,o.gameData.playerLevel+=1,o.speedUpgradeCount++,i.dispatchEvent("updateUserDataDisplay"),this.refreshUI())}},playVideoToLevelUp:function(e){switch(e){case"offline":console.log("\u79bb\u7ebf\u89c6\u9891\u64ad\u653e"),a.shareId.sprintPropertyTrain;break;case"fans":console.log("\u4eba\u6570\u89c6\u9891\u64ad\u653e"),a.shareId.sprintPropertyTrain;break;case"sprint":console.log("\u51b2\u523a\u89c6\u9891\u64ad\u653e"),a.shareId.sprintPropertyTrain;break;case"speed":console.log("\u901f\u5ea6\u89c6\u9891\u64ad\u653e"),a.shareId.sprintPropertyTrain}switch(i.dispatchEvent("showPanel","tipsPanel","Upgrade Success"),e){case"offline":console.log("\u79bb\u7ebf\u89c6\u9891\u6210\u529f"),o.gameData.offlineLevel+=1,o.offlineUpgradeCount=0,i.dispatchEvent("updateUserDataDisplay"),this.refreshUI();break;case"fans":console.log("\u4eba\u6570\u89c6\u9891\u6210\u529f"),o.gameData.fansCountLevel+=1,o.fansUpgradeCount=0,i.dispatchEvent("updateUserDataDisplay"),this.refreshUI();break;case"sprint":console.log("\u51b2\u523a\u89c6\u9891\u6210\u529f"),o.gameData.sprintLevel+=1,o.sprintUpgradeCount=0,i.dispatchEvent("updateUserDataDisplay"),this.refreshUI();break;case"speed":console.log("\u901f\u5ea6\u89c6\u9891\u6210\u529f"),o.gameData.playerLevel+=1,o.speedUpgradeCount=0,i.dispatchEvent("updateUserDataDisplay"),this.refreshUI()}},refreshUI:function(){o.gameData.offlineLevel||(o.gameData.offlineLevel=1),o.gameData.sprintLevel||(o.gameData.sprintLevel=1),o.gameData.fansCountLevel||(o.gameData.fansCountLevel=1),o.gameData.playerLevel||(o.gameData.playerLevel=1),this.offlineLevel=o.gameData.offlineLevel,this.sprintLevel=o.gameData.sprintLevel,this.fansCountLevel=o.gameData.fansCountLevel,this.playerLevel=o.gameData.playerLevel,this.curOfflineData=s.queryByID("growUpLevel",o.gameData.offlineLevel),this.curSprintData=s.queryByID("growUpLevel",o.gameData.sprintLevel),this.curFansCountData=s.queryByID("growUpLevel",o.gameData.fansCountLevel),this.curPlayerData=s.queryByID("growUpLevel",o.gameData.playerLevel),this.nextOfflineData=s.queryByID("growUpLevel",o.gameData.offlineLevel+1),this.nextSprintData=s.queryByID("growUpLevel",o.gameData.sprintLevel+1),this.nextCountData=s.queryByID("growUpLevel",o.gameData.fansCountLevel+1),this.nextPlayerData=s.queryByID("growUpLevel",o.gameData.playerLevel+1),this.setFansCountData(),this.setOfflineData(),this.setSprintData(),this.setPlayerData(),o.playerLevel=o.gameData.playerLevel,o.sprintLevel=o.gameData.sprintLevel,o.fansCountLevel=o.gameData.fansCountLevel},setPlayerData:function(){var e=this.speedNode.getChildByName("title").getComponent(cc.Label),t=this.speedNode.getChildByName("tips").getComponent(cc.Label),i=this.speedNode.getChildByName("count").getComponent(cc.Label),n=this.speedNode.getChildByName("growUp"),a=this.speedNode.getChildByName("ic_gold");if(this.nextPlayerData){e.string="Next Level\uff1a"+(this.playerLevel+1);var s=this.nextPlayerData.speed/380*100-100;s<1&&(s=1),t.string="increase"+(this.playerLevel+1)+"% of speed",i.string="Cost\uff1a"+this.nextPlayerData.coin,n.active=!0,a.active=!0,this.speedLevelUpIcon.active=!1,this.speedLevelUpLabel.getComponent(cc.Label).string=this.goldText}else e.string="Max",t.string="increase"+(this.playerLevel+1)+"% of speed",i.string="",n.active=!1,a.active=!1},setSprintData:function(){var e=this.sprintNode.getChildByName("title").getComponent(cc.Label),t=this.sprintNode.getChildByName("tips").getComponent(cc.Label),i=this.sprintNode.getChildByName("count").getComponent(cc.Label),n=this.sprintNode.getChildByName("growUp"),a=this.sprintNode.getChildByName("ic_gold");this.nextSprintData&&this.nextSprintData.sprintCoin?(e.string="Next Level\uff1a"+(this.sprintLevel+1),t.string="Available per round"+this.nextSprintData.sprintCount+"times\uff0cevery time"+this.nextSprintData.sprintTime+"s",i.string="Cost\uff1a"+this.nextSprintData.sprintCoin,n.active=!0,a.active=!0,o.gameData.gold<this.nextSprintData.sprintCoin?(this.chongciLevelUpIcon.active=!0,this.chongciLevelUpLabel.getComponent(cc.Label).string=this.videoText):(this.chongciLevelUpIcon.active=!1,this.chongciLevelUpLabel.getComponent(cc.Label).string=this.goldText)):(e.string="Max",t.string="Available per round"+this.curSprintData.sprintCount+"times\uff0cevery time"+this.curSprintData.sprintTime+"s",i.string="",n.active=!1,a.active=!1)},setOfflineData:function(){var e=this.offlineNode.getChildByName("title").getComponent(cc.Label),t=this.offlineNode.getChildByName("tips").getComponent(cc.Label),i=this.offlineNode.getChildByName("count").getComponent(cc.Label),n=this.offlineNode.getChildByName("growUp"),a=this.offlineNode.getChildByName("ic_gold");this.nextOfflineData&&this.nextOfflineData.offlineLevelCost?(e.string="Next Level\uff1a"+(this.offlineLevel+1),t.string="increase"+2*(this.offlineLevel+1)+"% offline revenue",i.string="Cost\uff1a"+this.nextOfflineData.offlineLevelCost,n.active=!0,a.active=!0,this.offLineLevelUpIcon.active=!1,this.offLineLevelUpLabel.getComponent(cc.Label).string=this.goldText):(e.string="Max",t.string="increase"+2*(this.offlineLevel+1)+"% offline revenue",i.string="",n.active=!1,a.active=!1)},setFansCountData:function(){var e=this.fansCountNode.getChildByName("title").getComponent(cc.Label),t=this.fansCountNode.getChildByName("tips").getComponent(cc.Label),i=this.fansCountNode.getChildByName("count").getComponent(cc.Label),n=this.fansCountNode.getChildByName("growUp"),a=this.fansCountNode.getChildByName("ic_gold");this.nextCountData&&this.nextCountData.fansCoin?(e.string="Next Level\uff1a"+(this.fansCountLevel+1),t.string="Opening increase"+(this.fansCountLevel+1)+"knives",i.string="Cost\uff1a"+this.nextCountData.fansCoin,n.active=!0,a.active=!0,this.fansLevelUpIcon.active=!1,this.fansLevelUpLabel.getComponent(cc.Label).string=this.goldText):(e.string="Max",t.string="Opening increase"+(this.fansCountLevel+1)+"knives",i.string="",n.active=!1,a.active=!1)},show:function(){this._super()}});kf.addModule("growUpPanel.growUpPanelUIEvent",function(){return r}),cc._RF.pop()},{constants:"constants",localConfig:"localConfig",playerData:"playerData"}],killTip:[function(e,t){"use strict";cc._RF.push(t,"e95e5Kx6+9GOrTq3vFBL5Ph","killTip");var i=e("resourceUtil");cc.Class({extends:cc.Component,properties:{murder:cc.Label,victim:cc.Label,spTips:cc.Sprite,spMurder:cc.Sprite,spVictim:cc.Sprite},setName:function(e){this.murder.string=e.murder.playerName,i.setPlayerHead("head"+e.murder.playerHead,this.spMurder,function(){}),this.victim.string=e.victim.playerName,i.setPlayerHead("head"+e.victim.playerHead,this.spVictim,function(){});var t=e.murder.continueKillCnt;if(t=(t=t>5?5:t)<1?1:t,i.setKillTips(t,this.spTips,function(){}),!e.murder.isAI){var n=e.murder.continueKillCnt;n=(n=n>9?9:n)<1?1:n,cc.gameSpace.audioManager.playSound("kill"+n)}}}),cc._RF.pop()},{resourceUtil:"resourceUtil"}],loadingPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"865d27ovN1C8KHzpNnb2SlO","loadingPanelUIEvent");var i=kf.require("component.panel"),n=kf.require("basic.clientEvent");cc.Class({extends:i,properties:{},onLoad:function(){this.widget||(this._super(),this.registerWidgetEvent(),this.registerEvent())},registerWidgetEvent:function(){},registerEvent:function(){var e=this;n.on("showMainPanelOver",function(){e.widget.loadingNode.active=!1}),n.on("showLoginBtn",function(){e.widget.loadingNode.loginBtn.active=!0})},show:function(){this.widget||this.onLoad(),this._super(),this.widget.loadingNode.active=!0,this.widget.loadingNode.gameBar.getComponent(cc.ProgressBar).progress=0},setProgress:function(e,t){e>t&&(e=t),this.widget.loadingNode.gameBar.getComponent(cc.ProgressBar).progress=e/t,this.widget.loadingNode.gameBarTxt.getComponent(cc.Label).string=(e/t*100|0)+"%"},setMessage:function(e){this.widget.loadingNode.gameBar.getComponent(cc.ProgressBar).progress=1,this.widget.loadingNode.gameBarTxt.getComponent(cc.Label).string=e}}),cc._RF.pop()},{}],localConfig:[function(e,t){(function(i){"use strict";cc._RF.push(t,"5ac26PUjrVDE6wGe7cHgpvv","localConfig");var n=null,a=null;"undefined"!=typeof cc?(n=e("configManager"),a=e("resourceUtil")):n=e("./configManager");var s={_callback:null,loadConfig:function(e){this._callback=e,this.loadCSV()},loadCSV:function(){this._skills={},this.currentLoad=0;var t=this;if("undefined"!=typeof cc){var s=["goodsProducts","dailyLogin","prize","skin","player","nickName","growUpLevel","camera","level","newbieProtectTplt","benchmarkLevel","AILevel"];this.cntLoad=s.length+1,s.forEach(function(e){a.getData(e,function(i,a){n.addTable(e,a),t.tryToCallbackOnFinished()})}),a.getJsonData("servers",function(e,i){t.servers=i,t.tryToCallbackOnFinished()})}else{var o=e("fs"),r=e("path");n.init();var c=i+"/../datas";c=r.normalize(c);for(var l=[],h=[],d=o.readdirSync(c),u=0;u<d.length;u++){var p=d[u];if(-1!==p.indexOf(".csv")&&-1===p.indexOf(".csv.meta")){var g=p.split(".")[0],f=c+"/"+p;o.lstatSync(f).isDirectory()||(h.push(g),l.push(f))}}for(var m={},v=function(e,t){var i=(new Date).getTime();if(!(m[t]&&i-m[t]<1e3)){m[t]=i;var a=o.readFileSync(t);a.length<=0||n.addTable(e,a.toString(),!0)}},y=function(e,t){o.watch(t,function(i){"change"===i&&setTimeout(function(){v(e,t)},100)})},S=0;S<h.length;S++)v(h[S],l[S]),y(h[S],l[S]);this._skills=[],this._env=[],this._dirtyWords=[];for(var P=["skills.zy8","env.zy8","dirtyWords.zy8"],b=function(e,t){switch(e){case 0:this._skills=t;break;case 1:this._env=t;break;case 2:this._dirtyWords=t}}.bind(this),D=function(e,t){if("change"===e){for(var i=-1,n=0;n<P.length;n++)if(t===P[n]){i=n;break}if(-1!==i){var a=c+"/"+t;setTimeout(function(){var e=o.readFileSync(a);e=JSON.parse(e),b(i,e),console.info("reload config: "+a)}.bind(this,a),100)}}},C=0;C<P.length;C++){var k=c+"/"+P[C];if(o.existsSync(k)){var I=o.readFileSync(k);I=JSON.parse(I),b(C,I),o.watch(k,D)}}this._callback&&this._callback()}},queryOne:function(e,t,i){return n.queryOne(e,t,i)},queryByID:function(e,t){return n.queryByID(e,t)},getTable:function(e){return n.getTable(e)},getTableArr:function(e){return n.getTableArr(e)},queryAll:function(e,t,i){return n.queryAll(e,t,i)},queryIn:function(e,t,i){return n.queryIn(e,t,i)},queryByCondition:function(e,t){return n.queryByCondition(e,t)},tryToCallbackOnFinished:function(){this._callback&&(this.currentLoad++,this.currentLoad>=this.cntLoad&&this._callback())},getEnvModule:function(e){return this._env[e]},getEnv:function(e,t){var i=this.getEnvModule(e);return i?i[t].value:null},getServerList:function(){return this.servers},getCurrentServer:function(){return null===this.servers&&this.getServerList(),this.servers[0]},getVersion:function(){var e=this.getCurrentServer();return e?e.version:"unknown"},getDailyTaskByType:function(e){var t=this.getTable("dailyTask"),i=[];for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];a.taskId=n,a.type===e&&i.push(a)}return i},getBuffByType:function(e){var t=this.getTable("buff");for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];if(n.buffId=i,n.type===e)return n}return null}},o=Object.create(s);"undefined"==typeof cc&&o.loadConfig(),t.exports=o,cc._RF.pop()}).call(this,"/library/imports/5a")},{"./configManager":"configManager",configManager:"configManager",fs:void 0,path:1,resourceUtil:"resourceUtil"}],lodash:[function(e,t){"use strict";cc._RF.push(t,"3afc11H8VFM8bzmS5G8nvs9","lodash"),function(){function e(e,i){Array.isArray(e)?e.forEach(i):t(e).forEach(function(t){var n=t.key,a=t.value;i(a,n,e)})}function t(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push({key:i,value:e[i]});return t}function i(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t}function n(e,t){for(var i,n=e?t.length:0,a=n-1;n--;){var s=t[n];n!==a&&s===i||(i=s,Array.prototype.splice.call(e,s,1))}return e}function a(e){return"number"==typeof e}function s(e){return e?(e=Number(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function o(e,t,i,n){for(var a=-1,s=(0,Math.max)((0,Math.ceil)((t-e)/(i||1)),0),o=Array(s);s--;)o[n?s:++a]=e,e+=i;return o}function r(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}var c=9007199254740991;function l(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function h(e){return null!==e&&l(e.length)}function d(e,t){return e===t||e!=e&&t!=t}function u(e,t){var i=typeof e;return!!(t=null===t?c:t)&&("number"===i||"symbol"!==i&&/^(?:0|[1-9]\d*)$/.test(e))&&e>-1&&e%1==0&&e<t}function p(e,t,i){if(!r(i))return!1;var n=typeof t;return!!("number"===n?h(i)&&u(t,i.length):"string"===n&&t in i)&&d(i[t],e)}var g={find:function(e,t){var n;if(Array.isArray(e)||(e=i(e)),(n=e.filter(t)).length)return n[0]},filter:function(e,t){return Array.isArray(e)||(e=i(e)),e.filter(t)}};g.forEach=e,g.each=e,g.cloneDeep=function e(t){if(null===t||"object"!=typeof t)return t;var i={};for(var n in t.constructor===Array&&(i=[]),t)t.hasOwnProperty(n)&&(i[n]=e(t[n]));return i},g.map=function(e,t){Array.isArray(e)||(e=i(e));var n=[];return e.forEach(function(e,i,a){n.push(t(e,i,a))}),n},g.random=function(e,t){var i=Math.random()*(t-e+1)+e;return Math.floor(i)},g.toArray=i,g.pullAllWith=function(e,t,i){return t.forEach(function(t){e.filter(function(e){return i(e,t)}).forEach(function(t){var i=e.indexOf(t);-1!==e.indexOf(t)&&e.splice(i,1)})}),e},g.isEqual=function e(t,i){var n=t instanceof Object,a=i instanceof Object;if(!n||!a)return t===i;if(Object.keys(t).length!==Object.keys(i).length)return!1;for(var s in t){var o=t[s]instanceof Object,r=i[s]instanceof Object;if(o&&r)return e(t[s],i[s]);if(t[s]!==i[s])return!1}return!0},g.now=function(){return Date.now()},g.pullAll=function(e,t){return t.forEach(function(t){var i=e.indexOf(t);-1!==e.indexOf(t)&&e.splice(i,1)}),e},g.forEachRight=function(e,t){Array.isArray(e)||(e=i(e));for(var n=e.length-1;n>=0&&t(e[n]);n--);},g.startsWith=function(e,t,i){return(e=e.substr(i)).startsWith(t)},g.endsWith=function(e,t,i){return(e=e.substr(i)).endsWith(t)},g.remove=function(e,t){var i=[],a=[];return e.forEach(function(e,n){t(e)&&(i.push(e),a.push(n))}),n(e,a),i},g.findIndex=function(e,t,i){var n;if(e=e.slice(i),"function"==typeof t){for(n=0;n<e.length;n++)if(t(e[n]))return n}else if(Array.isArray(t))for(n=0;n<e.length;n++){var a=t[0],s=!0;if(t.length>1&&(s=t[1]),e[n][a]===s)return n}else for(n=0;n<e.length;n++)if(e[n]===t)return n;return-1},g.concat=function(){var e=arguments.length;if(!e)return[];for(var t=arguments[0],i=1;i<e;)t=t.concat(arguments[i]),i++;return t},g.isNumber=a,g.indexOf=function(e,t,i){return(e=e.slice(i)).indexOf(t)},g.join=function(e,t){if(null===e)return"";var i="";return e.forEach(function(e){i+=e+t}),i.substr(0,i.length-1)},g.split=function(e,t,i){return e.split(t,i)},g.max=function(e){if(e&&e.length){for(var t,i=0;i<e.length;i++)0===i?t=e[0]:t<e[i]&&(t=e[i]);return t}},g.drop=function(e,t){return null!==e&&e.length?e.slice(t):[]},g.flattenDeep=function e(t){return t.reduce(function(t,i){return t.concat(Array.isArray(i)?e(i):i)},[])},g.uniq=function(e){var t=[];return e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t},g.isNaN=function(e){return a(e)&&e!==+e},g.chunk=function(e,t){if(null===e||!e.length||t<1)return[];for(var i=[];e.length>t;)i.push(e.slice(0,t)),e=e.slice(t);return i.push(e),i},g.maxBy=function(e,t){if(e&&e.length){for(var i,n,a=0;a<e.length;a++)0===a?(i=t(e[0]),n=e[0]):i<e[a]&&(i=e[a],n=e[a]);return n}},g.minBy=function(e,t){if(e&&e.length){for(var i,n,a=0;a<e.length;a++)0===a?(i=t(e[0]),n=e[0]):i>e[a]&&(i=t(e[a]),n=e[a]);return n}},g.range=function(e,t,i){return i&&"number"!=typeof i&&p(e,t,i)&&(t=i=void 0),e=s(e),void 0===t?(t=e,e=0):t=s(t),o(e,t,i=void 0===i?e<t?1:-1:s(i),void 0)},g.sumBy=function(e,t){var i=0;for(var n in e)i+=t(e[n]);return i},g.countBy=function(e){var t={};for(var i in e){var n=e[i];t.hasOwnProperty(n)?t[n]+=1:t[n]=1}return t},window._=g}(),cc._RF.pop()},{}],mainPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"8d8cbF1SNhPQafbr1P4z217","mainPanelUIEvent");var i=kf.require("basic.clientEvent"),n=kf.require("component.panel"),a=e("constants"),s=kf.require("basic.pool"),o=e("localConfig"),r=e("playerData"),c=e("gameLogic"),l=e("utils"),h=e("resourceUtil"),d=cc.Class({extends:n,properties:{skinLockImage:cc.Node,progressBlockPref:cc.Prefab,swordPrefab:cc.Prefab,superStartPayType:cc.Node,edtName:cc.EditBox,nodeDailyLoginRedDot:cc.Node,nodeSwordGroup:cc.Node,nodeDefenseEffect:cc.Node,btnStartGame:cc.Node,spPlayer:cc.Sprite,sfBegin:cc.SpriteFrame,sfBeginAgain:cc.SpriteFrame},onLoad:function(){this._super(),this.isRoleUnlock=!1,this.showMoreMaxCd=3,this.showMoreCurCd=this.showMoreMaxCd,this.isShowSuperStartAgain=!1,s.createPrefabPool(this.progressBlockPref),s.createPrefabPool(this.swordPrefab),this.registerWidgetEvent(),this.registerEvent(),r.firstLogin&&!r.isNewBee&&(r.dailyLoginCanGetCount=0,this.todayIndex=(new Date).getDay(),r.gameData.dailyWelfareGet?c.offLineReward():(r.todayFirstLogin=!0,i.dispatchEvent("showPanel","getAwardPanel",{from:a.getAwardFrom.dailyWelfare,type:a.props.gold,num:500,title:"Daily Benefits",desc:"Get Golds\uff1a500"},function(){}))),this.clickGoldBtnNum=0,this.stopKeepTime=.1,this._stopTime=0,this.rotateSpeed=150},checkIsClick:function(){return!(this.clickTime&&(new Date).getTime()-this.clickTime<500||(this.clickTime=(new Date).getTime(),0))},onBtnAddGolds:function(){cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),console.log("onBtnAddGolds"),i.dispatchEvent("showPanel","getAwardPanel",{from:a.getAwardFrom.dailyWelfare,type:a.props.gold,num:500,title:"Golds Gift",desc:"Get Golds\uff1a500"},function(){})},onStartBtnClick:function(){if(this.checkIsClick())if(cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),this.isRoleUnlock){var e=this;(function(){r.underReview||r.savePlayerName(l.cutString(e.edtName.string)),e.labelInterval&&(clearInterval(e.labelInterval),e.labelInterval=null),e.labelTimeout&&(clearTimeout(e.labelTimeout),e.labelTimeout=null),r.inGame=!0;var t=!1;e.isRoleUnlock&&(e.skinArr=o.getTableArr("skin"),e.skinData=r.gameData.skinData,e.skinArrNoOwn=e.skinArr.filter(function(t){return!(t.ID<9||e.skinData["s"+t.ID]&&e.skinData["s"+t.ID]==a.getSkinNum)}.bind(e)),e.skinArrNoOwn.length>0&&(t=!0));var n=!0;t?(n=1!=r.superStart||Math.random()>.5,2==r.welfareConfig&&(n=!0)):n=!1,n?i.dispatchEvent("showPanel","trialSkinPanel",function(){}):1==r.superStart&&r.showSuperWelfare?i.dispatchEvent("showPanel","superStartPanel",function(){}):i.dispatchEvent("showPanel","matchingPanel",function(){}),i.dispatchEvent("hidePanel","mainPanel")}).bind(this)()}else i.dispatchEvent("showPanel","tipsPanel","The knife is locked, please unlock it first")},superStartReward:function(){1==r.superStart?r.superStart=10:r.superStart=20,this.labelInterval&&(clearInterval(this.labelInterval),this.labelInterval=null),this.labelTimeout&&(clearTimeout(this.labelTimeout),this.labelTimeout=null),this.createRoleNode(r.superStart),i.dispatchEvent("showPanel","tipsPanel","The lineup has been upgraded!")},onDailyLoginBtnClick:function(){this.checkIsClick()&&(cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),i.dispatchEvent("showPanel","dailyLoginPanel",function(){}))},onSkinBtnClick:function(){this.checkIsClick()&&(cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),i.dispatchEvent("showPanel","skinPanel",function(){}))},onPreviewBtnClick:function(){cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),r.useSkinIndexOwn--,r.useSkinIndexOwn<0&&(r.useSkinIndexOwn=this.skinArr.length-1),r.gameData.skinData.useSkinIndex=this.skinArr[r.useSkinIndexOwn].ID,r.skinId=r.gameData.skinData.useSkinIndex,i.dispatchEvent("updateUserDataDisplay")},onNextBtnClick:function(){cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),r.useSkinIndexOwn++,r.useSkinIndexOwn>this.skinArr.length-1&&(r.useSkinIndexOwn=0),r.gameData.skinData.useSkinIndex=this.skinArr[r.useSkinIndexOwn].ID,r.skinId=r.gameData.skinData.useSkinIndex,i.dispatchEvent("updateUserDataDisplay")},onPlayerClick:function(){this.checkIsClick()&&(cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),i.dispatchEvent("showPanel","skinPanel",function(){}))},onBtnSettingClick:function(){this.checkIsClick()&&(cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),i.dispatchEvent("showPanel","settingPanel",function(){}))},onBtnPropertyClick:function(){this.checkIsClick()&&cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK)},onBtnChangeNameClick:function(){cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),this.nickNameArr=o.getTableArr("nickName");var e=Math.floor(Math.random()*this.nickNameArr.length);this.widget.player.playerName.getComponent(cc.EditBox).string=this.nickNameArr[e].nickName,r.savePlayerName(this.nickNameArr[e].nickName)},registerWidgetEvent:function(){},registerEvent:function(){this.registerClientEvent("updateUserDataDisplay",function(){h.setPlayerHead("head"+(r.gameData.playerDefaultSkin+1),this.spPlayer,function(){}),this.widget.gold.num.getComponent(cc.Label).string=r.gameData.gold,this.widget.bestScore.score.getComponent(cc.Label).string=r.gameData.bestScore,r.dailyLoginCanGetCount>0?this.nodeDailyLoginRedDot.active=!0:this.nodeDailyLoginRedDot.active=!1,this.displaySkinRole(),this.widget.player.playerName.getComponent(cc.EditBox).fontColor=cc.color("#CAB684")}.bind(this))},superStartLabelAnimation:function(){this.labelInterval&&(clearInterval(this.labelInterval),this.labelInterval=null),this.labelTimeout&&(clearTimeout(this.labelTimeout),this.labelTimeout=null);var e=["<b><size=50>\u5f00</size>\u5c40\u9635\u5bb9\u5347\u7ea7</b>","<b>\u5f00<size=50>\u5c40</size>\u9635\u5bb9\u5347\u7ea7</b>","<b>\u5f00\u5c40<size=50>\u9635</size>\u5bb9\u5347\u7ea7</b>","<b>\u5f00\u5c40\u9635<size=50>\u5bb9</size>\u5347\u7ea7</b>","<b>\u5f00\u5c40\u9635\u5bb9<size=50>\u5347</size>\u7ea7</b>","<b>\u5f00\u5c40\u9635\u5bb9\u5347<size=50>\u7ea7</size></b>","<b>\u5f00\u5c40\u9635\u5bb9\u5347\u7ea7</b>"],t=0;this.labelInterval=setInterval(function(){if(!this.isValid)return clearInterval(this.labelInterval),this.labelInterval=null,clearTimeout(this.labelTimeout),void(this.labelTimeout=null);++t>=e.length&&(t=0,clearInterval(this.labelInterval),this.labelInterval=null,this.labelTimeout=setTimeout(function(){this.superStartLabelAnimation()}.bind(this),2e3))}.bind(this),200)},displaySkinRole:function(){this.skinArr=o.getTableArr("skin"),this.skinArrOwn=this.skinArr,this.skinData=r.gameData.skinData,this.skinArrOwn=this.skinArrOwn.filter(function(e){return!(!this.skinData["s"+e.ID]||this.skinData["s"+e.ID]!=a.getSkinNum)}.bind(this));for(var e=0;e<this.skinArr.length;e++)if(r.skinId==this.skinArr[e].ID){r.useSkinIndexOwn=e;break}for(this.isRoleUnlock=!1,e=0;e<this.skinArrOwn.length;e++)if(r.skinId==this.skinArrOwn[e].ID){this.isRoleUnlock=!0;break}this.skinLockImage.active=!this.isRoleUnlock,this.createRoleNode(),this.updateSkinAddition()},createRoleNode:function(e){this.createSword(e)},updateSkinAddition:function(){s.putChildInPool(this.widget.skinAddition.fans.progress);for(var e=this.skinArr[r.skinId-1],t=0;t<e.fansAddition+1;t++){var i=s.getPrefab(this.progressBlockPref.name);this.widget.skinAddition.fans.progress.addChild(i)}},show:function(){if(this._super(),r.playerLevel=r.gameData.playerLevel,r.sprintLevel=r.gameData.sprintLevel,r.fansCountLevel=r.gameData.fansCountLevel,r.gameData.playerName)this.widget.player.playerName.getComponent(cc.EditBox).string=r.gameData.playerName;else{this.nickNameArr=o.getTableArr("nickName");var e=Math.floor(Math.random()*this.nickNameArr.length);this.widget.player.playerName.getComponent(cc.EditBox).string=this.nickNameArr[e].nickName,r.savePlayerName(this.nickNameArr[e].nickName)}this.displaySkinRole(),i.dispatchEvent("updateUserDataDisplay");var t=r.calculateLevel();console.log("####"+JSON.stringify(t)),this.needScore=t.needScore,t.levelIndex>r.levelData.levelIndex?(i.dispatchEvent("showPanel","tipsPanel","Ascended"),r.levelData=t):t.levelStar>r.levelData.levelStar&&(i.dispatchEvent("showPanel","tipsPanel","Rising star"),r.levelData=t)},createSword:function(e){if(this.isValid){e||(e=0),this.nodeSwordGroup.removeAllChildren();for(var t=this.skinArr[r.skinId-1],i=t.fansAddition,n=0;n<this.nodeDefenseEffect.children.length;n++)this.nodeDefenseEffect.children[n].color=cc.color(t.uiColorValue);for(var a=i+1,o=0;o<a;o++){var c=s.getPrefab(this.swordPrefab.name);this.nodeSwordGroup.addChild(c),c.getComponent("swordEffectLogic").setData(a,o),h.setWeaponIcon("weapon"+r.skinId,c.getComponent(cc.Sprite),function(){})}}},update:function(e){this.isValid&&(this._stopTime<this.stopKeepTime?this._stopTime+=e:this.nodeSwordGroup.angle+=this.rotateSpeed*e)}});kf.addModule("mainPanel.mainPanelUIEvent",function(){return d}),cc._RF.pop()},{constants:"constants",gameLogic:"gameLogic",localConfig:"localConfig",playerData:"playerData",resourceUtil:"resourceUtil",utils:"utils"}],main:[function(e,t){"use strict";cc._RF.push(t,"f8a796I44tOP7in+xSPSaiw","main");var i=e("localConfig"),n=e("updateValueLabel"),a=e("playerData"),s=e("configuration"),o=e("constants"),r=e("gameLogic"),c=e("audioManager");cc.gameSpace={},cc.gameSpace.TIME_SCALE=1,cc.gameSpace.isStop=!1,cc.gameSpace.SDK="wx",cc.Class({extends:cc.Component,properties:{lbProgress:n},start:function(){var e=this,t=cc.winSize;(t.width>t.height||t.height/t.width<1.4)&&(this.node.getComponent(cc.Canvas).fitHeight=!0),cc.debug.setDisplayStats(!1),cc.game.setFrameRate(30),cc.director.getCollisionManager().enabled=!0,cc.gameSpace.isIphoneX=cc.game.canvas.height/cc.game.canvas.width>2,cc.gameSpace.audioManager=c,cc.gameSpace.gameLogic=r,cc.gameSpace.isConfigLoadFinished=!1,this.lbProgress.playUpdateValue(0,99,10),i.loadConfig(function(){cc.gameSpace.isConfigLoadFinished=!0,e.visitorLogin()})},getOrCreateAccount:function(){var e=s.getGlobalData(o.LOCAL_CACHE.ACCOUNT);return e||(e=""+Date.now()+Math.floor(1e3*Math.random())),e},visitorLogin:function(){this.uid=this.getOrCreateAccount(),a.syncServerTime(Date.now()),this.userLogin()},userLogin:function(){var e=this;a.userId=this.uid,s.setGlobalData(o.LOCAL_CACHE.ACCOUNT,this.uid),s.setUserId(this.uid),a.loadFromCache(),a.isNewBee||(a.dailyLoginCanGetCount=0,this.todayIndex=(new Date).getDay(),a.gameData.dailyWelfareGet?r.offLineReward():a.todayFirstLogin=!0),a.isNewBee||a.continuousLogin?r.updateTaskData(o.taskId.continuousLogin):r.updateTaskData(o.taskId.continuousLogin,1),window.wx?this.loadGameSubPackage(function(){e.loadMainScene()}):this.loadMainScene()},showSubPackageError:function(){wx.showModal({title:"\u9519\u8bef",content:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00!",showCancel:!1,success:function(){wx.exitMiniProgram()}})},loadGameSubPackage:function(e){var t=this;window.wx?cc.loader.downloader.loadSubpackage("core",function(i){if(i)return t.showSubPackageError(),console.error(i);cc.loader.downloader.loadSubpackage("resources",function(i){if(i)return t.showSubPackageError(),console.error(i);e()})}):e()},loadMainScene:function(){cc.director.preloadScene("mainScene",function(e){e||cc.director.loadScene("mainScene",function(){})})}}),cc._RF.pop()},{audioManager:"audioManager",configuration:"configuration",constants:"constants",gameLogic:"gameLogic",localConfig:"localConfig",playerData:"playerData",updateValueLabel:"updateValueLabel"}],maskPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"aaa572EOxZEHpaP8S85+L1Z","maskPanelUIEvent"),kf.require("basic.clientEvent");var i=kf.require("component.panel"),n=kf.require("basic.panelCenter"),a=cc.Class({extends:i,properties:{},onLoad:function(){this._super(),this.registerWidgetEvent(),this.registerEvent(),this.widget.loadNode.active=!1},registerWidgetEvent:function(){},registerEvent:function(){},show:function(){var e=this;this._super(),this.loadTimeOut&&(clearTimeout(this.loadTimeOut),this.loadTimeOut=null),this.widget.loadNode.active=!1,this.loadTimeOut=setTimeout(function(){n.getSubPanelStack().length>0||(e.widget.loadNode.active=!0,e.loadTimeOut=null)},1e3)},hide:function(){this.loadTimeOut&&(clearTimeout(this.loadTimeOut),this.loadTimeOut=null)}});kf.addModule("maskPanel.maskPanelUIEvent",function(){return a}),cc._RF.pop()},{}],matchingPanelGameFan:[function(e,t){"use strict";cc._RF.push(t,"405a3XoyThAdrI5200qDG+H","matchingPanelGameFan"),cc.Class({extends:cc.Component,properties:{image:cc.Sprite,idle:[cc.SpriteFrame]},onLoad:function(){this.idle.spriteFrameIndex=0,this.deltaAnimFrame=.33,this.anim=this.idle,this.node.opacity=255,this.fadeTime=255,this.fadeSpeed=150,this.stage=0},update:function(e){this.playAnimation(e),this.fadeTime-=this.fadeSpeed*e,0===this.stage&&this.fadeTime<0&&(this.node.opacity=0,this.stage=1),1===this.stage&&(this.node.opacity-=this.fadeSpeed*e,this.node.opacity<0&&(this.node.opacity=0))},playAnimation:function(e){this.curAnimFrame?this.curAnimFrame+=e:this.curAnimFrame=e,this.curAnimFrame<this.deltaAnimFrame||(this.curAnimFrame=0,this.anim.spriteFrameIndex++,this.anim.spriteFrameIndex>=this.idle.length&&(this.anim.spriteFrameIndex=0),this.image.spriteFrame=this.idle[this.anim.spriteFrameIndex])}}),cc._RF.pop()},{}],matchingPanelLogic:[function(e,t){"use strict";cc._RF.push(t,"91179InEF9MHbn2zHWXWxVw","matchingPanelLogic"),kf.addModule("matchingPanel.matchingPanelLogic",function(){return{init:function(){this.registerNetMsg()},registerNetMsg:function(){}}}),cc._RF.pop()},{}],matchingPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"d2b37M702RFyYsD4Ql7Ve5x","matchingPanelUIEvent");var i=kf.require("basic.clientEvent"),n=kf.require("component.panel"),a=kf.require("basic.pool"),s=e("constants"),o=e("localConfig"),r=e("gameLogic"),c=e("playerData"),l=e("resourceUtil"),h=cc.Class({extends:n,properties:{imageItemPrefab:cc.Prefab,otherBtn1:cc.Node,image1:cc.Node,nameLb1:cc.Label,addTip:cc.Prefab},onLoad:function(){this._super(),this.registerWidgetEvent(),this.registerEvent(),a.createPrefabPool(this.imageItemPrefab),this.imageItemArr=[],this.initImageItems(),this.matchingNum=0},initImageItems:function(){for(var e=0;e<8;e++){var t=a.getPrefab(this.imageItemPrefab.name);this.widget.imageLayout.addChild(t),this.imageItemArr.push(t)}},onBtnCloseClick:function(){this.timeOut&&(clearTimeout(this.timeOut),this.timeOut=null),c.inGame=!1,c.inGameOver=!1,i.dispatchEvent("showPanel","mainPanel"),i.dispatchEvent("hidePanel","matchingPanel")},registerWidgetEvent:function(){this.widget.closeBtn.on("click",function(){}.bind(this))},registerEvent:function(){},clearImages:function(){for(var e=0;e<this.imageItemArr.length;e++)this.imageItemArr[e].getChildByName("image").getComponent(cc.Sprite).spriteFrame=null},updateImages:function(e){var t=this;this.timeOut&&(clearTimeout(this.timeOut),this.timeOut=null);for(var i=this.random(8,1,101),n=function(e){i[e]&&l.loadMatchAvatar(i[e],function(i,n){if(t.imageItemArr&&t.imageItemArr[e]){var a=Math.ceil(4e3*Math.random());setTimeout(function(){this.imageItemArr&&this.imageItemArr[e]&&(this.imageItemArr[e].getChildByName("image").getComponent(cc.Sprite).spriteFrame=n)}.bind(t),a)}})},a=0;a<this.imageItemArr.length;a++)n(a);this.timeOut=setTimeout(function(){e&&e(),clearTimeout(this.timeOut),this.timeOut=null}.bind(this),1500*this.maxDelayTime)},random:function(e,t,i){var n=[];function a(e,t){var i=t-e;return parseInt(Math.random()*i+e)}for(;n.length<e;){var s=a(t,i);-1==n.indexOf(s)&&n.push(s)}return n},show:function(e){this._super(),e&&e(),this.maxDelayTime=_.random(1,2),this.widget.matchingDesc.getComponent(cc.Label).string=s.matchingDesc[this.matchingNum],this.matchingNum++,this.matchingNum>s.matchingDesc.length-1&&(this.matchingNum=0),this.widget.closeBtn.active=!0,this.scheduleOnce(function(){this.widget.closeBtn.active=!1}.bind(this),2);var t=!1;this.clearImages(),this.updateImages(function(){setTimeout(function(){cc.gameSpace.audioManager.playSound(s.AUDIO_SOUND.GAME_START),i.dispatchEvent("hidePanel","matchingPanel");var e=setInterval(function(){t&&(c.inGame=!0,clearInterval(e),cc.director.loadScene("swordWorld"))},100)},2500)}.bind(this)),r.loadUserSkin(),cc.director.preloadScene("swordWorld",function(){t=!0})},updatePropertyLevel:function(){this.skinArr=o.getTableArr("skin");var e=this.skinArr[c.skinId-1];c.playerLevel+=e.speedAddition,c.sprintLevel+=e.speedAddition,c.gameData.fansCountLevel+=e.fansAddition,c.playerLevel=c.playerLevel>60?60:c.playerLevel,c.sprintLevel=c.sprintLevel>30?30:c.sprintLevel,c.gameData.fansCountLevel=c.gameData.fansCountLevel>30?30:c.gameData.fansCountLevel},hide:function(){clearInterval(this.miniGameInterval)},createRoleNode:function(){var e=this,t=[cc.v2(-32,63),cc.v2(17,60),cc.v2(70,76),cc.v2(57,17),cc.v2(117,66),cc.v2(-72,107),cc.v2(-126,63),cc.v2(-110,22),cc.v2(-46,0),cc.v2(0,0)],i=o.queryByID("skin",c.skinId);i&&cc.loader.loadRes("mainSkins/"+i.prefabName,cc.Prefab,function(n,a){if(!n&&e.isValid)for(var s=t,o=0;o<s.length;o++){var r=cc.instantiate(a);r.getChildByName("image").color=cc.color(i.characterColorValue),r.setPosition(s[o]),o!==s.length-1?r.setScale(.5):r.setScale(.7)}})}});kf.addModule("matchingPanel.matchingPanelUIEvent",function(){return h}),cc._RF.pop()},{constants:"constants",gameLogic:"gameLogic",localConfig:"localConfig",playerData:"playerData",resourceUtil:"resourceUtil"}],netLoadingPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"cb17e/VL8VIsZu5LSJVRWr7","netLoadingPanelUIEvent");var i=kf.require("component.panel"),n=kf.require("basic.panelCenter");cc.Class({extends:i,properties:{},onLoad:function(){this._super(),this.registerWidgetEvent(),this.registerEvent()},registerWidgetEvent:function(){n.addClickMaskEvent(this.widget.layout)},registerEvent:function(){},show:function(){this._super()}}),cc._RF.pop()},{}],panelCenter:[function(e,t){"use strict";cc._RF.push(t,"ed75f15+N5H2YDzjhncL7/j","panelCenter"),kf.addModule("basic.panelCenter",function(){var e=kf.require("basic.clientEvent"),t={},i=cc.Enum({SUB_SCENE_ZORDER:0,BATTLE_ROOM_ZORDER:3,SUB_PANEL_ZORDER:4,COMMON_MASK_ZORDER:1e3,WORLD_PANEL_ZORDER:2e3,WORLD_ANIMATION_ZORDER:3e3,MODAL_PANEL_ZORDER:4e3,GLOBAL_FLOATING_PANEL_ZORDER:5e3,LOADING_PANEL_ZORDER:6e3,ALERT_PANEL_ZORDER:7e3});return t.init=function(){},t.setMaskNodeHide=function(){this.maskNode.opacity=0},t.setMaskNodeShow=function(){this.maskNode.opacity=150},t.addClickMaskEvent=function(e){e.on("touchstart",function(e){e.stopPropagation()}),e.on("touchend",function(e){e.stopPropagation()}),e.on("touchmove",function(e){e.stopPropagation()}),e.on("touchcancel",function(e){e.stopPropagation()}),e.on("mousedown",function(e){e.stopPropagation()}),e.on("mouseenter",function(e){e.stopPropagation()}),e.on("mousemove",function(e){e.stopPropagation()}),e.on("mouseleave",function(e){e.stopPropagation()}),e.on("touchend",function(e){e.stopPropagation()}),e.on("mousewheel",function(e){e.stopPropagation()})},t.initGraphic=function(t,n,a){this.clearEvent(),this.subScenes={},this.subPanels={},this.subPanelActives={},this.newestSubPanelName="",this.runningScene=t,this.initEventDispatcherStack(),e.bindEventListener(),this.curActiveSubScene=a,this.maskNode=n,this.maskNode.active=!1,this.maskNode.width=cc.winSize.width,this.maskNode.height=cc.winSize.height,this.addClickMaskEvent(this.maskNode),this.curCommonSubPanelZorder=i.WORLD_PANEL_ZORDER,this.curModalSubPanelZorder=i.MODAL_PANEL_ZORDER,this.registerEvent()},t.clearEvent=function(){this.subScenes={},this.subPanels={},this.newestSubPanelName="",this.initEventDispatcherStack()},t.getWinSize=function(){return this.curActiveSubScene?this.curActiveSubScene.getContentSize():this.runningScene.getContentSize()},t.initEventDispatcherStack=function(){this.subPanelStack=[],this.curActiveSubScene=null,this.nextSubScene=null,this.subPanelStackIndex=-1,this.subSceneStack=[],this.subSceneStackIndex=0,this.eventDispatcherStack=[],this.eventDispatcherStackIndex=0},t.pushEventDispatcher=function(e){this.eventDispatcherStackIndex=this.eventDispatcherStackIndex+1,this.eventDispatcherStack[this.eventDispatcherStackIndex]=e,cc.director.setEventDispatcher(e)},t.popEventDispatcher=function(){this.eventDispatcherStackIndex=this.eventDispatcherStackIndex-1;var e=this.eventDispatcherStack[this.eventDispatcherStackIndex];cc.director.setEventDispatcher(e)},t.getSubPanel=function(e){return this.subPanels[e]},t.getPanelIsVisible=function(e){return!!this.subPanelActives[e]||!!(this.getSubPanel(e)&&this.getSubPanel(e)&&this.getSubPanel(e).active)},t.getAndCreateSubPanel=function(e,t){var n,a=this;n=this.curActiveSubScene?this.curActiveSubScene:this.runningScene;var s=function(s){var o=s;if(o)if(o.getComponent("panel")){var r=o.getComponent("panel");o.setName(e.replace(/\//g,".")),a.subPanels[e]=o,o.getParent()!==n&&(o.parent=n,r.isModal?o.zIndex=i.MODAL_PANEL_ZORDER:r.customFlag&&r.customOrder?o.zIndex=r.customOrder:o.zIndex=i.WORLD_PANEL_ZORDER),t(o)}else cc.error(e,"\u6ca1\u6709\u52a0\u8f7dpanel\u811a\u672c");else cc.error("can not find sub panel class ",e)},o=this.subPanels[e];if(o)s(o);else{var r=e,c=[];cc.resources.getDirWithPath("panel",null,c);for(var l=0;l<c.length;l++){var h=c[l].path,d=h.split("/");if(d[d.length-1]===e){r=h;break}}cc.loader.loadRes(r,cc.Prefab,function(t,i){o=null,a.subPanels[e]?o=a.subPanels[e]:t||(cc.supportJit?(cc.supportJit=!1,o=cc.instantiate(i),cc.supportJit=!0):o=cc.instantiate(i),o.active=!1),s(o)})}},t.getAndCreateSubPanelNotHide=function(e,t){this.curActiveSubScene?this.curActiveSubScene:this.runningScene;var i=function(i){i?i.getComponent("panel")?(i.getComponent("panel"),i.setName(e.replace(/\//g,".")),this.subPanels[e]=i,t(i)):cc.error(e,"\u6ca1\u6709\u52a0\u8f7dpanel\u811a\u672c"):cc.error("can not find sub panel class ",e)}.bind(this),n=this.subPanels[e];if(n)i(n);else{var a=e,s=[];cc.resources.getDirWithPath("panel",null,s);for(var o=0;o<s.length;o++){var r=s[o].path,c=r.split("/");if(c[c.length-1]===e){a=r;break}}cc.loader.loadRes(a,cc.Prefab,function(t,a){n=null,this.subPanels[e]?n=this.subPanels[e]:t||(cc.supportJit?(cc.supportJit=!1,n=cc.instantiate(a),cc.supportJit=!0):n=cc.instantiate(a)),i(n)}.bind(this))}},t.finishChangeSubScene=function(){this.curActiveSubScene&&(this.curActiveSubScene.hide(this.nextSubScene.getName()),this.curActiveSubScene.setPosition(0,0)),this.curActiveSubScene=this.nextSubScene,this.nextSubScene=null,this.subPanelStack=[],this.subPanelStackIndex=-1,cc.eventManager.setEnabled(!0)},t.registerEvent=function(){for(var t=this,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];e.on("showSubScene",function(e){t.hideAllSubPanel(),cc.log("show_world_subScene:"+e);var i=t.getSubScene(e);if(!i.active){t.nextSubScene=i,t.curActiveSubScene&&(i.isRememberFromScene()?t.pushSubScene(t.curActiveSubScene):t.subSceneStackIndex=0),t.finishChangeSubScene();for(var a=[],s=1;s<n.length;s++)a.push(n[s]);i.show(n)}}),e.on("showPanel",function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];var s,o=n[0],r=[];for(s=1;s<n.length;++s)r[r.length]=n[s];t.subPanelActives[o]=!0,t.getAndCreateSubPanel(o,function(i){var a=i;if(a){if(console.log("showPanel:"+o),t.subPanelActives[o]){t.newestSubPanelName=o,a.active&&e.dispatchEvent("hidePanel",o),s=0;var c=a.getComponent("panel");if(c.isModal){var l=-1;for(s=0;s<=t.subPanelStackIndex;s++)if(t.subPanelStack[s].getName()===a.getName()){l=s;break}-1!==l&&(t.subPanelStack.splice(l,1),t.subPanelStackIndex=t.subPanelStackIndex-1,t.curModalSubPanelZorder=t.curModalSubPanelZorder-1),t.curModalSubPanelZorder=t.curModalSubPanelZorder+2,t.pushSubPanel(a),a.zIndex=t.curModalSubPanelZorder}else c.customFlag&&c.customOrder?a.zIndex=c.customOrder:(t.curCommonSubPanelZorder=t.curCommonSubPanelZorder+2,a.zIndex=t.curCommonSubPanelZorder);c.show&&c.show.apply(c,r),e.dispatchEvent.apply(e,["showPanelOver"].concat(n))}}else cc.error("can't find "+o)})}),e.on("hidePanel",function(i){t.subPanelActives[i]=!1,t.getAndCreateSubPanel(i,function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];var r=s,c=n,l=c.getComponent("panel");if(c&&(c.active||l.isModal)){var h,d;c.active=!1;do{if(l.isModal){if(!(d=t.subPanelStack[t.subPanelStackIndex])&&t.subPanelStack.length>0&&(t.subPanelStackIndex=t.subPanelStack.length-1,d=t.subPanelStack[t.subPanelStackIndex]),!d)break;if(d.getName()!==i){var u=-1;for(h=0;h<=t.subPanelStackIndex;h++)if((d=t.subPanelStack[h]).getName()===c.getName()){u=h;break}if(u>=0){for(h=u+1;h<=t.subPanelStackIndex;h++){var p=(d=t.subPanelStack[h]).zIndex;d.zIndex=p-2}t.subPanelStack.splice(u,1),t.subPanelStackIndex=t.subPanelStackIndex-1,t.curModalSubPanelZorder=t.curModalSubPanelZorder-2,t.maskNode.zIndex=t.curModalSubPanelZorder-1}break}t.popSubPanel(),d=t.subPanelStack[t.subPanelStackIndex],t.curModalSubPanelZorder=t.curModalSubPanelZorder-2,d?t.showMaskNode(d):t.maskNode.active=!1}}while(0);l.hide&&l.hide.apply(l,r),e.dispatchEvent("hidePanelOver",i)}else c&&l.hide&&l.hide.apply(l,r)})})},t.pushSubPanel=function(e){this.subPanelStackIndex=this.subPanelStackIndex+1,this.subPanelStack[this.subPanelStackIndex]=e,this.showMaskNode(e)},t.showMaskNode=function(e){this.maskNode.parent=e.getParent(),this.maskNode.zIndex=this.curModalSubPanelZorder-1,this.maskNode.active=!0},t.popSubPanel=function(){var e=this.subPanelStack.splice(this.subPanelStackIndex,1)[0];return this.subPanelStackIndex=this.subPanelStackIndex-1,e},t.getSubPanelStack=function(){return this.subPanelStack},t.hideAllSubPanel=function(){for(var t=this.subPanelStack,i=this.subPanelStackIndex;i>=0;i--)e.dispatchEvent("hidePanel",t[i].__name);this.subPanelStackIndex=-1},t.getNewestPanel=function(){return this.newestSubPanelName},t.getCurSubScene=function(){return this.curActiveSubScene},t.shakePanel=function(e,t){var i=t/4;e.runAction(cc.sequence(cc.delayTime(.07),cc.scaleTo(i,1.01,1.01),cc.jumpBy(i,cc.p(0,0),5,12),cc.scaleTo(i,.99,.99),cc.scaleTo(i,1,1)))},t}),cc._RF.pop()},{}],panel:[function(e,t){"use strict";cc._RF.push(t,"e9e6ex5oE9L9o2JyyJzCllS","panel");var i=cc.Enum({SUB_SCENE_ZORDER:0,BATTLE_ROOM_ZORDER:3,SUB_PANEL_ZORDER:4,COMMON_MASK_ZORDER:1e3,WORLD_PANEL_ZORDER:2e3,WORLD_ANIMATION_ZORDER:3e3,MODAL_PANEL_ZORDER:4e3,GLOBAL_FLOATING_PANEL_ZORDER:5e3,LOADING_PANEL_ZORDER:6e3,ALERT_PANEL_ZORDER:7e3}),n=cc.Enum({"\u7a7a":i.SUB_SCENE_ZORDER,"\u7f6e\u9876\u663e\u793a":i.ALERT_PANEL_ZORDER,"\u4e3b\u573a\u666f\u52a8\u753b":i.WORLD_ANIMATION_ZORDER,"\u6d6e\u52a8\u63d0\u793a\u6846":i.GLOBAL_FLOATING_PANEL_ZORDER,"\u8bfb\u6761\u754c\u9762":i.LOADING_PANEL_ZORDER}),a=cc.Class({extends:cc.Component,_customFlag:!1,properties:{isModal:{default:!0,displayName:"\u6a21\u6001\u5bf9\u8bdd\u6846",tooltip:"\u70b9\u5f00\u4ee5\u540e\u4e0d\u80fd\u64cd\u4f5c\u5bf9\u8bdd\u6846\u540e\u9762"},customFlag:{default:!1,displayName:"\u81ea\u5b9a\u4e49\u5c42\u7ea7",tooltip:"\u5f39\u51fa\u6846\u5e38\u7528",visible:function(){return!this.isModal}},_customOrder:i.SUB_SCENE_ZORDER,customOrder:{get:function(){return this._customOrder},set:function(e){this._customOrder=e},type:n,tooltip:"\u9009\u62e9\u9002\u5408\u7684\u5c42\u7ea7\u5173\u7cfb",displayName:"\u7c7b\u578b",visible:function(){return this.customFlag}}},onLoad:function(){this.widget={},function e(t,i,n){for(var a=i,s=t.getChildren(),o=0,r=s.length;o<r;o++){var c=s[o].getName();c&&(n&&a[c],a[c]=s[o],s[o].getChildren()&&s[o].getChildren().length>0&&e(s[o],a[c],n))}}(this.node,this.widget,!0)},show:function(){this.node.active=!0},hide:function(){this.node.active=!1},onDestroy:function(){this.clearAllEvent()},getRootNode:function(){return this.node},setPosition:function(){var e;(e=this.node).setPosition.apply(e,arguments)},getPosition:function(){return this.node.getPosition()},registerClientEvent:function(e,t,i){var n=this;"string"==typeof e&&(this.eventObj||(this.eventObj={}),this.eventObj[e]?console.error("already have the same event in this panel"):(this.eventObj[e]=function(){var e=n.getRootNode();(e.activeInHierarchy||i)&&t.apply(void 0,arguments)},kf.require("basic.clientEvent").on(e,this.eventObj[e])))},unregisterClientEvent:function(e){"string"==typeof e&&(this.eventObj[e]?(kf.require("basic.clientEvent").off(e,this.eventObj[e]),delete this.eventObj[e]):console.error("not found event in this panel"))},clearAllEvent:function(){var e=kf.require("basic.clientEvent");for(var t in this.eventObj)this.eventObj.hasOwnProperty(t)&&e.off(t,this.eventObj[t]);this.eventObj={}},aaddShowPanelClick:function(e,t){var i=kf.require("basic.clientEvent");!t||t.length<=0||i.dispatchEvent("showPanel",t)},ahidePanelClick:function(e,t){var i=t,n=kf.require("basic.clientEvent");(!i||i.length<=0)&&(i=this.node.getName()),n.dispatchEvent("hidePanel",i)},setSpriteFrame:function(e,t,i){var n=e;cc.textureCache.addImage(t,function(e){if(e instanceof cc.Texture2D)n.spriteFrame=new cc.SpriteFrame(e),i&&i(e);else{var a=t;if(-1!==a.indexOf("resources/")){var s=a.split("resources/");a=s[1]}var o=cc.path.extname(a);o&&(a=a.slice(0,-o.length)),cc.loader.loadRes(a,cc.SpriteFrame,function(e,t){n.spriteFrame=t,i&&i(t)})}})}});kf.addModule("component.panel",function(){return a}),cc._RF.pop()},{}],playerData:[function(e,t){"use strict";cc._RF.push(t,"09c828gbrNGIKyGvFsy0Kdy","playerData");var i=e("configuration"),n=e("localConfig"),a=e("constants"),s=e("utils"),o=new(cc.Class({start:function(){this.userId=null,this.account=null,this.password=null,this.level=1,this.init()},init:function(){this.skinId=1,this.isTest=0,this.flags={wheelSurf:!1},this.isNewBee=!1,this.gameNum=0,this.todayFirstLogin=!1,this.superStart=1,this.shareTimes=0,this.dailyLoginCanGetCount=1,this.playerColorIndex=0,this.underReview=!1,this.needCoin=0,this.inGame=!1,this.inGameOver=!1,this.todayCanGet=!1,this.moreGameDot=!0,this.recommendDot=!0,this.recommendGameDotState={},this.popularGameDotState={},this.bannerRefreshTimes1=0,this.bannerRefreshTimes2=0,this.bannerRefreshTimes3=0,this.bannerRefreshTimes4=0,this.bannerRefreshTimes5=0,this.bannerMaxRefreshTimes=14,this.bannerConfig=2,this.shareSuccessTime=3e3,this.shareSuccessTimeProps=1500,this.showRiskyBanner=!1,this.showDailyWelfareBanner=!1,this.showGameOverAwardBanner=!1,this.showLuckyWheelAwardBanner=!1,this.showDailyLoginAwardBanner=!1,this.showCrazySpotAwardBanner=!1,this.showDailyWelfareRiskyBtn=!1,this.showGameOverAwardRiskyBtn=!1,this.showLuckyWheelAwardRiskyBtn=!1,this.showDailyLoginAwardRiskyBtn=!1,this.showCrazySpotPanel=!1,this.showGameBanner=!1,this.shareFailTips=1,this.randomBanner=!1,this.clickAreaHeight1=20,this.clickAreaHeight2=25,this.clickAreaHeight3=30,this.clickAreaHeight4=35,this.showMatchingBanner=!1,this.showAreaShieldBanner=!1,this.bannerNumbers=4,this.matchingBannerId=0,this.riskyBannerId="banner1",this.speedUpgradeCount=0,this.fansUpgradeCount=0,this.sprintUpgradeCount=0,this.offlineUpgradeCount=0,this.accessToken="",this.infiniteSprint=!1,this.welfareConfig=1,this.isFirstLoad=!0,this.gameState=a.GAME_STATE.NONE,this.vibrateOn=!0,this.BoundSize=cc.v2(4500,4500),this.miniGameExtraFan=0,this.fadeTime=0,this.protectTime=0,this.fightInfo={currScore:0,killCnt:0,rank:0}},loadFromCache:function(){this.playerInfo=this.loadDataByKey(a.LOCAL_CACHE.PLAYER),console.log("this.playerInfo",this.playerInfo),0===Object.keys(this.playerInfo).length&&this.createPlayerInfo(),this.playerInfo.hasOwnProperty("createDate")||(this.playerInfo.createDate=new Date),this.gameData=this.loadDataByKey(a.LOCAL_CACHE.GAME),this.settingData=this.loadDataByKey(a.LOCAL_CACHE.SETTING),this.settingData&&this.settingData.hasOwnProperty("vibrateOn")&&(this.vibrateOn=this.settingData.vibrateOn),this.initGameData()},initGameData:function(){if(this.gameData&&0!==Object.keys(this.gameData).length){if(this.gameData.moreGameData||(this.gameData.moreGameData={}),this.gameData.playerLevel||(this.gameData.playerLevel=1),this.gameData.sprintLevel||(this.gameData.sprintLevel=1),this.gameData.fansCountLevel||(this.gameData.fansCountLevel=1),this.gameData.videoTimes||(this.gameData.videoTimes=0),this.gameData.taskData||(this.gameData.taskData={}),this.gameData.dailyLoginCount||(this.gameData.dailyLoginCount=0),this.gameData.playerLevel>60&&(this.gameData.playerLevel=60),this.skinId=this.gameData.skinData.useSkinIndex,this.isNewBee=!1,this.gameData.lastUpdateTime){var e=s.checkDays(this.gameData.lastUpdateTime,this.getCurrentTime());e.sameDay?this.gameData.dailyLoginCount++:(console.log("@@@@@@@@@@@@"),this.gameData.dailyWelfareGet=0,this.continuousLogin=e.continuousLogin,this.gameData.dailyLoginCount=1),e.sameWeek||(console.log("%%%%%%%%%%%%"),this.gameData.dailyLoginGet={day0:0,day1:0,day2:0,day3:0,day4:0,day5:0,day6:0},this.gameData.weekBestScore=0)}}else this.gameData={},this.gameData.weekBestScore||(this.gameData.weekBestScore=0),this.gameData.bestScore||(this.gameData.bestScore=0),this.gameData.gold||(this.gameData.gold=0),this.gameData.totalScore||(this.gameData.totalScore=0),this.gameData.dailyWelfareGet||(this.gameData.dailyWelfareGet=0),this.gameData.skinData||(this.gameData.skinData={useSkinIndex:1,s1:a.getSkinNum}),this.gameData&&!this.gameData.playerDefaultSkin&&(this.gameData.playerDefaultSkin=0),this.gameData.playerSkins||(this.gameData.playerSkins=[0]),this.gameData.dailyLoginGet||(this.gameData.dailyLoginGet={day0:0,day1:0,day2:0,day3:0,day4:0,day5:0,day6:0}),this.gameData.moreGameData||(this.gameData.moreGameData={}),this.gameData.playerLevel||(this.gameData.playerLevel=1),this.gameData.sprintLevel||(this.gameData.sprintLevel=1),this.gameData.fansCountLevel||(this.gameData.fansCountLevel=1),this.gameData.videoTimes||(this.gameData.videoTimes=0),this.gameData.taskData||(this.gameData.taskData={}),this.gameData.dailyLoginCount||(this.gameData.dailyLoginCount=1),this.gameData.roundCnt||(this.gameData.roundCnt=0),this.gameData.speedUpGuide||(this.gameData.speedUpGuide=0),this.isNewBee=!0;this.levelData=this.calculateLevel(),this.gameData.lastUpdateTime=(new Date).getTime()},checkUpdateTime:function(){if(this.gameData.lastUpdateTime){var e=s.checkDays(this.gameData.lastUpdateTime,this.getCurrentTime());e.sameDay||(console.log("@@@@@@@@@@@@"),this.gameData.dailyWelfareGet=0,this.continuousLogin=callback.continuousLogin),e.sameWeek||(this.gameData.dailyLoginGet={day0:0,day1:0,day2:0,day3:0,day4:0,day5:0,day6:0},this.gameData.weekBestScore=0)}},loadDataByKey:function(e){var t={},n=i.getConfigData(e);if(n)try{t=JSON.parse(n)}catch(a){t={}}return t},saveAccount:function(e){this.account=e,this.userId=e,i.setUserId(e),i.setGlobalData(a.LOCAL_CACHE.ACCOUNT,e)},createPlayerInfo:function(e){if(this.playerInfo={},this.playerInfo.diamond=0,this.playerInfo.gold=0,this.playerInfo.item=0,this.playerInfo.createDate=new Date,this.playerInfo.hasSeenGuide=!1,this.playerInfo.unLockInfo=[],this.isNewBee=!0,e)for(var t in e)this.playerInfo[t]=e[t];this.savePlayerInfoToLocalCache()},savePlayerInfoToLocalCache:function(){this.addDataVersion(),i.setConfigData(a.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))},saveGameDataToLocalCache:function(){this.addDataVersion(),i.setConfigData(a.LOCAL_CACHE.GAME,JSON.stringify(this.gameData))},saveSettingDataToLocalCache:function(){this.addDataVersion(),i.setConfigData(a.LOCAL_CACHE.SETTING,JSON.stringify(this.settingData))},addDataVersion:function(){var e=(new Date).toLocaleDateString(),t=!1;if(this.dataVersion&&"string"==typeof this.dataVersion){var n=this.dataVersion.split("@");n.length>=2&&n[0]===e&&(this.dataVersion=e+"@"+(Number(n[1])+1),t=!0)}t||(this.dataVersion=e+"@1"),i.setConfigDataWithoutSave(a.LOCAL_CACHE.DATA_VERSION,this.dataVersion)},saveAll:function(){i.setConfigDataWithoutSave(a.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo)),i.setConfigDataWithoutSave(a.LOCAL_CACHE.GAME,JSON.stringify(this.gameData)),i.setConfigData(a.LOCAL_CACHE.DATA_VERSION,this.dataVersion)},updatePlayerInfo:function(e,t){var n=!1;this.playerInfo.hasOwnProperty(e)&&("number"==typeof t?(n=!0,this.playerInfo[e]+=t,this.playerInfo[e]<0&&(this.playerInfo[e]=0)):"boolean"!=typeof t&&"string"!=typeof t||(n=!0,this.playerInfo[e]=t)),n&&i.setConfigData(a.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))},syncServerTime:function(e){this.serverTime=e,this.localTime=Date.now()},getCurrentTime:function(){var e=Date.now()-this.localTime;return this.serverTime+e},clear:function(){delete i.jsonData[this.userId],i.save()},calculateLevel:function(){for(var e=a.LEVEL.BASE_SCORE,t=a.LEVEL.TIMES,i=this.gameData.totalScore,n=0,s=0,o=0;;){var r=e*Math.pow(t,o);if(!((i-=r)>=0)){s=1-(n=Math.ceil(Math.abs(i)))/r;break}o++}var c=Math.floor(o/5)>5?5:Math.floor(o/5);return{levelIndex:c,levelStar:o%5,levelName:["\u9752\u94dc","\u767d\u94f6","\u9ec4\u91d1","\u767d\u91d1","\u94bb\u77f3","\u738b\u8005"][c],starProgress:s,needScore:n}},getAILevel:function(){return this.gameData.AILevel?this.gameData.AILevel:1},AILevelUp:function(){this.gameData.AILevel||(this.gameData.AILevel=1),this.gameData.AILevel+=2;var e=n.getTableArr("AILevel");if(e.length>0){var t=e[e.length-1].level;this.gameData.AILevel>t&&(this.gameData.AILevel=t)}this.saveGameDataToLocalCache()},AILevelDown:function(){this.gameData.AILevel||(this.gameData.AILevel=1),this.gameData.AILevel--,this.gameData.AILevel<1&&(this.gameData.AILevel=1),this.saveGameDataToLocalCache()},updateTaskData:function(e,t){var i=this,s=null,o=[];this.skinArr=n.getTableArr("skin");for(var r=0;r<this.skinArr.length;r++){var c=this.skinArr[r];c.type===e&&this.gameData.skinData&&this.gameData.skinData["s"+c.ID]!==a.getSkinNum&&o.push(c)}return o.length>0&&(this.gameData.taskData["s"+e]||(this.gameData.taskData["s"+e]=0),t||0===t?this.gameData.taskData["s"+e]=t:this.gameData.taskData["s"+e]++,o.forEach(function(t){i.gameData.taskData["s"+e]>=t.num&&(i.gameData.skinData["s"+t.ID]=a.getSkinNum,s=t)})),this.saveGameDataToLocalCache(),s},updateRoundCnt:function(e){this.gameData.roundCnt=e,this.saveGameDataToLocalCache()},finishSpeedGuide:function(){this.gameData.speedUpGuide=1,this.saveGameDataToLocalCache()},savePlayerName:function(e){this.gameData.playerName=e,this.saveGameDataToLocalCache()},enableVibrate:function(e){this.settingData||(this.settingData={}),this.vibrateOn=e,this.settingData.vibrateOn=e,this.saveSettingDataToLocalCache()},updateOfflineTime:function(e){this.gameData.dageOfflineTime=e,this.saveGameDataToLocalCache()},markDailyWelfareGet:function(){this.gameData.dailyWelfareGet=1,this.saveGameDataToLocalCache()},markDailyLoginGet:function(e){this.gameData.dailyLoginGet["day"+e]=1,this.saveGameDataToLocalCache()}}));o.start(),t.exports=o,cc._RF.pop()},{configuration:"configuration",constants:"constants",localConfig:"localConfig",utils:"utils"}],poolManager:[function(e,t){"use strict";cc._RF.push(t,"6e821/SnRFIN7LaUAzb8HNv","poolManager");var i=new(cc.Class({start:function(){this.dictPool={}},getNode:function(e,t){var i=e.name,n=null;if(this.dictPool.hasOwnProperty(i)){var a=this.dictPool[i];n=a.size()>0?a.get():cc.instantiate(e)}else{var s=new cc.NodePool;this.dictPool[i]=s,n=cc.instantiate(e)}return n.parent=t,n},putNode:function(e){var t=e.name,i=null;this.dictPool.hasOwnProperty(t)?i=this.dictPool[t]:(i=new cc.NodePool,this.dictPool[t]=i),i.put(e)},clearPool:function(e){this.dictPool.hasOwnProperty(e)&&this.dictPool[e].clear()}}));i.start(),t.exports=i,cc._RF.pop()},{}],pool:[function(e,t){"use strict";cc._RF.push(t,"e8c08nMMjFGBoTNItwnEzBp","pool"),kf.addModule("basic.pool",function(){return{_name1:"Pool",_name2:"Prefab",init:function(){},getPool:function(e){return this[e+this._name1]},isPool:function(e){return this[e+this._name1]&&this[e+this._name2]},createPrefabPool:function(e,t){var i=t;this.isPool(e.name)||(this[e.name+this._name1]=new cc.NodePool,this[e.name+this._name2]=e),i=i||1,i-=this[e.name+this._name1].size();for(var n=0;n<i;n++)this[e.name+this._name1].put(cc.instantiate(e))},getPrefab:function(e){var t=null;if(this.isPool(e)){var i=this[e+this._name1];t=i.size()>0?i.get():cc.instantiate(this[e+this._name2])}return t},getPrefabEx:function(e,t){var i=this.getPrefab(e);return i&&i.getComponent(e).setData(t),i},putInPool:function(e,t){this.isPool(e)&&this[e+this._name1].put(t)},putChildInPool:function(e){if(cc.isValid(e)&&0!==e.children.length)for(var t=e.children.length,i=0;i<t;i++){var n=e.children[0];this.isPool(n.name)&&(this.putChildInPool(n),this.putInPool(n.name,n))}}}}),cc._RF.pop()},{}],rankDetail:[function(e,t){"use strict";cc._RF.push(t,"706278Ng9pFhJJ6XX1XpPnO","rankDetail");var i=kf.require("basic.clientEvent");cc.Class({extends:cc.Component,properties:{rankIndex:cc.Label,fansCntLb:cc.Label,playerNameLb:cc.Label,spFrame:cc.Sprite,imgNormal:cc.SpriteFrame,imgSelect:cc.SpriteFrame,nodeDot:cc.Node},setData:function(e){this.rankIndex.string=e.rank,this.fansCntLb.string=e.fansCnt,this.playerNameLb.string=e.playerName,e.isAI?(this.rankIndex.node.color=e.color,this.nodeDot.color=e.color,this.spFrame.spriteFrame=this.imgNormal,this.node.x=0):(this.rankIndex.node.color=e.color,this.nodeDot.color=e.color,this.spFrame.spriteFrame=this.imgSelect,this.node.x=15)},start:function(){i.on("killPlayerUI",this.killPlayerUI.bind(this))},killPlayerUI:function(){},onDestroy:function(){i.off("killPlayerUI",this.killPlayerUI.bind(this))}}),cc._RF.pop()},{}],rankPanelLogic:[function(e,t){"use strict";cc._RF.push(t,"7922eoB+nxMhYOGyYzWhd7U","rankPanelLogic"),kf.addModule("rankPanel.rankPanelLogic",function(){return{init:function(){this.registerNetMsg()},registerNetMsg:function(){}}}),cc._RF.pop()},{}],rankPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"0513dVR/2dHDprg/4Ze6bJM","rankPanelUIEvent");var i=kf.require("basic.clientEvent"),n=kf.require("component.panel"),a=e("constants"),s=(e("playerData"),cc.Enum({LEFT:0,RIGHT:1,NONE:2})),o=cc.Class({extends:n,properties:{spSubContext:cc.Sprite},onLoad:function(){this._super()},showSubContext:function(){this.spSubContext.spriteFrame||(this.spSubContext.spriteFrame=new cc.SpriteFrame(new cc.Texture2D))},show:function(e,t){this._super(),t&&t(),this.fromGameOver=e.fromGameOver,this.showUserInfoBtn=e.showUserInfoBtn},onEnable:function(){this.showSubContext()},onBtnCloseClick:function(){cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),i.dispatchEvent("hidePanel","rankPanel")},onBtnLeftClick:function(){this.direction=s.LEFT},onBtnRightClick:function(){this.direction=s.RIGHT}});kf.addModule("rankPanel.rankPanelUIEvent",function(){return o}),cc._RF.pop()},{constants:"constants",playerData:"playerData"}],resourceUtil:[function(e,t){"use strict";cc._RF.push(t,"bfde0XMjYVCmZ2PEpQD47/b","resourceUtil");var i=new(cc.Class({onLoad:function(){},loadRes:function(e,t,i){cc.loader.loadRes(e,t,function(e,t){if(e)return cc.error(e.message||e),void i(e,t);i(e,t)})},getUIPrefabRes:function(e,t){this.loadRes("prefabs/ui/"+e,cc.Prefab,t)},createUI:function(e,t,i){this.getUIPrefabRes(e,function(e,n){if(!e){var a=cc.instantiate(n);a.setPosition(cc.v2(0,0)),i||(i=cc.find("Canvas")),i.addChild(a),t(null,a)}})},createEffect:function(e,t,i){this.loadRes("/subPackage/effects/"+e,cc.Prefab,function(e,n){if(e)t("err",null);else{var a=cc.instantiate(n);i||(i=cc.find("Canvas")),i.addChild(a),t(null,a)}})},getEffectPrefab:function(e,t){this.loadRes("gamePackages/effects/"+e,cc.Prefab,t)},getData:function(e,t){cc.loader.loadRes("datas/"+e,function(e,i){if(e)cc.error(e.message||e);else{var n=i.text;n?t(e,n):cc.loader.load(i.nativeUrl,function(e,i){t(e,n=i)})}})},getJsonData:function(e,t){cc.loader.loadRes("datas/"+e,function(e,i){e?cc.error(e.message||e):i.json?t(e,i.json):t("failed!!!")})},setSpriteFrame:function(e,t,i){this.loadRes(e,cc.SpriteFrame,function(n,a){if(n)return console.error("set sprite frame failed! err:",e,n),void i(n);t&&cc.isValid(t)&&(t.spriteFrame=a,i(null))})},getCakeIcon:function(e,t){this.loadRes("gamePackages/textures/icons/cakes/"+e,cc.SpriteFrame,function(e,i){if(e)return console.error("get cake icon failed! err:",path,e),void t(e);t(null,i)})},setPlayerHead:function(e,t,i){this.setSpriteFrame("subPackage/textures/heads/"+e,t,i)},setWeaponIcon:function(e,t,i){this.setSpriteFrame("subPackage/textures/weapons/"+e,t,i)},loadWeaponIcon:function(e,t){this.loadRes("subPackage/textures/weapons/"+e,cc.SpriteFrame,t)},setGameIcon:function(e,t,i){e.startsWith("http")?this.setAvatar(e,t,i):this.setSpriteFrame("subPackage/appicons/"+e,t,i)},setKillTips:function(e,t,i){this.setSpriteFrame("subPackage/textures/fightText/kill"+e,t,i)},loadMatchAvatar:function(e,t){this.loadRes("subPackage/textures/avatar/image"+e,cc.SpriteFrame,t)},formatName:function(e){var t="";if(e.length)if(e.length>6){for(var i=0;i<6;i++){var n=e[i]+e[i+1];null!==emojione.regUnicode.exec(n)?(t+=n,i++):t+=e[i]}t+="..."}else t=e;return t},setAvatar:function(e,t,i){e&&e.startsWith("http")&&cc.loader.load({url:e,type:"png"},function(n,a){if(n)return console.error("set avatar failed! err:",e,n),void i(n);var s=new cc.SpriteFrame(a,cc.Rect(0,0,a.width,a.height));t&&cc.isValid(t)&&(t.spriteFrame=s,i(null))})},convertMovieClip2Animation:function(e,t,i){var n=e.res,a={};for(var s in n){var o=n[s],r=new cc.SpriteFrame(t,cc.rect(o.x,o.y,o.w,o.h));a[s]=r}var c=e.mc,l=[];for(var h in c){var d={},u=c[h];d.sample=u.frameRate,d.frames=[];for(var p=0;p<u.frames.length;p++)for(var g=u.frames[p],f=0;f<g.duration;f++)d.frames.push(a[g.res]);var m=cc.AnimationClip.createWithSpriteFrames(d.frames,d.sample);m.name=h,l.push(m)}i(null,l)},loadMoveClip:function(e,t,i){var n=this,a=null,s=null;cc.loader.load({url:e,type:"json"},function(e,t){e||null!==(a=t)&&null!==s&&n.convertMovieClip2Animation(a,s,i)}),cc.loader.load({url:t,type:"png"},function(e,t){e||(s=t,null!==a&&null!==s&&n.convertMovieClip2Animation(a,s,i))})},setGray:function(e,t){for(var i=e.getComponentsInChildren(cc.Sprite),n=0;n<i.length;++n){var a=i[n];t?a.setState(cc.Sprite.State.GRAY):a.setState(cc.Sprite.State.NORMAL)}}}));i.onLoad(),t.exports=i,cc._RF.pop()},{}],reuseScrollView:[function(e,t){"use strict";cc._RF.push(t,"66857Eb5o1DG6vfaLZ1mgQw","reuseScrollView");var i=kf.require("basic.pool"),n=cc.Enum({TOP_BOTTOM:0,LEFT_RIGHT:1}),a=cc.Enum({"\u4e0a\u4e0b\u6ed1\u52a8":n.TOP_BOTTOM,"\u5de6\u53f3\u6ed1\u52a8":n.LEFT_RIGHT});cc.Class({extends:cc.Component,properties:{_scrollType:n.TOP_BOTTOM,modelType:{get:function(){return this._scrollType},set:function(e){this._scrollType=e},type:a,tooltip:"\u9009\u62e9\u6eda\u52a8\u6a21\u5f0f",displayName:"\u6eda\u52a8\u6a21\u5f0f"},itemTemplate:{default:null,type:cc.Prefab,tooltip:"\u88ab\u590d\u7528\u7684subPanel"},spawnCount:{default:0,type:cc.Integer,tooltip:"\u5b9e\u9645\u514b\u9686\u7684\u4e2a\u6570"},spacing:{default:0,type:cc.Float,tooltip:"\u6bcf\u4e2a\u4e4b\u95f4\u7684\u95f4\u9694"},topOrLeft:{default:0,type:cc.Float,tooltip:"\u9876\u90e8\u6216\u5de6\u8fb9\u7684\u504f\u79fb\u91cf"},bottomOrRight:{default:0,type:cc.Float,tooltip:"\u5e95\u90e8\u6216\u53f3\u8fb9\u7684\u504f\u79fb\u91cf"}},onLoad:function(){this.scrollView=this.node.getComponent(cc.ScrollView),this.content=this.scrollView.content,this.items=[],this.updateTimer=0,this.updateInterval=.2,this.lastContentPosY=0,this.scrollView.vertical=!0,this.scrollView.horizontal=!1,this.content.setAnchorPoint(.5,1);var e=this.content.getComponent(cc.Widget);e?(e.left=2.5,e.right=2.5,e.isAlignTop=!1,e.isAlignBottom=!1,this.content.y=this.node.getChildByName("view").height/2,this._scrollType===n.LEFT_RIGHT&&(this.scrollView.vertical=!1,this.scrollView.horizontal=!0,this.content.setAnchorPoint(0,.5),e.top=2.5,e.bottom=2.5,e.isAlignLeft=!1,e.isAlignRight=!1,e.isAlignTop=!0,e.isAlignBottom=!0),this.initialize()):console.warn("no widget component in content, please add it!")},setData:function(e){var t;for(this.dataArr=e,this.totalCount=this.dataArr.length,t=0;t<this.spawnCount&&!(t>=this.dataArr.length);++t)this._scrollType===n.LEFT_RIGHT?this.items[t].setPosition(this.topOrLeft+this.items[t].width*(.5+t)+this.spacing*(t+1),0):this.items[t].setPosition(0,-this.topOrLeft+-this.items[t].height*(.5+t)-this.spacing*(t+1)),this.items[t].getComponent(this.itemTemplate.name)||(console.error("-------------- reuseScrollview\u62a5\u9519"),console.log(this.itemTemplate.name),console.log(this.items[t].getComponent(this.itemTemplate.name))),this.items[t].getComponent(this.itemTemplate.name).itemIndex=t,this.items[t].getComponent(this.itemTemplate.name).setData(this.dataArr[t]),this.items[t].active=!0;for(t=this.dataArr.length;t<this.spawnCount;++t)this.items[t].active=!1;this._scrollType===n.LEFT_RIGHT?this.content.width=this.totalCount*(this.items[0].width+this.spacing)+this.spacing-this.topOrLeft+this.bottomOrRight:this.content.height=this.totalCount*(this.items[0].height+this.spacing)+this.spacing-this.topOrLeft+this.bottomOrRight},initialize:function(){i.createPrefabPool(this.itemTemplate);for(var e=0;e<this.spawnCount;++e){var t=i.getPrefab(this.itemTemplate.name);this.content.addChild(t),this._scrollType===n.LEFT_RIGHT?t.setPosition(this.topOrLeft+t.width*(.5+e)+this.spacing*(e+1),0):t.setPosition(0,-this.topOrLeft+-t.height*(.5+e)-this.spacing*(e+1)),t.active=!1,this.items.push(t)}},getPositionInView:function(e){var t=e.parent.convertToWorldSpaceAR(e.position);return this.scrollView.node.convertToNodeSpaceAR(t)},update:function(e){if(this.updateTimer+=e,!(this.updateTimer<this.updateInterval)){this.updateTimer=0;var t,i,a=[].concat(this.items),s=this.scrollView.content.y<this.lastContentPosY,o=(this.items[0].height+this.spacing)*a.length;this._scrollType===n.LEFT_RIGHT&&(s=this.scrollView.content.x>this.lastContentPosX,o=(this.items[0].width+this.spacing)*a.length);for(var r=0;r<a.length;++r){var c=this.getPositionInView(a[r]);if(s){var l=c.y<-(a[r].height+this.node.height/2+this.spacing)&&a[r].y+o<0;if(this._scrollType===n.LEFT_RIGHT&&(l=c.x>a[r].width+this.node.width/2+this.spacing&&a[r].x-o>0),l){if((i=(t=a[r].getComponent(this.itemTemplate.name)).itemIndex-a.length)<0)return;this._scrollType===n.LEFT_RIGHT?a[r].x-=o:a[r].y+=o,this.items[r].getComponent(this.itemTemplate.name).itemIndex=i,t.setData(this.dataArr[i])}}else{var h=c.y>this.node.height/2+a[r].height+this.spacing&&a[r].y-o>-this.content.height;if(this._scrollType===n.LEFT_RIGHT&&(h=-c.x>this.node.width/2+a[r].width+this.spacing&&a[r].x+o<this.content.width),h){if((i=(t=a[r].getComponent(this.itemTemplate.name)).itemIndex+a.length)>=this.dataArr.length)return;this._scrollType===n.LEFT_RIGHT?a[r].x+=o:a[r].y-=o,this.items[r].getComponent(this.itemTemplate.name).itemIndex=i,t.setData(this.dataArr[i])}}}this._scrollType===n.LEFT_RIGHT?this.lastContentPosX=this.scrollView.content.x:this.lastContentPosY=this.scrollView.content.y}},scrollEvent:function(){}}),cc._RF.pop()},{}],sceneFactory:[function(e,t){"use strict";cc._RF.push(t,"eea35u3a6FN6Z3ZTOdfV72w","sceneFactory");var i=cc.Class({extends:cc.Component,properties:{maskNode:{default:null,type:cc.Node,displayName:"\u8499\u677f",readonly:!1},uiRoot:cc.Node},onLoad:function(){kf.require("basic.panelCenter").initGraphic(this.node,this.maskNode,this.uiRoot)}});kf.addModule("component.sceneFactory",function(){return i}),cc._RF.pop()},{}],settingPanelLogic:[function(e,t){"use strict";cc._RF.push(t,"073feBl+stBXKjM44eM19bo","settingPanelLogic"),kf.addModule("settingPanel.settingPanelLogic",function(){return{init:function(){this.registerNetMsg()},registerNetMsg:function(){}}}),cc._RF.pop()},{}],settingPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"b70bbRDHghDKK1Qdw4A/esc","settingPanelUIEvent");var i=kf.require("basic.clientEvent"),n=kf.require("component.panel"),a=e("constants"),s=e("playerData"),o=e("localConfig"),r=cc.Class({extends:n,properties:{soundOnImage:cc.SpriteFrame,soundOffImage:cc.SpriteFrame,vibrateOnImage:cc.SpriteFrame,vibrateOffImage:cc.SpriteFrame,versionLb:cc.Label,spSound:cc.Sprite,spVibrate:cc.Sprite},onLoad:function(){this._super(),this.registerWidgetEvent(),this.registerEvent()},registerWidgetEvent:function(){},onBtnCloseClick:function(){cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),i.dispatchEvent("hidePanel","settingPanel")},onBtnSoundClick:function(){cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),cc.gameSpace.audioManager.getConfiguration(!0)?(cc.gameSpace.audioManager.closeMusic(),cc.gameSpace.audioManager.closeSound()):(cc.gameSpace.audioManager.openMusic(),cc.gameSpace.audioManager.openSound()),this.updateUI()},onBtnVibrateClick:function(){cc.gameSpace.audioManager.playSound(a.AUDIO_SOUND.CLICK),s.vibrateOn?s.enableVibrate(!1):s.enableVibrate(!0),this.updateUI()},updateUI:function(){var e=cc.gameSpace.audioManager.getConfiguration(!0);this.spSound.spriteFrame=e?this.soundOnImage:this.soundOffImage,s.vibrateOn?this.spVibrate.spriteFrame=this.vibrateOnImage:this.spVibrate.getComponent(cc.Sprite).spriteFrame=this.vibrateOffImage,this.versionLb.string="Ver:"+o.getVersion()},registerEvent:function(){},show:function(e){this._super(),e&&e(),this.updateUI()}});kf.addModule("settingPanel.settingPanelUIEvent",function(){return r}),cc._RF.pop()},{constants:"constants",localConfig:"localConfig",playerData:"playerData"}],skinPanelLogic:[function(e,t){"use strict";cc._RF.push(t,"8421dtAmN9A9KzoUK/XVxR1","skinPanelLogic"),kf.addModule("skinPanel.skinPanelLogic",function(){return{init:function(){this.registerNetMsg()},registerNetMsg:function(){}}}),cc._RF.pop()},{}],skinPanelSkinItem:[function(e,t){"use strict";cc._RF.push(t,"1f7ec3OCk1D46hlmAS63Bou","skinPanelSkinItem");var i=e("playerData"),n=(e("constants"),e("resourceUtil"));cc.Class({extends:cc.Component,properties:{spFrame:cc.Sprite,spNameBg:cc.Sprite,spAvatar:cc.Sprite,lbName:cc.Label,nodeSelect:cc.Node,nodeLock:cc.Node,nodeUse:cc.Node,imgUnlockFrame:cc.SpriteFrame,imgLockFrame:cc.SpriteFrame,imgUnlockNameBg:cc.SpriteFrame,imgLockNameBg:cc.SpriteFrame,colorUnlockName:new cc.color,colorLockName:new cc.color},start:function(){},setSelect:function(e){this.nodeUse.active=e,this.nodeSelect.active=e},show:function(e,t,a){this._parent=a,this.index=t,this.skinData=e,n.setPlayerHead("head"+e.ID,this.spAvatar,function(){}),this.lbName.string=e.name,e.ID===i.gameData.skinData.useSkinIndex?this.setSelect(!0):this.setSelect(!1),i.gameData.playerSkins.indexOf(t)>-1?(this.ownd=!0,this.nodeLock.active=!1,this.spFrame.spriteFrame=this.imgUnlockFrame,this.spNameBg.spriteFrame=this.imgUnlockNameBg,this.lbName.node.color=this.colorUnlockName):(this.ownd=!1,this.nodeLock.active=!0,this.spFrame.spriteFrame=this.imgLockFrame,this.spNameBg.spriteFrame=this.imgLockNameBg,this.lbName.node.color=this.colorLockName)},onBtnItemClick:function(){this._parent.onSkinItemClick(this)}}),cc._RF.pop()},{constants:"constants",playerData:"playerData",resourceUtil:"resourceUtil"}],skinPanelSwordItem:[function(e,t){"use strict";cc._RF.push(t,"b6bf8yXACxJJJQaUoy4rKDt","skinPanelSwordItem");var i=e("playerData"),n=e("constants"),a=e("resourceUtil");cc.Class({extends:cc.Component,properties:{spSword:cc.Sprite,lbName:cc.Label,nodeSelect:cc.Node,nodeLock:cc.Node,nodeUse:cc.Node},start:function(){},setSelect:function(e){this.nodeUse.active=e,this.nodeSelect.active=e},refresh:function(){this.show(this.swordData,this._parent)},show:function(e,t){this._parent=t,this.swordData=e,a.setWeaponIcon("weapon"+this.swordData.ID,this.spSword,function(){}),e.ID===i.gameData.skinData.useSkinIndex?this.setSelect(!0):this.setSelect(!1),this.lbName.string=e.name,i.gameData.skinData["s"+e.ID]&&i.gameData.skinData["s"+e.ID]===n.getSkinNum?this.nodeLock.active=!1:this.nodeLock.active=!0},onBtnItemClick:function(){cc.gameSpace.audioManager.playSound(n.AUDIO_SOUND.CHANGE_WEAPON),this._parent.onSwordItemClick(this)}}),cc._RF.pop()},{constants:"constants",playerData:"playerData",resourceUtil:"resourceUtil"}],skinPanelUIEvent:[function(e,t){"use strict";function i(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc._RF.push(t,"31af6fyXDBDsY8ndnzlckgU","skinPanelUIEvent");var s=kf.require("basic.clientEvent"),o=kf.require("component.panel"),r=e("constants"),c=kf.require("basic.pool"),l=e("localConfig"),h=e("playerData"),d=e("resourceUtil"),u=cc.Class({extends:o,properties:{swordItemPrefab:cc.Prefab,skinItemPrefab:cc.Prefab,progressBlockPref:cc.Prefab,swordPrefab:cc.Prefab,nodeSwordPage:cc.Node,nodeSwordContent:cc.Node,nodeSkinPage:cc.Node,nodeSkinContent:cc.Node,nodeSwordParent:cc.Node,nodeBtnSword:cc.Node,nodeBtnSkin:cc.Node,imgTabNormal:cc.SpriteFrame,imgTabSelect:cc.SpriteFrame,spPlayer:cc.Sprite},onLoad:function(){this._super(),h.gameData.playerSkins||(h.gameData.playerSkins=[0]),this.registerWidgetEvent(),this.registerEvent(),c.createPrefabPool(this.swordItemPrefab),c.createPrefabPool(this.progressBlockPref),this.chooseIndex=h.gameData.skinData.useSkinIndex,this.skinItemArr=[],this.playerConfigArr=l.getTableArr("player"),this.initSkin(),this.createPlayerNode(),this.selectPlayer(h.gameData.playerDefaultSkin||0),this.setSelectPage("sword"),this.stopKeepTime=.1,this._stopTime=0,this.rotateSpeed=150},selectPlayer:function(e){d.setPlayerHead("head"+(e+1),this.spPlayer,function(){});for(var t=this.nodeSkinContent.children,i=0;i<t.length;i++){var n=t[i].getComponent("skinPanelSkinItem");n.index===e?(n.setSelect(!0),this.updatePlayerLayout(n.ownd)):n.setSelect(!1)}},updatePlayerLayout:function(e){e?(this.widget.frame.skinArea.playerNameLayout.gold.active=!1,this.widget.frame.skinArea.playerNameLayout.ownTip.active=!0):(this.widget.frame.skinArea.playerNameLayout.gold.active=!0,this.widget.frame.skinArea.playerNameLayout.ownTip.active=!1)},onSkinItemClick:function(e){this.currentSelectIndex=e.index,e.ownd&&(h.gameData.playerDefaultSkin=e.index,s.dispatchEvent("updateUserDataDisplay")),this.selectPlayer(e.index)},createPlayerNode:function(){this.nodeSkinContent.removeAllChildren();for(var e=0;e<this.playerConfigArr.length;e++){var t=cc.instantiate(this.skinItemPrefab);t.parent=this.nodeSkinContent,t.getComponent("skinPanelSkinItem").show(this.playerConfigArr[e],e,this)}},createSword:function(){this.nodeSwordParent.removeAllChildren();for(var e=this.skinArr[h.skinId-1],t=e.fansAddition+1,i=0;i<t;i++){var n=c.getPrefab(this.swordPrefab.name);this.nodeSwordParent.addChild(n),n.getComponent("swordEffectLogic").setData(t,i),d.setWeaponIcon("weapon"+e.ID,n.getComponent(cc.Sprite),function(){})}},initSkin:function(){this.skinArr=l.getTableArr("skin"),h.isRefreshSkinData=!1;for(var e,t=i(this.skinArr);!(e=t()).done;){var n=e.value,a=c.getPrefab(this.swordItemPrefab.name);a.getComponent("skinPanelSwordItem").show(n,this),this.skinItemArr.push(a),this.nodeSwordContent.addChild(a)}},onSwordItemClick:function(e){this.skinItemArr[h.gameData.skinData.useSkinIndex-1].getComponent("skinPanelSwordItem").setSelect(!1);var t=e.swordData.ID;this.skinItemArr[this.chooseIndex-1].getComponent("skinPanelSwordItem").setSelect(!1),h.gameData.skinData.useSkinIndex=t,this.chooseIndex=t,e.setSelect(!0);var i=h.gameData.skinData["s"+t]&&h.gameData.skinData["s"+t]===r.getSkinNum;this.updateSkinDisplay(i),this.createSword()},updateSkinDisplay:function(e){e?this.widget.frame.skinArea.skinNameLayout.gold.active=!1:(this.widget.frame.skinArea.skinNameLayout.gold.active=!0,this.widget.frame.skinArea.skinNameLayout.gold.num.getComponent(cc.Label).string=this.skinArr[this.chooseIndex-1].num,h.gameData.gold>=this.skinArr[this.chooseIndex-1].num?this.widget.frame.skinArea.skinNameLayout.gold.dot.active=!0:this.widget.frame.skinArea.skinNameLayout.gold.dot.active=!1),h.skinId=h.gameData.skinData.useSkinIndex,this.widget.frame.skinArea.skinNameLayout.skinName.getComponent(cc.Label).string=this.skinArr[this.chooseIndex-1].name,this.widget.frame.skinArea.skinNameLayout.skinName.num.getComponent(cc.Label).string="Initial number of knives\uff1a"+(this.skinArr[this.chooseIndex-1].fansAddition+1),this.updateSkinAddition()},updateSkinAddition:function(){c.putChildInPool(this.widget.skinAddition.fans.progress);for(var e=this.skinArr[this.chooseIndex-1],t=0;t<e.fansAddition+1;t++){var i=c.getPrefab(this.progressBlockPref.name);this.widget.skinAddition.fans.progress.addChild(i)}},refreshSkinData:function(){var e=this.skinItemArr[h.gameData.skinData.useSkinIndex-1].getComponent("skinPanelSwordItem");e&&e.setSelect(!1),this.nodeSwordContent.removeAllChildren(!0),this.skinItemArr=[],this.initSkin()},setSelectPage:function(e){this.nodeBtnSword.getComponent(cc.Sprite).spriteFrame="sword"===e?this.imgTabSelect:this.imgTabNormal,this.nodeBtnSkin.getComponent(cc.Sprite).spriteFrame="sword"===e?this.imgTabNormal:this.imgTabSelect,"sword"===e?(this.widget.frame.skinArea.skinNameLayout.active=!0,this.widget.frame.skinArea.playerNameLayout.active=!1,this.nodeSwordPage.active=!0,this.nodeSkinPage.active=!1):(this.widget.frame.skinArea.skinNameLayout.active=!1,this.widget.frame.skinArea.playerNameLayout.active=!0,this.nodeSwordPage.active=!1,this.nodeSkinPage.active=!0)},onBtnTabSwordClick:function(){this.setSelectPage("sword")},onBtnTabSkinClick:function(){this.setSelectPage("skin")},onBtnCloseClick:function(){this.skinItemArr[this.chooseIndex-1].getComponent("skinPanelSwordItem").setSelect(!1),this.skinItemArr[h.gameData.skinData.useSkinIndex-1].getComponent("skinPanelSwordItem").setSelect(!0),s.dispatchEvent("updateUserDataDisplay"),s.dispatchEvent("hidePanel","skinPanel")},registerWidgetEvent:function(){var e=this;this.widget.frame.skinArea.playerNameLayout.gold.on("click",function(){cc.gameSpace.audioManager.playSound(r.AUDIO_SOUND.CLICK),h.gameData.gold>=15e3?(h.gameData.gold-=15e3,h.gameData.playerSkins.push(e.currentSelectIndex),h.gameData.playerDefaultSkin=e.currentSelectIndex,s.dispatchEvent("updateUserDataDisplay"),e.createPlayerNode(),e.selectPlayer(h.gameData.playerDefaultSkin)):s.dispatchEvent("showPanel","tipsPanel","Golds not enough")}),this.widget.frame.skinArea.skinNameLayout.gold.on("click",function(){cc.gameSpace.audioManager.playSound(r.AUDIO_SOUND.CLICK);var e=this.skinArr[this.chooseIndex-1];h.gameData.gold>=e.num?(h.gameData.gold-=e.num,h.gameData.skinData["s"+e.ID]=r.getSkinNum,this.skinItemArr[h.gameData.skinData.useSkinIndex-1].getComponent("skinPanelSwordItem").setSelect(!1),h.gameData.skinData.useSkinIndex=e.ID,this.skinItemArr[h.gameData.skinData.useSkinIndex-1].getComponent("skinPanelSwordItem").refresh(),this.refreshSkinData(),this.updateSkinDisplay(!0)):s.dispatchEvent("showPanel","tipsPanel","Golds not enough")}.bind(this))},registerEvent:function(){},show:function(e){this._super(),e&&e(),this.chooseIndex=h.gameData.skinData.useSkinIndex,this.skinArr=l.getTableArr("skin"),this.skinArrOwn=this.skinArr,this.skinData=h.gameData.skinData,this.skinArrOwn=this.skinArrOwn.filter(function(e){return!(!this.skinData["s"+e.ID]||this.skinData["s"+e.ID]!=r.getSkinNum)}.bind(this));for(var t=!1,i=0;i<this.skinArrOwn.length;i++)if(h.skinId===this.skinArrOwn[i].ID){t=!0;break}this.updateSkinDisplay(t),this.refreshSkinData(),this.createSword()},update:function(e){this.isValid&&(this._stopTime<this.stopKeepTime?this._stopTime+=e:this.nodeSwordParent.angle+=this.rotateSpeed*e)}});kf.addModule("skinPanel.skinPanelUIEvent",function(){return u}),cc._RF.pop()},{constants:"constants",localConfig:"localConfig",playerData:"playerData",resourceUtil:"resourceUtil"}],startGame:[function(e,t){"use strict";cc._RF.push(t,"71ccfqCn3RGEqdXdH4Ot+oN","startGame");var i=e("playerData"),n=e("constants"),a=cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,loadingPanel:{type:cc.Node,default:null},fastLoadPanel:[cc.Prefab],startPanel:""},start:function(){if(this.isReady=!1,this.clientEvent=kf.require("basic.clientEvent"),this.loadUnnecessaryPanel(["mainPanel"]),this.clientEvent.dispatchEvent("hidePanel","maskPanel"),cc.gameSpace.isConfigLoadFinished&&!i.isFirstLoad)return i.gameNum++,i.showCrazySpotPanel&&i.gameNum%2==0?this.clientEvent.dispatchEvent("showPanel","getAwardPanel",{showCrazySpot:!0}):kf.require("basic.clientEvent").dispatchEvent("showPanel","gameOverPanel"),this.loadingPanel.getChildByName("loadingNode").getChildByName("logo").active=!1,this.loadingPanel.getChildByName("loadingNode").getChildByName("gameBar").active=!1,this.loadingPanel.active=!1,void console.info("** startGame start userlogined");i.isFirstLoad=!1,i.firstLogin=!0,this.loadUnnecessaryPanel(["mainPanel","superStartPanel","matchingPanel"]),cc.gameSpace.audioManager.playMusic(n.AUDIO_MUSIC.BACKGROUND,!0),console.info("** startGame start"),this.loadingCompleted()},loadingCompleted:function(){cc.gameSpace.isConfigLoadFinished&&(i.loadingCompleted=!0,clearInterval(this.progressInterval),this.progressInterval=null,this.startPanel&&(this.bgNode.active=!0,console.info("showPanel ",this.startPanel,this.loadingPanel.name),this.clientEvent.dispatchEvent("showPanel",this.startPanel)),this.loadingPanel.getChildByName("loadingNode").getChildByName("logo").active=!1,this.loadingPanel.getChildByName("loadingNode").getChildByName("gameBar").active=!1,this.loadingPanel.active=!1)},loadUnnecessaryPanel:function(e){var t=0,i=kf.require("basic.panelCenter"),n=function(){e[t]&&i.getAndCreateSubPanelNotHide(e[t],function(){t++,n()}.bind(this))}.bind(this);n()}});kf.addModule("component.startGame",function(){return a}),cc._RF.pop()},{constants:"constants",playerData:"playerData"}],subPanel:[function(e,t){"use strict";cc._RF.push(t,"1e127q5TylG+I0f/w6Aq0ag","subPanel");var i=kf.require("component.panel"),n=cc.Class({extends:i,properties:{_dataReady:!1,_isShow:!1,isModal:{default:!1,visible:!1,override:!0},customFlag:{default:!1,visible:!1,override:!0}},onLoad:function(){this._super()},start:function(){this.onEnable()},setData:function(e){this._data=e,this._dataReady=!0,this._isShow&&this.show()},getData:function(){return this._data},isDataReady:function(){return this._dataReady},show:function(){},onDisable:function(){this._isShow=!1},onEnable:function(){this._isShow=!0,this.isDataReady()&&(this.show(),this._dataReady=!1)}});kf.addModule("component.subPanel",function(){return n}),cc._RF.pop()},{}],superStartPanelLogic:[function(e,t){"use strict";cc._RF.push(t,"6790a+EbFBIaarYWlHmRwXH","superStartPanelLogic"),kf.addModule("superStartPanel.superStartPanelLogic",function(){return{init:function(){this.registerNetMsg()},registerNetMsg:function(){}}}),cc._RF.pop()},{}],superStartPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"7798fJeq/xKXpkgljdoYicV","superStartPanelUIEvent");var i=kf.require("basic.clientEvent"),n=kf.require("component.panel"),a=kf.require("basic.pool"),s=e("localConfig"),o=e("playerData"),r=cc.Class({extends:n,properties:{swordPrefab:cc.Prefab,spShareIcon:cc.Sprite,nodeSwordGroup:cc.Node},onLoad:function(){this._super(),this.skinArr=s.getTableArr("skin"),this.registerWidgetEvent(),this.registerEvent()},onBtnCloseClick:function(){i.dispatchEvent("showPanel","matchingPanel"),i.dispatchEvent("hidePanel","superStartPanel")},showReward:function(){1===o.superStart?(i.dispatchEvent("showPanel","matchingPanel"),i.dispatchEvent("hidePanel","superStartPanel")):10===o.superStart&&(o.superStart=20,i.dispatchEvent("showPanel","matchingPanel"),i.dispatchEvent("hidePanel","superStartPanel"))},onBtnShareClick:function(){this.showReward()},createSword:function(){var e=this;this.widget.allSword.removeAllChildren(),this.skinArr[o.skinId-1].fansAddition,cc.loader.loadRes("mainSkins/skin_"+(o.gameData.playerDefaultSkin+1),cc.Prefab,function(t,i){if(!t){var n,s=cc.instantiate(i);e.curSwordSp=s.getChildByName("image").getComponent(cc.Sprite).spriteFrame;for(var o=0;o<10;o++)n=a.getPrefab(e.swordPrefab.name),e.widget.allSword.addChild(n),n.getComponent("swordEffectLogic").setData(10,o),n.getComponent(cc.Sprite).spriteFrame=e.curSwordSp}})},show:function(e,t){this._super(),t&&t(),this.widget.closeBtn.active=!0,e&&e.finalWelfare?(this.finalWelfare=!0,this.widget.frame.image.getComponent(cc.Animation).play()):this.finalWelfare=!1}});kf.addModule("superStartPanel.superStartPanelUIEvent",function(){return r}),cc._RF.pop()},{localConfig:"localConfig",playerData:"playerData"}],swordEffectLogic:[function(e,t){"use strict";cc._RF.push(t,"ae0f6b4FENHiLMk7YsZ6NRp","swordEffectLogic"),cc.Class({extends:cc.Component,onLoad:function(){this.changeTime=.2,this.isDefence=!0,this.changeSpeed=500,this.adjustMoreSpeed=200,this.adjustLessSpeed=400,this.captureSpeed=600,this.releaseSpeed=1500,this.releaseRotation=1e3,this.rollRotation=0,this.totalCnt=0},setData:function(e,t){this.totalCnt=e,this.knifeCountComp={maxCount:20,index:t}},getFinalPosition:function(){this.acceleration=0;var e=this.totalCnt,t=this.knifeCountComp.index,i=this.getRadiusByKnifeCount(e);return i=this.isDefence?i-90:i,this.rollRotation=360/e*t,e=Math.sin(this.rollRotation*Math.PI/180)*i,t=Math.cos(this.rollRotation*Math.PI/180)*i,cc.v2(t,e)},rotateKnife:function(){var e=this;if(this.node){var t=this.isDefence?90-this.rollRotation:540-this.rollRotation;if(this.lastRotation!==t){this.isRotating=!0,this.lastRotation=t;var i=cc.rotateTo(this.changeTime,t),n=cc.callFunc(function(){e.isRotating=!1});this.node.stopAllActions(),this.node.runAction(cc.sequence(i,n))}else(this.isRotating||this.node.angle!==t)&&(this.node.angle=t)}},setScale:function(){var e=.05*this.knifeCountComp.index+1.1;e=1.65<e?1.65:e,this.node.scaleY!==e&&(this.node.scaleY=e),this.node.scaleX!==e&&(this.node.scaleX=e)},update:function(e){this.finalPosition=this.getFinalPosition(),this.rotateKnife(),this.setScale();var t=this;if(this.finalPosition&&(this.finalPosition.x!==this.node.position.x||this.finalPosition.y!==this.node.position.y)){var i=this.finalPosition.sub(this.node.position),n=i.mag();this.moveDistance=this.changeSpeed*e,this.isAdjust&&(this.isMore?this.moveDistance=this.adjustMoreSpeed*e:this.moveDistance=this.adjustLessSpeed*e),this.isCapture&&(this.moveDistance=this.captureSpeed*e),this.isRelease&&(this.moveDistance=this.releaseSpeed*e,this.node.angle+=this.releaseRotation*e),this.acceleration+=50*e,this.moveDistance+=this.acceleration,this.moveDistance<n?this.node.position=this.node.position.add(i.mul(this.moveDistance/n)):(this.node.position=this.finalPosition,this.isAdjust&&(this.isAdjust=!1),this.isCapture&&(this.isCapture=!1),this.isRelease&&(e=cc.rotateBy(.5,this.releaseRotation/2),i=cc.callFunc(function(){t.isRelease=!1}),this.node.runAction(cc.sequence(e,i))))}},getRadiusByKnifeCount:function(e){return 250*this.getRadioByCount(e)},getRadioByCount:function(e){return(8>e?0:20<e?12:e-8)/12+1}}),cc._RF.pop()},{}],timeOverRankDetail:[function(e,t){"use strict";cc._RF.push(t,"5cb159GgT5L9ooPqLVoGpZB","timeOverRankDetail"),e("constants"),cc.Class({extends:cc.Component,properties:{fansCntLb:cc.Label,playerNameLb:cc.Label,coinLb:cc.Label,bg:cc.Node,fanTag:cc.Node,deadTag:cc.Node,nodeTop3:cc.Node,nodeRank:cc.Node,lbTop3:cc.Label,lbRank:cc.Label},onLoad:function(){},setData:function(e){e.isSelf?e.color=new cc.Color(255,255,255,255):e.color=cc.color("#aca5c9"),e.rank<4?(this.nodeTop3.active=!0,this.nodeRank.active=!1,this.lbTop3.string=e.rank):(this.nodeTop3.active=!1,this.nodeRank.active=!0,this.lbRank.string=e.rank),e.fansCnt<=0?(this.deadTag.active=!0,this.fanTag.active=!1):(this.deadTag.active=!1,this.fanTag.active=!0,this.fansCntLb.string="x"+e.fansCnt),this.playerNameLb.string=e.playerName,e.isSelf&&(this.bg.color=cc.color("#1093b9"));var t=[200,150,100,50,20,20,20,20],i=30;e.rank<=t.length&&(i=t[e.rank-1]),this.coinLb.string=i}}),cc._RF.pop()},{constants:"constants"}],tipsPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"272f60QCbhFWLh8TVZFZ+N/","tipsPanelUIEvent");var i=kf.require("component.panel"),n=cc.Class({extends:i,properties:{tipsSubPanel:cc.Prefab},onLoad:function(){this._super(),this.registerWidgetEvent(),this.registerEvent(),this.upTipArr=[],this.tipIndex=0,this.lastTab=null;for(var e=0;e<5;e++){var t=cc.instantiate(this.tipsSubPanel);this.node.addChild(t),t.active=!1,this.upTipArr[e]=t}this.tipMsgBak=[],this.isPlay=!1},registerWidgetEvent:function(){},registerEvent:function(){},show:function(e){this._super(),this.tipMsgBak.push(e);var t=this.tipMsgBak.length-10;t>0&&this.tipMsgBak.splice(1,t),this.isPlay||(this.isPlay=!0,this.lastTab=null,this.newTab())},newTab:function(){var e=this;if(this.tipMsgBak.length<1)return this.isPlay=!1,void(this.lastTab=null);var t=this.tipMsgBak.shift();if(t){if(this.lastTab){var i=cc.moveBy(.3,cc.v2(0,50));this.lastTab.stopAllActions(),this.lastTab.getComponent("tipsSubPanelUIEvent").hideTxt(),this.lastTab.runAction(i)}this.upTipArr[this.tipIndex].active=!0,this.upTipArr[this.tipIndex].getComponent("tipsSubPanelUIEvent").setData(t),this.lastTab=this.upTipArr[this.tipIndex],this.tipIndex++,this.tipIndex>=5&&(this.tipIndex=0),this.newTabTimeOut=setTimeout(function(){e.newTab()},700)}else this.newTab()},hide:function(){this.newTabTimeOut&&(clearTimeout(this.newTabTimeOut),this.newTabTimeOut=null)}});kf.addModule("tipsPanel.tipsPanelUIEvent",function(){return n}),cc._RF.pop()},{}],tipsSubPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"a73d8KeEaBNi5JHSH3a0GCZ","tipsSubPanelUIEvent");var i=kf.require("basic.clientEvent"),n=kf.require("component.subPanel"),a=cc.Class({extends:n,properties:{},onLoad:function(){this._super()},hideTxt:function(){var e=this;this.node.stopAllActions();var t=cc.fadeOut(1);this.node.runAction(cc.sequence(t,cc.callFunc(function(){e.node.active=!1,i.dispatchEvent("hidePanel","tipsPanel")})))},show:function(){var e=this;this._super();var t=this.getData();this.node.opacity=255,this.node.stopAllActions(),this.node.position=cc.v2(0,0),this.widget.tipTxt.getComponent(cc.Label).string=t;var i=this.widget.tipTxt.getContentSize(),n=this.widget.tipBg.getContentSize(),a=i.width;a>cc.winSize.width&&(a=cc.winSize.width),this.widget.tipBg.setContentSize(80+a,n.height);var s=cc.sequence(cc.moveBy(.3,0,40).easing(cc.easeIn(.6)),cc.delayTime(.7),cc.callFunc(function(){e.hideTxt(function(){e.node.active=!1})}));this.node.runAction(s)}});kf.addModule("tipsPanel.tipsSubPanelUIEvent",function(){return a}),cc._RF.pop()},{}],trialSkinPanelUIEvent:[function(e,t){"use strict";cc._RF.push(t,"138858Gbi9NPq2lryUMci6f","trialSkinPanelUIEvent");var i=kf.require("component.panel"),n=e("constants"),a=kf.require("basic.clientEvent"),s=e("localConfig"),o=e("playerData"),r=e("resourceUtil"),c=e("utils");window.GameJava=null;var l=cc.Class({extends:i,properties:{spWeapon:cc.Sprite},onLoad:function(){if(this._super(),this.registerWidgetEvent(),this.registerEvent(),this.skin=null,this.skinArr=s.getTableArr("skin"),this.skinData=o.gameData.skinData,this.skinArrNoOwn=this.skinArr.filter(function(e){return!(e.ID<9||this.skinData["s"+e.ID]&&this.skinData["s"+e.ID]==n.getSkinNum)}.bind(this)),this.skinArrNoOwn.length>0){var e=_.random(0,this.skinArrNoOwn.length-1);this.skin=this.skinArrNoOwn[e],this.updateSkinDisplay(this.skin)}},onEnable:function(){GameJava=this},updateSkinDisplay:function(e){r.setWeaponIcon("weapon"+e.ID,this.spWeapon,function(){})},startFunc:function(){2==o.welfareConfig?1==o.superStart?a.dispatchEvent("showPanel","superStartPanel",function(){}):10==o.superStart?a.dispatchEvent("showPanel","superStartPanel",{finalWelfare:!0},function(){}):a.dispatchEvent("showPanel","matchingPanel",function(){}):a.dispatchEvent("showPanel","matchingPanel",function(){}),a.dispatchEvent("hidePanel","trialSkinPanel")},onBtnGetClick:function(){var e=this;c.showRewardVideo(function(){cc.game.resume(),o.skinId=e.skin.ID,e.startFunc()},function(){cc.game.resume(),a.dispatchEvent("showPanel","tipsPanel","Ads load failed, please try again later.")},"trialSkin")},watchVideoCallBack:function(e){console.log("...watchVideoCallBack...rewardType:",e),"trialSkin"==e&&(cc.game.resume(),o.skinId=this.skin.ID,this.startFunc())},onBtnCloseClick:function(){this.startFunc()},registerWidgetEvent:function(){},registerEvent:function(){},show:function(e){this._super(),e&&e(),this.widget.closeBtn.active=!0}});kf.addModule("trialSkinPanel.trialSkinPanelUIEvent",function(){return l}),cc._RF.pop()},{constants:"constants",localConfig:"localConfig",playerData:"playerData",resourceUtil:"resourceUtil",utils:"utils"}],uiDeadPanel:[function(e,t){"use strict";cc._RF.push(t,"8023fdKqxVOQ6zhwR3dAdte","uiDeadPanel");var i=e("playerData"),n=e("constants"),a=e("../../../scripts/utils/utils"),s=kf.require("basic.clientEvent");e("Player"),window.GameJava=null,cc.Class({extends:cc.Component,properties:{shareBtn:cc.Node,rankLb:cc.Label,display:cc.Sprite,countDownLb:cc.Label},onLoad:function(){var e=this.display.getComponent(cc.Widget);e&&(e.target=cc.Canvas.instance.node,e.top=0,e.bottom=0,e.left=0,e.right=0,e.updateAlignment()),this.onSharing=!1},onEnable:function(){GameJava=this},start:function(){var e=9;this.countDownLb.string=e;var t=this;t.node.stopActionByTag(1005);var n=cc.repeatForever(cc.sequence(cc.callFunc(function(){e<0?(t.node.stopActionByTag(1005),i.AILevelDown(),cc.director.loadScene("mainScene")):(t.countDownLb.string=e,e--),console.log("uDeadPanel totalTime = "+e)}),cc.delayTime(1)));n.setTag(1005),this.node.runAction(n),PlayerManager.players.sort(function(e,t){return t.fans.length-e.fans.length});var a=PlayerManager.players.indexOf(PlayerManager.player);this.rankLb.string="."+(a+1),this.mPlayerManager=PlayerManager.player},onBtnShareClick:function(){var e=this;console.log("onBtnShareClick"),a.showRewardVideo(function(){console.log("success-----uDeadPanel this.mPlayerManager:",e.mPlayerManager," playerData.gameState:",i.gameState),cc.game.resume();var t=cc.director.getScene();console.log("curScene :",t);var a=t.getChildByName("Canvas").getChildByName("World");console.log("World :",a);var s=a.getChildByName("mainPlayers").getChildByName("Player");console.log("mainPlayers :",a.getChildByName("mainPlayers")),console.log("Player :",s),s.getComponent("Player").test(),i.gameState!==n.GAME_STATE.TIME_OVER&&(s.getComponent("Player").reviveVip(),i.gameState=n.GAME_STATE.PLAY),e.isValid&&e.node.destroy()},function(){cc.game.resume(),s.dispatchEvent("showPanel","tipsPanel","Ads load failed, please try again later.")},"deadPanel")},watchVideoCallBack:function(e){if(console.log("...watchVideoCallBack...rewardType:",e),"deadPanel"==e){cc.game.resume();var t=cc.director.getScene();console.log("curScene :",t);var a=t.getChildByName("Canvas").getChildByName("World");console.log("World :",a);var s=a.getChildByName("mainPlayers").getChildByName("Player");if(console.log("mainPlayers :",a.getChildByName("mainPlayers")),console.log("Player :",s),s.getComponent("Player").test(),i.gameState!==n.GAME_STATE.TIME_OVER&&(s.getComponent("Player").reviveVip(),i.gameState=n.GAME_STATE.PLAY),!this.isValid)return;this.node.destroy()}},onBtnContinueClick:function(){cc.gameSpace.audioManager.playSound(n.AUDIO_SOUND.LOSE),i.AILevelDown(),cc.director.loadScene("mainScene")},onDestroy:function(){},stopScroll:function(){this.scroll=!1}}),cc._RF.pop()},{"../../../scripts/utils/utils":"utils",Player:"Player",constants:"constants",playerData:"playerData"}],uiKillRank:[function(e,t){"use strict";cc._RF.push(t,"a9e6fl+C21Oi5/CB5u8nBQb","uiKillRank");var i=e("rankDetail"),n=kf.require("basic.clientEvent");cc.Class({extends:cc.Component,properties:{rankDetails:[i],selfRankDetail:i},onLoad:function(){n.on("addFan",this.addFan.bind(this)),n.on("killPlayerUI",this.killPlayerUI.bind(this))},addFan:function(){if(this.rankDetails){PlayerManager.players.sort(function(e,t){return t.fans.length-e.fans.length});for(var e=0;e<PlayerManager.players.length&&e<this.rankDetails.length;e++){var t=PlayerManager.players[e];if(t){var i={rank:e+1,fansCnt:t.node.active?t.fans.length:0,playerName:t.playerName,color:t.uiColor,isAI:t.info.isAI};this.rankDetails[e].setData(i)}}var n={rank:PlayerManager.players.indexOf(PlayerManager.player)+1,fansCnt:PlayerManager.player.fans.length,playerName:PlayerManager.player.playerName,color:PlayerManager.player.uiColor,isMainPlayer:!0};this.selfRankDetail.setData(n)}},killPlayerUI:function(e){if(e.victim.info.isAI)for(var t=this.rankDetails.length-1;t>=0;t--)if(this.rankDetails[t].node.active){this.rankDetails[t].node.active=!1,this.rankDetails[t].playerNameLb.node.active=!1;break}},onDestroy:function(){n.off("addFan",this.addFan.bind(this)),n.off("killPlayerUI",this.killPlayerUI.bind(this))}}),cc._RF.pop()},{rankDetail:"rankDetail"}],uiTimeOver:[function(e,t){"use strict";cc._RF.push(t,"db2c1+M3UhP3qQ9rIjybBkQ","uiTimeOver");var i=e("constants"),n=kf.require("component.panel"),a=(e("gameLogic"),e("playerData"));cc.Class({extends:n,properties:{backToMainBtn:cc.Node,rankPrefab:cc.Prefab,layoutParent:cc.Node,timeOver:cc.Label},setData:function(e){this.screenShootPath=e,console.log("screenShootPath :"+e)},start:function(){var e=this;this.randomIndex1=0,this.randomIndex2=1,this.showMoreMaxCd=3,this.showMoreCurCd=this.showMoreMaxCd,this.backToMainBtn.on("click",function(){cc.director.loadScene("mainScene")}),PlayerManager.players&&PlayerManager.players.sort(function(e,t){return t.fans.length-e.fans.length});for(var t=1,n=function(i){var n=cc.instantiate(e.rankPrefab);n.parent=e.layoutParent;var a=n.getComponent("timeOverRankDetail"),s=PlayerManager.players[i];if(s){var o={rank:i+1,fansCnt:s.fans.length,playerName:s.playerName,color:s.uiColor,isSelf:s===PlayerManager.player};a.setData(o),o.isSelf&&(t=o.rank)}var r=n.getComponent(cc.Animation);r&&setTimeout(function(){r.isValid&&r.play("timeOverRank")},100*i)},s=0;PlayerManager.players&&s<PlayerManager.players.length;s++)n(s);a.killLastAi?this.timeOver.string="Victory":this.timeOver.string=1===t?"Congratulations on eating chicken":"Time is running out",cc.gameSpace.audioManager.stop(i.AUDIO_MUSIC.FIGHT),1===t||a.killLastAi?cc.gameSpace.audioManager.playSound(i.AUDIO_SOUND.WIN):cc.gameSpace.audioManager.playSound(i.AUDIO_SOUND.LOSE)}}),cc._RF.pop()},{constants:"constants",gameLogic:"gameLogic",playerData:"playerData"}],updateValueLabel:[function(e,t){"use strict";cc._RF.push(t,"41deehQFiRAjpsM62X8dHQP","updateValueLabel"),cc.Class({extends:cc.Label,properties:{},preInit:function(){},ctor:function(){this.isPlaying=!1},playUpdateValue:function(e,t,i){this.startVal=e,this.endVal=t,this.diffVal=this.endVal-this.startVal,this.currTime=0,this.changingTime=i,this.string=0,this.isPlaying=!0},update:function(e){if(this.isPlaying){if(this.currTime<this.changingTime){this.currTime+=e;var t=this.startVal+parseInt(this.currTime/this.changingTime*this.diffVal);return t<this.startVal?t=this.startVal:t>this.endVal&&(t=this.endVal),void(this.string=t)}this.string=this.endVal,this.isPlaying=!1}}}),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"6eb26PxtklF6LvXUq5WQp5l","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}],utils:[function(e,t){"use strict";cc._RF.push(t,"5df4cWqfndMjqh0DuTNTjEu","utils");var i={clone:function(e){if(null===e||"object"!=typeof e)return e;var t={};for(var i in e.constructor===Array&&(t=[]),e)e.hasOwnProperty(i)&&(t[i]=this.clone(e[i]));return t},objectToArray:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},arrayToObject:function(e,t){var i={};for(var n in e)e.hasOwnProperty(n)&&e[n][t]&&(i[e[n][t]]=e[n]);return i},getWeightRandIndex:function(e,t){for(var i=parseInt(Math.random()*t),n=0,a=0;a<e.length&&!(i<(n+=e[a]));a++);return a},getRandomNFromM:function(e,t){for(var i=[],n=0,a=0;a<t&&!(a>=e+1);){n=this.getRandomInt(0,e);for(var s=0,o=0;o<a;o++)if(i[o]===n){s=1;break}0===s&&(i[a]=n,a++)}return i},getRandomInt:function(e,t){var i=Math.random()*(t-e+1)+e;return Math.floor(i)},getStringLength:function(e){for(var t=e,i=0,n=0,a=t.length;n<a;n++)i+=t.charCodeAt(n)<=255?1:2;return Math.ceil(i/2)},isEmptyObject:function(e){var t=!0;if(e&&e.constructor===Object){for(var i in e)if(e.hasOwnProperty(i)){t=!1;break}}else t=!1;return t},formatNum:function(e){if(e<=0)return"0";var t=Math.round(Math.log(e)/Math.log(1e3));return parseInt(e/Math.pow(1e3,t-1<0?0:t-1),10)+["","","K","M","B"][t]},isNewDay:function(e){var t=new Date(e),i=new Date,n=t.getYear(),a=t.getMonth(),s=t.getDate(),o=i.getYear(),r=i.getMonth(),c=i.getDate();return o>n||r>a||c>s},getPropertyCount:function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},difference:function(e,t){var i=[];if(e.constructor!==Array||t.constructor!==Array)return i;for(var n=e.length,a=0;a<n;a++)-1===t.indexOf(e[a])&&i.push(e[a]);return i},base64encode:function(e){var t,i,n,a,s,o,r,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",h=0;for(e=this.utf8Encode(e);h<e.length;)a=(t=e.charCodeAt(h++))>>2,s=(3&t)<<4|(i=e.charCodeAt(h++))>>4,o=(15&i)<<2|(n=e.charCodeAt(h++))>>6,r=63&n,isNaN(i)?o=r=64:isNaN(n)&&(r=64),l=l+c.charAt(a)+c.charAt(s)+c.charAt(o)+c.charAt(r);return l},utf8Encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},base64Decode:function(e){var t,i,n,a,s,o,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=r.indexOf(e.charAt(l++))<<2|(a=r.indexOf(e.charAt(l++)))>>4,i=(15&a)<<4|(s=r.indexOf(e.charAt(l++)))>>2,n=(3&s)<<6|(o=r.indexOf(e.charAt(l++))),c+=String.fromCharCode(t),64!=s&&(c+=String.fromCharCode(i)),64!=o&&(c+=String.fromCharCode(n));return this.utf8Decode(c)},utf8Decode:function(e){for(var t="",i=0,n=0,a=0,s=0;i<e.length;)(n=e.charCodeAt(i))<128?(t+=String.fromCharCode(n),i++):n>191&&n<224?(a=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&a),i+=2):(a=e.charCodeAt(i+1),s=e.charCodeAt(i+2),t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&s),i+=3);return t},stringToArray:function(e){var t,i="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",n=RegExp("[\\u200d\\ud800-\\udfff"+i+"\\ufe0e\\ufe0f]"),a="\\ud83c[\\udffb-\\udfff]",s="["+i+"]",o="(?:"+s+"|"+a+")?",r="[^\\ud800-\\udfff]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",h="[\\ufe0e\\ufe0f]?"+o+"(?:\\u200d(?:"+[r,c,l].join("|")+")[\\ufe0e\\ufe0f]?"+o+")*",d="(?:"+[r+s+"?",s,c,l,"[\\ud800-\\udfff]"].join("|")+")",u=RegExp(a+"(?="+a+")|"+d+h,"g");return t=e,n.test(t)?e.match(u)||[]:e.split("")},simulationUUID:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},isNowValid:function(e,t){var i=new Date(e),n=new Date(t),a=!1;if(i.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var s=new Date;a=s<n&&s>i}return a},getDeltaDays:function(e,t){e=new Date(e),t=new Date(t);var i=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),s=t.getFullYear(),o=t.getMonth()+1,r=t.getDate();e=new Date(i+"-"+n+"-"+a+" GMT+0800").getTime();var c=(t=new Date(s+"-"+o+"-"+r+" GMT+0800").getTime())-e;return Math.floor(c/864e5)},getMin:function(e){var t=null;if(e.constructor===Array)for(var i=e.length,n=0;n<i;n++)t=0===n?Number(e[0]):t>Number(e[n])?Number(e[n]):t;return t},formatTwoDigits:function(e){return(Array(2).join(0)+e).slice(-2)},formatDate:function(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t},getDay:function(){var e=new Date,t=e.getMonth()+1<10?"0"+Number(e.getMonth()+1):e.getMonth()+1,i=e.getDate()<10?"0"+e.getDate():e.getDate();return e.getFullYear()+"-"+t+"-"+i},formatName:function(e,t){t=t||6;var i=this.stringToArray(e),n="";if(i.length>t){for(var a=0;a<t;a++)n+=i[a];n+="..."}else n=e;return n},formatMoney:function(e){for(var t=["","K","M","G","T","P","E","Z","Y","B","N","D"],i="",n=0;n<t.length;n++){if(!(e>=1e4)){i=Math.floor(e)+t[n];break}e/=1e3}return""===i&&(i=Math.floor(e)+"U"),i},formatTimeForSecond:function(e){var t="",i=e%60,n=Math.floor(e/60);n=n<0?0:n;var a=Math.floor(n/60),s=n%60;return a>0&&(t+=a>9?a.toString():"0"+a,t+=":"),t+=s>9?s.toString():"0"+s,(t+=":")+(i>9?i.toString():"0"+i)},zip:function(e){var t=pako.gzip(encodeURIComponent(e),{to:"string"});return this.base64encode(t)},unZip:function(e){var t=this.base64Decode(e),i=t.split("").map(function(e){return e.charCodeAt(0)}),n=new Uint8Array(i),a=pako.inflate(n);return t=String.fromCharCode.apply(null,new Uint16Array(a)),decodeURIComponent(t)},encrypt:function(e){var t=this.base64encode(e),i=6;t.length%2==0&&(i=7);for(var n="",a=0;a<(t.length-i+1)/2;a++)n+=t[2*a+1],n+=t[2*a];return n+t.slice(t.length-i+1)},decrypt:function(e){var t=6;e.length%2==0&&(t=7);for(var i="",n=0;n<e.length-t;n+=2)i+=e[n+1],i+=e[n];return i+=e.slice(e.length-t+1),this.base64Decode(i)},isInSameDay:function(e){if(!e)return!1;var t=new Date,i=t.getFullYear(),n=t.getMonth(),a=t.getDate();e*=1e3;var s=new Date(e),o=s.getFullYear(),r=s.getMonth(),c=s.getDate();return i===o&&n===r&&a===c},checkDays:function(e,t){var i=new Date(e),n=i.getFullYear(),a=i.getMonth(),s=i.getDate(),o=new Date(t),r=o.getFullYear(),c=o.getMonth(),l=o.getDate(),h=parseInt(e/864e5),d=parseInt(t/864e5);return{sameDay:n===r&&a===c&&s===l,sameWeek:parseInt((h+4)/7)==parseInt((d+4)/7)}},cutString:function(e){for(var t=e,i=0,n="",a=0,s=t.length;a<s;a++)if(i+=t.charCodeAt(a)<=255?1:2,n+=t.charAt(a),i>=14)return n;return n},showRewardVideo:function(e,t,i){void 0===i&&(i=0),console.log("\u89c2\u770b\u89c6\u9891...showRewardVideo failCallBack:",t," successCallback:",e," rewardType:",i),cc.sys.platform,cc.sys.ANDROID,cc.game.pause(),window.mWatchAdCallback=e,void 0!==window.sdk&&"undefined"!==window.sdk.showBanner&&window.sdk.showBanner()},showIntertitialAD:function(e){console.log("\u89c2\u770b\u63d2\u5c4f...showIntertitialAD:"),cc.sys.platform,cc.sys.ANDROID,cc.game.pause(),window.mWatchAdCallbackInter=function(){cc.game.resume(),e&&e()},void 0!==window.sdk&&"undefined"!==window.sdk.showBanner&&window.sdk.showBanner()}};t.exports=i,cc._RF.pop()},{}],wxRender:[function(e,t){"use strict";function i(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc._RF.push(t,"542db4dA8NL/YumgJUW8L91","wxRender");var s=kf.require("basic.clientEvent");cc.Class({extends:cc.Component,properties:{wxPanelName:{default:[],type:[cc.String],displayName:"\u5b50\u57df\u754c\u9762\u540d\u79f0",tooltip:"\u5b50\u57df\u5c55\u793a\u754c\u9762\u540d\u79f0\uff0c\u9700\u8981\u4e0e\u4e3b\u57df\u5bf9\u5e94\u754c\u9762\u7684\u540d\u79f0\u4e00\u81f4"}},editor:{disallowMultiple:!0,menu:"Component/wxRender",help:"http://doc.anyh5.com/more/ditch/wechat/newWx.html"},onLoad:function(){this.registerEvent(),this.wxUpdateTimer=null,this.curFrameRate=10,this.node.addComponent(cc.WXSubContextView),this.panelCenter=kf.require("basic.panelCenter"),this.initWxRender(this.node)},registerEvent:function(){var e=this;s.on("showPanelOver",function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];for(var o,r=i(e.panelCenter.subPanelStack);!(o=r()).done;){var c=o.value;if(c.name===t){var l=e.panelCenter.subPanelStack.length,h=e.panelCenter.subPanelStack[l-2];e.onPanelChange(h?h.name:"",t,a)}}}),s.on("hidePanelOver",function(t){var i=e.panelCenter.subPanelStack.length,n=e.panelCenter.subPanelStack[i-1];e.onPanelChange(t,n?n.name:"")}),s.on("wxSubPanelStop",function(){window.wx&&e.wxSubPanelStop()}),s.on("wxSubPanelStart",function(t){window.wx&&e.wxSubPanelStart(t)}),s.on("dispatchWxEvent",function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];e.sendToWxSubContent(t,n)})},initWxRender:function(e){this.WXSubContext=e.getComponent(cc.WXSubContextView),this.WXSubContext.enabled=!1},sendToWxSubContent:function(e,t,i){if(window.wx){cc.log("dispatchWxEvent: "+e+" "+t),t||(t=[]);var n={param:t};i?n.msg=e:n.event=e,window.wx.getOpenDataContext().postMessage(n)}},onPanelChange:function(e,t,i){if(console.log("onPanelChange: ",e,t),-1!==this.wxPanelName.indexOf(e)&&this.sendToWxSubContent("hidePanel",[e]),t)if(-1!==this.wxPanelName.indexOf(t)){var n;n=i?[t].concat(i):[t],this.sendToWxSubContent("showPanel",n),this.wxSubPanelStart(this.curFrameRate)}else this.wxSubPanelStop()},wxSubPanelStop:function(){this._setWxSubPanelFrameRate(0),this.WXSubContext.enable=!1,this.node.active=!1},wxSubPanelStart:function(e){e||(e=10),this.WXSubContext.enable=!1,this.node.active=!0,this._setWxSubPanelFrameRate(e)},_setWxSubPanelFrameRate:function(e){var t=this;0===e||e?(this.curFrameRate=e,this.wxUpdateTimer&&(clearInterval(this.wxUpdateTimer),this.wxUpdateTimer=null),this.sendToWxSubContent("frameRate",[e]),e>0&&e<=20?(this.WXSubContext.enabled=!1,this.wxUpdateTimer=setInterval(function(){window.wx&&t.WXSubContext&&t.WXSubContext.isValid&&t.WXSubContext.update()},100)):e>20&&(this.WXSubContext.enabled=!0)):console.log("frameRate must be set")}}),cc._RF.pop()},{}]},{},["aengineAdapter","clientEvent","cloud","eventListener","panelCenter","pool","WheelSurf","panel","reuseScrollView","sceneFactory","startGame","subPanel","wxRender","camera","clickTipPanelUIEvent","dailyLoginPanelUIEvent","getAwardPanelUIEvent","getSkinPanelUIEvent","growUpPanelUIEvent","loadingPanelUIEvent","mainPanelUIEvent","maskPanelUIEvent","netLoadingPanelUIEvent","tipsPanelUIEvent","tipsSubPanelUIEvent","trialSkinPanelUIEvent","buttonEx","updateValueLabel","CircleCheck","Follow","Player","Shadow","enemyTrack","fan","Game","JoystickBG","JoystickCommon","CircleManager","FansManager","MapManager","ObstaclesManager","PlayerManager","ShadowManager","UIGamePanel","killTip","rankDetail","timeOverRankDetail","uiDeadPanel","uiKillRank","uiTimeOver","gameOverPanelLogic","gameOverPanelUIEvent","matchingPanelGameFan","matchingPanelLogic","matchingPanelUIEvent","rankPanelLogic","rankPanelUIEvent","settingPanelLogic","settingPanelUIEvent","skinPanelLogic","skinPanelSkinItem","skinPanelSwordItem","skinPanelUIEvent","superStartPanelLogic","superStartPanelUIEvent","animationUtil","PlayerRotate","swordEffectLogic","use_v2.0.x_cc.Toggle_event","checkNetwork","GDSdk","GameMonetizeSdk","audioManager","configManager","configuration","constants","formula","gameLogic","localConfig","lodash","playerData","poolManager","main","resourceUtil","utils"]);